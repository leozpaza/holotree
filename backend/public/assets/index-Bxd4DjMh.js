var PP=Object.defineProperty;var RP=(t,e,n)=>e in t?PP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var bc=(t,e,n)=>RP(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function hy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var TC={exports:{}},hd={},MC={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tc=Symbol.for("react.element"),IP=Symbol.for("react.portal"),LP=Symbol.for("react.fragment"),VP=Symbol.for("react.strict_mode"),BP=Symbol.for("react.profiler"),zP=Symbol.for("react.provider"),$P=Symbol.for("react.context"),FP=Symbol.for("react.forward_ref"),jP=Symbol.for("react.suspense"),HP=Symbol.for("react.memo"),UP=Symbol.for("react.lazy"),uw=Symbol.iterator;function WP(t){return t===null||typeof t!="object"?null:(t=uw&&t[uw]||t["@@iterator"],typeof t=="function"?t:null)}var NC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_C=Object.assign,AC={};function Xo(t,e,n){this.props=t,this.context=e,this.refs=AC,this.updater=n||NC}Xo.prototype.isReactComponent={};Xo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function DC(){}DC.prototype=Xo.prototype;function py(t,e,n){this.props=t,this.context=e,this.refs=AC,this.updater=n||NC}var my=py.prototype=new DC;my.constructor=py;_C(my,Xo.prototype);my.isPureReactComponent=!0;var fw=Array.isArray,OC=Object.prototype.hasOwnProperty,gy={current:null},PC={key:!0,ref:!0,__self:!0,__source:!0};function RC(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)OC.call(e,r)&&!PC.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:tc,type:t,key:s,ref:o,props:i,_owner:gy.current}}function KP(t,e){return{$$typeof:tc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yy(t){return typeof t=="object"&&t!==null&&t.$$typeof===tc}function qP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var dw=/\/+/g;function Ah(t,e){return typeof t=="object"&&t!==null&&t.key!=null?qP(""+t.key):e.toString(36)}function mu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case tc:case IP:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Ah(o,0):r,fw(i)?(n="",t!=null&&(n=t.replace(dw,"$&/")+"/"),mu(i,e,n,"",function(c){return c})):i!=null&&(yy(i)&&(i=KP(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(dw,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",fw(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+Ah(s,l);o+=mu(s,e,n,a,i)}else if(a=WP(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+Ah(s,l++),o+=mu(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Tc(t,e,n){if(t==null)return t;var r=[],i=0;return mu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function YP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ot={current:null},gu={transition:null},XP={ReactCurrentDispatcher:Ot,ReactCurrentBatchConfig:gu,ReactCurrentOwner:gy};function IC(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:Tc,forEach:function(t,e,n){Tc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Tc(t,function(){e++}),e},toArray:function(t){return Tc(t,function(e){return e})||[]},only:function(t){if(!yy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=Xo;ue.Fragment=LP;ue.Profiler=BP;ue.PureComponent=py;ue.StrictMode=VP;ue.Suspense=jP;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XP;ue.act=IC;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_C({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=gy.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)OC.call(e,a)&&!PC.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:tc,type:t.type,key:i,ref:s,props:r,_owner:o}};ue.createContext=function(t){return t={$$typeof:$P,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zP,_context:t},t.Consumer=t};ue.createElement=RC;ue.createFactory=function(t){var e=RC.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:FP,render:t}};ue.isValidElement=yy;ue.lazy=function(t){return{$$typeof:UP,_payload:{_status:-1,_result:t},_init:YP}};ue.memo=function(t,e){return{$$typeof:HP,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=gu.transition;gu.transition={};try{t()}finally{gu.transition=e}};ue.unstable_act=IC;ue.useCallback=function(t,e){return Ot.current.useCallback(t,e)};ue.useContext=function(t){return Ot.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return Ot.current.useDeferredValue(t)};ue.useEffect=function(t,e){return Ot.current.useEffect(t,e)};ue.useId=function(){return Ot.current.useId()};ue.useImperativeHandle=function(t,e,n){return Ot.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return Ot.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Ot.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Ot.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return Ot.current.useReducer(t,e,n)};ue.useRef=function(t){return Ot.current.useRef(t)};ue.useState=function(t){return Ot.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return Ot.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return Ot.current.useTransition()};ue.version="18.3.1";MC.exports=ue;var b=MC.exports;const lt=hy(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GP=b,JP=Symbol.for("react.element"),QP=Symbol.for("react.fragment"),ZP=Object.prototype.hasOwnProperty,eR=GP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tR={key:!0,ref:!0,__self:!0,__source:!0};function LC(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)ZP.call(e,r)&&!tR.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:JP,type:t,key:s,ref:o,props:i,_owner:eR.current}}hd.Fragment=QP;hd.jsx=LC;hd.jsxs=LC;TC.exports=hd;var M=TC.exports,lm={},VC={exports:{}},nn={},BC={exports:{}},zC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(T,A){var D=T.length;T.push(A);e:for(;0<D;){var B=D-1>>>1,z=T[B];if(0<i(z,A))T[B]=A,T[D]=z,D=B;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var A=T[0],D=T.pop();if(D!==A){T[0]=D;e:for(var B=0,z=T.length,U=z>>>1;B<U;){var H=2*(B+1)-1,X=T[H],G=H+1,Q=T[G];if(0>i(X,D))G<z&&0>i(Q,X)?(T[B]=Q,T[G]=D,B=G):(T[B]=X,T[H]=D,B=H);else if(G<z&&0>i(Q,D))T[B]=Q,T[G]=D,B=G;else break e}}return A}function i(T,A){var D=T.sortIndex-A.sortIndex;return D!==0?D:T.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],c=[],u=1,f=null,d=3,h=!1,p=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(T){for(var A=n(c);A!==null;){if(A.callback===null)r(c);else if(A.startTime<=T)r(c),A.sortIndex=A.expirationTime,e(a,A);else break;A=n(c)}}function x(T){if(m=!1,y(T),!p)if(n(a)!==null)p=!0,P(S);else{var A=n(c);A!==null&&R(x,A.startTime-T)}}function S(T,A){p=!1,m&&(m=!1,g(E),E=-1),h=!0;var D=d;try{for(y(A),f=n(a);f!==null&&(!(f.expirationTime>A)||T&&!O());){var B=f.callback;if(typeof B=="function"){f.callback=null,d=f.priorityLevel;var z=B(f.expirationTime<=A);A=t.unstable_now(),typeof z=="function"?f.callback=z:f===n(a)&&r(a),y(A)}else r(a);f=n(a)}if(f!==null)var U=!0;else{var H=n(c);H!==null&&R(x,H.startTime-A),U=!1}return U}finally{f=null,d=D,h=!1}}var C=!1,k=null,E=-1,N=5,I=-1;function O(){return!(t.unstable_now()-I<N)}function L(){if(k!==null){var T=t.unstable_now();I=T;var A=!0;try{A=k(!0,T)}finally{A?$():(C=!1,k=null)}}else C=!1}var $;if(typeof w=="function")$=function(){w(L)};else if(typeof MessageChannel<"u"){var _=new MessageChannel,V=_.port2;_.port1.onmessage=L,$=function(){V.postMessage(null)}}else $=function(){v(L,0)};function P(T){k=T,C||(C=!0,$())}function R(T,A){E=v(function(){T(t.unstable_now())},A)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(T){T.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,P(S))},t.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<T?Math.floor(1e3/T):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(T){switch(d){case 1:case 2:case 3:var A=3;break;default:A=d}var D=d;d=A;try{return T()}finally{d=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(T,A){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var D=d;d=T;try{return A()}finally{d=D}},t.unstable_scheduleCallback=function(T,A,D){var B=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?B+D:B):D=B,T){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=D+z,T={id:u++,callback:A,priorityLevel:T,startTime:D,expirationTime:z,sortIndex:-1},D>B?(T.sortIndex=D,e(c,T),n(a)===null&&T===n(c)&&(m?(g(E),E=-1):m=!0,R(x,D-B))):(T.sortIndex=z,e(a,T),p||h||(p=!0,P(S))),T},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(T){var A=d;return function(){var D=d;d=A;try{return T.apply(this,arguments)}finally{d=D}}}})(zC);BC.exports=zC;var nR=BC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rR=b,Zt=nR;function j(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $C=new Set,ia={};function Ss(t,e){vo(t,e),vo(t+"Capture",e)}function vo(t,e){for(ia[t]=e,t=0;t<e.length;t++)$C.add(e[t])}var Er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),am=Object.prototype.hasOwnProperty,iR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hw={},pw={};function sR(t){return am.call(pw,t)?!0:am.call(hw,t)?!1:iR.test(t)?pw[t]=!0:(hw[t]=!0,!1)}function oR(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lR(t,e,n,r){if(e===null||typeof e>"u"||oR(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dt[t]=new Pt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dt[e]=new Pt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dt[t]=new Pt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dt[t]=new Pt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dt[t]=new Pt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dt[t]=new Pt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dt[t]=new Pt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dt[t]=new Pt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dt[t]=new Pt(t,5,!1,t.toLowerCase(),null,!1,!1)});var vy=/[\-:]([a-z])/g;function wy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vy,wy);dt[e]=new Pt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vy,wy);dt[e]=new Pt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vy,wy);dt[e]=new Pt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dt[t]=new Pt(t,1,!1,t.toLowerCase(),null,!1,!1)});dt.xlinkHref=new Pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dt[t]=new Pt(t,1,!1,t.toLowerCase(),null,!0,!0)});function xy(t,e,n,r){var i=dt.hasOwnProperty(e)?dt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lR(e,n,i,r)&&(n=null),r||i===null?sR(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ar=rR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mc=Symbol.for("react.element"),Is=Symbol.for("react.portal"),Ls=Symbol.for("react.fragment"),Sy=Symbol.for("react.strict_mode"),cm=Symbol.for("react.profiler"),FC=Symbol.for("react.provider"),jC=Symbol.for("react.context"),ky=Symbol.for("react.forward_ref"),um=Symbol.for("react.suspense"),fm=Symbol.for("react.suspense_list"),Cy=Symbol.for("react.memo"),Fr=Symbol.for("react.lazy"),HC=Symbol.for("react.offscreen"),mw=Symbol.iterator;function ul(t){return t===null||typeof t!="object"?null:(t=mw&&t[mw]||t["@@iterator"],typeof t=="function"?t:null)}var Oe=Object.assign,Dh;function El(t){if(Dh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Dh=e&&e[1]||""}return`
`+Dh+t}var Oh=!1;function Ph(t,e){if(!t||Oh)return"";Oh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{Oh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?El(t):""}function aR(t){switch(t.tag){case 5:return El(t.type);case 16:return El("Lazy");case 13:return El("Suspense");case 19:return El("SuspenseList");case 0:case 2:case 15:return t=Ph(t.type,!1),t;case 11:return t=Ph(t.type.render,!1),t;case 1:return t=Ph(t.type,!0),t;default:return""}}function dm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ls:return"Fragment";case Is:return"Portal";case cm:return"Profiler";case Sy:return"StrictMode";case um:return"Suspense";case fm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case jC:return(t.displayName||"Context")+".Consumer";case FC:return(t._context.displayName||"Context")+".Provider";case ky:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cy:return e=t.displayName||null,e!==null?e:dm(t.type)||"Memo";case Fr:e=t._payload,t=t._init;try{return dm(t(e))}catch{}}return null}function cR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dm(e);case 8:return e===Sy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function UC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uR(t){var e=UC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nc(t){t._valueTracker||(t._valueTracker=uR(t))}function WC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=UC(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Yu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hm(t,e){var n=e.checked;return Oe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function gw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=mi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function KC(t,e){e=e.checked,e!=null&&xy(t,"checked",e,!1)}function pm(t,e){KC(t,e);var n=mi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?mm(t,e.type,n):e.hasOwnProperty("defaultValue")&&mm(t,e.type,mi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function yw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function mm(t,e,n){(e!=="number"||Yu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var bl=Array.isArray;function no(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+mi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function gm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(j(91));return Oe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function vw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(j(92));if(bl(n)){if(1<n.length)throw Error(j(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:mi(n)}}function qC(t,e){var n=mi(e.value),r=mi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ww(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function YC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ym(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?YC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var _c,XC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(_c=_c||document.createElement("div"),_c.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_c.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function sa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Vl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fR=["Webkit","ms","Moz","O"];Object.keys(Vl).forEach(function(t){fR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vl[e]=Vl[t]})});function GC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Vl.hasOwnProperty(t)&&Vl[t]?(""+e).trim():e+"px"}function JC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=GC(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var dR=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vm(t,e){if(e){if(dR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(j(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(j(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(j(61))}if(e.style!=null&&typeof e.style!="object")throw Error(j(62))}}function wm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xm=null;function Ey(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sm=null,ro=null,io=null;function xw(t){if(t=ic(t)){if(typeof Sm!="function")throw Error(j(280));var e=t.stateNode;e&&(e=vd(e),Sm(t.stateNode,t.type,e))}}function QC(t){ro?io?io.push(t):io=[t]:ro=t}function ZC(){if(ro){var t=ro,e=io;if(io=ro=null,xw(t),e)for(t=0;t<e.length;t++)xw(e[t])}}function eE(t,e){return t(e)}function tE(){}var Rh=!1;function nE(t,e,n){if(Rh)return t(e,n);Rh=!0;try{return eE(t,e,n)}finally{Rh=!1,(ro!==null||io!==null)&&(tE(),ZC())}}function oa(t,e){var n=t.stateNode;if(n===null)return null;var r=vd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(j(231,e,typeof n));return n}var km=!1;if(Er)try{var fl={};Object.defineProperty(fl,"passive",{get:function(){km=!0}}),window.addEventListener("test",fl,fl),window.removeEventListener("test",fl,fl)}catch{km=!1}function hR(t,e,n,r,i,s,o,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Bl=!1,Xu=null,Gu=!1,Cm=null,pR={onError:function(t){Bl=!0,Xu=t}};function mR(t,e,n,r,i,s,o,l,a){Bl=!1,Xu=null,hR.apply(pR,arguments)}function gR(t,e,n,r,i,s,o,l,a){if(mR.apply(this,arguments),Bl){if(Bl){var c=Xu;Bl=!1,Xu=null}else throw Error(j(198));Gu||(Gu=!0,Cm=c)}}function ks(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function rE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sw(t){if(ks(t)!==t)throw Error(j(188))}function yR(t){var e=t.alternate;if(!e){if(e=ks(t),e===null)throw Error(j(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Sw(i),t;if(s===r)return Sw(i),e;s=s.sibling}throw Error(j(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(j(189))}}if(n.alternate!==r)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?t:e}function iE(t){return t=yR(t),t!==null?sE(t):null}function sE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=sE(t);if(e!==null)return e;t=t.sibling}return null}var oE=Zt.unstable_scheduleCallback,kw=Zt.unstable_cancelCallback,vR=Zt.unstable_shouldYield,wR=Zt.unstable_requestPaint,Ve=Zt.unstable_now,xR=Zt.unstable_getCurrentPriorityLevel,by=Zt.unstable_ImmediatePriority,lE=Zt.unstable_UserBlockingPriority,Ju=Zt.unstable_NormalPriority,SR=Zt.unstable_LowPriority,aE=Zt.unstable_IdlePriority,pd=null,Kn=null;function kR(t){if(Kn&&typeof Kn.onCommitFiberRoot=="function")try{Kn.onCommitFiberRoot(pd,t,void 0,(t.current.flags&128)===128)}catch{}}var On=Math.clz32?Math.clz32:bR,CR=Math.log,ER=Math.LN2;function bR(t){return t>>>=0,t===0?32:31-(CR(t)/ER|0)|0}var Ac=64,Dc=4194304;function Tl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Tl(l):(s&=o,s!==0&&(r=Tl(s)))}else o=n&~i,o!==0?r=Tl(o):s!==0&&(r=Tl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-On(e),i=1<<n,r|=t[n],e&=~i;return r}function TR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MR(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-On(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=TR(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function Em(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function cE(){var t=Ac;return Ac<<=1,!(Ac&4194240)&&(Ac=64),t}function Ih(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function nc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-On(e),t[e]=n}function NR(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-On(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Ty(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-On(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ve=0;function uE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fE,My,dE,hE,pE,bm=!1,Oc=[],ti=null,ni=null,ri=null,la=new Map,aa=new Map,Wr=[],_R="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cw(t,e){switch(t){case"focusin":case"focusout":ti=null;break;case"dragenter":case"dragleave":ni=null;break;case"mouseover":case"mouseout":ri=null;break;case"pointerover":case"pointerout":la.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":aa.delete(e.pointerId)}}function dl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ic(e),e!==null&&My(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function AR(t,e,n,r,i){switch(e){case"focusin":return ti=dl(ti,t,e,n,r,i),!0;case"dragenter":return ni=dl(ni,t,e,n,r,i),!0;case"mouseover":return ri=dl(ri,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return la.set(s,dl(la.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,aa.set(s,dl(aa.get(s)||null,t,e,n,r,i)),!0}return!1}function mE(t){var e=zi(t.target);if(e!==null){var n=ks(e);if(n!==null){if(e=n.tag,e===13){if(e=rE(n),e!==null){t.blockedOn=e,pE(t.priority,function(){dE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Tm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);xm=r,n.target.dispatchEvent(r),xm=null}else return e=ic(n),e!==null&&My(e),t.blockedOn=n,!1;e.shift()}return!0}function Ew(t,e,n){yu(t)&&n.delete(e)}function DR(){bm=!1,ti!==null&&yu(ti)&&(ti=null),ni!==null&&yu(ni)&&(ni=null),ri!==null&&yu(ri)&&(ri=null),la.forEach(Ew),aa.forEach(Ew)}function hl(t,e){t.blockedOn===e&&(t.blockedOn=null,bm||(bm=!0,Zt.unstable_scheduleCallback(Zt.unstable_NormalPriority,DR)))}function ca(t){function e(i){return hl(i,t)}if(0<Oc.length){hl(Oc[0],t);for(var n=1;n<Oc.length;n++){var r=Oc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ti!==null&&hl(ti,t),ni!==null&&hl(ni,t),ri!==null&&hl(ri,t),la.forEach(e),aa.forEach(e),n=0;n<Wr.length;n++)r=Wr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Wr.length&&(n=Wr[0],n.blockedOn===null);)mE(n),n.blockedOn===null&&Wr.shift()}var so=Ar.ReactCurrentBatchConfig,Zu=!0;function OR(t,e,n,r){var i=ve,s=so.transition;so.transition=null;try{ve=1,Ny(t,e,n,r)}finally{ve=i,so.transition=s}}function PR(t,e,n,r){var i=ve,s=so.transition;so.transition=null;try{ve=4,Ny(t,e,n,r)}finally{ve=i,so.transition=s}}function Ny(t,e,n,r){if(Zu){var i=Tm(t,e,n,r);if(i===null)Wh(t,e,r,ef,n),Cw(t,r);else if(AR(i,t,e,n,r))r.stopPropagation();else if(Cw(t,r),e&4&&-1<_R.indexOf(t)){for(;i!==null;){var s=ic(i);if(s!==null&&fE(s),s=Tm(t,e,n,r),s===null&&Wh(t,e,r,ef,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Wh(t,e,r,null,n)}}var ef=null;function Tm(t,e,n,r){if(ef=null,t=Ey(r),t=zi(t),t!==null)if(e=ks(t),e===null)t=null;else if(n=e.tag,n===13){if(t=rE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ef=t,null}function gE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xR()){case by:return 1;case lE:return 4;case Ju:case SR:return 16;case aE:return 536870912;default:return 16}default:return 16}}var Xr=null,_y=null,vu=null;function yE(){if(vu)return vu;var t,e=_y,n=e.length,r,i="value"in Xr?Xr.value:Xr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return vu=i.slice(t,1<r?1-r:void 0)}function wu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Pc(){return!0}function bw(){return!1}function rn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Pc:bw,this.isPropagationStopped=bw,this}return Oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pc)},persist:function(){},isPersistent:Pc}),e}var Go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ay=rn(Go),rc=Oe({},Go,{view:0,detail:0}),RR=rn(rc),Lh,Vh,pl,md=Oe({},rc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pl&&(pl&&t.type==="mousemove"?(Lh=t.screenX-pl.screenX,Vh=t.screenY-pl.screenY):Vh=Lh=0,pl=t),Lh)},movementY:function(t){return"movementY"in t?t.movementY:Vh}}),Tw=rn(md),IR=Oe({},md,{dataTransfer:0}),LR=rn(IR),VR=Oe({},rc,{relatedTarget:0}),Bh=rn(VR),BR=Oe({},Go,{animationName:0,elapsedTime:0,pseudoElement:0}),zR=rn(BR),$R=Oe({},Go,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),FR=rn($R),jR=Oe({},Go,{data:0}),Mw=rn(jR),HR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function KR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=WR[t])?!!e[t]:!1}function Dy(){return KR}var qR=Oe({},rc,{key:function(t){if(t.key){var e=HR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?UR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dy,charCode:function(t){return t.type==="keypress"?wu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),YR=rn(qR),XR=Oe({},md,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nw=rn(XR),GR=Oe({},rc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dy}),JR=rn(GR),QR=Oe({},Go,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZR=rn(QR),eI=Oe({},md,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tI=rn(eI),nI=[9,13,27,32],Oy=Er&&"CompositionEvent"in window,zl=null;Er&&"documentMode"in document&&(zl=document.documentMode);var rI=Er&&"TextEvent"in window&&!zl,vE=Er&&(!Oy||zl&&8<zl&&11>=zl),_w=" ",Aw=!1;function wE(t,e){switch(t){case"keyup":return nI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vs=!1;function iI(t,e){switch(t){case"compositionend":return xE(e);case"keypress":return e.which!==32?null:(Aw=!0,_w);case"textInput":return t=e.data,t===_w&&Aw?null:t;default:return null}}function sI(t,e){if(Vs)return t==="compositionend"||!Oy&&wE(t,e)?(t=yE(),vu=_y=Xr=null,Vs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return vE&&e.locale!=="ko"?null:e.data;default:return null}}var oI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!oI[t.type]:e==="textarea"}function SE(t,e,n,r){QC(r),e=tf(e,"onChange"),0<e.length&&(n=new Ay("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var $l=null,ua=null;function lI(t){OE(t,0)}function gd(t){var e=$s(t);if(WC(e))return t}function aI(t,e){if(t==="change")return e}var kE=!1;if(Er){var zh;if(Er){var $h="oninput"in document;if(!$h){var Ow=document.createElement("div");Ow.setAttribute("oninput","return;"),$h=typeof Ow.oninput=="function"}zh=$h}else zh=!1;kE=zh&&(!document.documentMode||9<document.documentMode)}function Pw(){$l&&($l.detachEvent("onpropertychange",CE),ua=$l=null)}function CE(t){if(t.propertyName==="value"&&gd(ua)){var e=[];SE(e,ua,t,Ey(t)),nE(lI,e)}}function cI(t,e,n){t==="focusin"?(Pw(),$l=e,ua=n,$l.attachEvent("onpropertychange",CE)):t==="focusout"&&Pw()}function uI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gd(ua)}function fI(t,e){if(t==="click")return gd(e)}function dI(t,e){if(t==="input"||t==="change")return gd(e)}function hI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ln=typeof Object.is=="function"?Object.is:hI;function fa(t,e){if(Ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!am.call(e,i)||!Ln(t[i],e[i]))return!1}return!0}function Rw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Iw(t,e){var n=Rw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Rw(n)}}function EE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?EE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function bE(){for(var t=window,e=Yu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Yu(t.document)}return e}function Py(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pI(t){var e=bE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&EE(n.ownerDocument.documentElement,n)){if(r!==null&&Py(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Iw(n,s);var o=Iw(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mI=Er&&"documentMode"in document&&11>=document.documentMode,Bs=null,Mm=null,Fl=null,Nm=!1;function Lw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Nm||Bs==null||Bs!==Yu(r)||(r=Bs,"selectionStart"in r&&Py(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fl&&fa(Fl,r)||(Fl=r,r=tf(Mm,"onSelect"),0<r.length&&(e=new Ay("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Bs)))}function Rc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var zs={animationend:Rc("Animation","AnimationEnd"),animationiteration:Rc("Animation","AnimationIteration"),animationstart:Rc("Animation","AnimationStart"),transitionend:Rc("Transition","TransitionEnd")},Fh={},TE={};Er&&(TE=document.createElement("div").style,"AnimationEvent"in window||(delete zs.animationend.animation,delete zs.animationiteration.animation,delete zs.animationstart.animation),"TransitionEvent"in window||delete zs.transitionend.transition);function yd(t){if(Fh[t])return Fh[t];if(!zs[t])return t;var e=zs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in TE)return Fh[t]=e[n];return t}var ME=yd("animationend"),NE=yd("animationiteration"),_E=yd("animationstart"),AE=yd("transitionend"),DE=new Map,Vw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ki(t,e){DE.set(t,e),Ss(e,[t])}for(var jh=0;jh<Vw.length;jh++){var Hh=Vw[jh],gI=Hh.toLowerCase(),yI=Hh[0].toUpperCase()+Hh.slice(1);ki(gI,"on"+yI)}ki(ME,"onAnimationEnd");ki(NE,"onAnimationIteration");ki(_E,"onAnimationStart");ki("dblclick","onDoubleClick");ki("focusin","onFocus");ki("focusout","onBlur");ki(AE,"onTransitionEnd");vo("onMouseEnter",["mouseout","mouseover"]);vo("onMouseLeave",["mouseout","mouseover"]);vo("onPointerEnter",["pointerout","pointerover"]);vo("onPointerLeave",["pointerout","pointerover"]);Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ml));function Bw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,gR(r,e,void 0,t),t.currentTarget=null}function OE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;Bw(i,l,c),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,c=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;Bw(i,l,c),s=a}}}if(Gu)throw t=Cm,Gu=!1,Cm=null,t}function Ce(t,e){var n=e[Pm];n===void 0&&(n=e[Pm]=new Set);var r=t+"__bubble";n.has(r)||(PE(e,t,2,!1),n.add(r))}function Uh(t,e,n){var r=0;e&&(r|=4),PE(n,t,r,e)}var Ic="_reactListening"+Math.random().toString(36).slice(2);function da(t){if(!t[Ic]){t[Ic]=!0,$C.forEach(function(n){n!=="selectionchange"&&(vI.has(n)||Uh(n,!1,t),Uh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ic]||(e[Ic]=!0,Uh("selectionchange",!1,e))}}function PE(t,e,n,r){switch(gE(e)){case 1:var i=OR;break;case 4:i=PR;break;default:i=Ny}n=i.bind(null,e,n,t),i=void 0,!km||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Wh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=zi(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}nE(function(){var c=s,u=Ey(n),f=[];e:{var d=DE.get(t);if(d!==void 0){var h=Ay,p=t;switch(t){case"keypress":if(wu(n)===0)break e;case"keydown":case"keyup":h=YR;break;case"focusin":p="focus",h=Bh;break;case"focusout":p="blur",h=Bh;break;case"beforeblur":case"afterblur":h=Bh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Tw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=LR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=JR;break;case ME:case NE:case _E:h=zR;break;case AE:h=ZR;break;case"scroll":h=RR;break;case"wheel":h=tI;break;case"copy":case"cut":case"paste":h=FR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Nw}var m=(e&4)!==0,v=!m&&t==="scroll",g=m?d!==null?d+"Capture":null:d;m=[];for(var w=c,y;w!==null;){y=w;var x=y.stateNode;if(y.tag===5&&x!==null&&(y=x,g!==null&&(x=oa(w,g),x!=null&&m.push(ha(w,x,y)))),v)break;w=w.return}0<m.length&&(d=new h(d,p,null,n,u),f.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",d&&n!==xm&&(p=n.relatedTarget||n.fromElement)&&(zi(p)||p[br]))break e;if((h||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?zi(p):null,p!==null&&(v=ks(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(m=Tw,x="onMouseLeave",g="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(m=Nw,x="onPointerLeave",g="onPointerEnter",w="pointer"),v=h==null?d:$s(h),y=p==null?d:$s(p),d=new m(x,w+"leave",h,n,u),d.target=v,d.relatedTarget=y,x=null,zi(u)===c&&(m=new m(g,w+"enter",p,n,u),m.target=y,m.relatedTarget=v,x=m),v=x,h&&p)t:{for(m=h,g=p,w=0,y=m;y;y=Ms(y))w++;for(y=0,x=g;x;x=Ms(x))y++;for(;0<w-y;)m=Ms(m),w--;for(;0<y-w;)g=Ms(g),y--;for(;w--;){if(m===g||g!==null&&m===g.alternate)break t;m=Ms(m),g=Ms(g)}m=null}else m=null;h!==null&&zw(f,d,h,m,!1),p!==null&&v!==null&&zw(f,v,p,m,!0)}}e:{if(d=c?$s(c):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var S=aI;else if(Dw(d))if(kE)S=dI;else{S=uI;var C=cI}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=fI);if(S&&(S=S(t,c))){SE(f,S,n,u);break e}C&&C(t,d,c),t==="focusout"&&(C=d._wrapperState)&&C.controlled&&d.type==="number"&&mm(d,"number",d.value)}switch(C=c?$s(c):window,t){case"focusin":(Dw(C)||C.contentEditable==="true")&&(Bs=C,Mm=c,Fl=null);break;case"focusout":Fl=Mm=Bs=null;break;case"mousedown":Nm=!0;break;case"contextmenu":case"mouseup":case"dragend":Nm=!1,Lw(f,n,u);break;case"selectionchange":if(mI)break;case"keydown":case"keyup":Lw(f,n,u)}var k;if(Oy)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Vs?wE(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(vE&&n.locale!=="ko"&&(Vs||E!=="onCompositionStart"?E==="onCompositionEnd"&&Vs&&(k=yE()):(Xr=u,_y="value"in Xr?Xr.value:Xr.textContent,Vs=!0)),C=tf(c,E),0<C.length&&(E=new Mw(E,t,null,n,u),f.push({event:E,listeners:C}),k?E.data=k:(k=xE(n),k!==null&&(E.data=k)))),(k=rI?iI(t,n):sI(t,n))&&(c=tf(c,"onBeforeInput"),0<c.length&&(u=new Mw("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=k))}OE(f,e)})}function ha(t,e,n){return{instance:t,listener:e,currentTarget:n}}function tf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=oa(t,n),s!=null&&r.unshift(ha(t,s,i)),s=oa(t,e),s!=null&&r.push(ha(t,s,i))),t=t.return}return r}function Ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function zw(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,i?(a=oa(n,s),a!=null&&o.unshift(ha(n,a,l))):i||(a=oa(n,s),a!=null&&o.push(ha(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var wI=/\r\n?/g,xI=/\u0000|\uFFFD/g;function $w(t){return(typeof t=="string"?t:""+t).replace(wI,`
`).replace(xI,"")}function Lc(t,e,n){if(e=$w(e),$w(t)!==e&&n)throw Error(j(425))}function nf(){}var _m=null,Am=null;function Dm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Om=typeof setTimeout=="function"?setTimeout:void 0,SI=typeof clearTimeout=="function"?clearTimeout:void 0,Fw=typeof Promise=="function"?Promise:void 0,kI=typeof queueMicrotask=="function"?queueMicrotask:typeof Fw<"u"?function(t){return Fw.resolve(null).then(t).catch(CI)}:Om;function CI(t){setTimeout(function(){throw t})}function Kh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ca(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ca(e)}function ii(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Jo=Math.random().toString(36).slice(2),Hn="__reactFiber$"+Jo,pa="__reactProps$"+Jo,br="__reactContainer$"+Jo,Pm="__reactEvents$"+Jo,EI="__reactListeners$"+Jo,bI="__reactHandles$"+Jo;function zi(t){var e=t[Hn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[br]||n[Hn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=jw(t);t!==null;){if(n=t[Hn])return n;t=jw(t)}return e}t=n,n=t.parentNode}return null}function ic(t){return t=t[Hn]||t[br],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $s(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(j(33))}function vd(t){return t[pa]||null}var Rm=[],Fs=-1;function Ci(t){return{current:t}}function Ee(t){0>Fs||(t.current=Rm[Fs],Rm[Fs]=null,Fs--)}function Se(t,e){Fs++,Rm[Fs]=t.current,t.current=e}var gi={},St=Ci(gi),Bt=Ci(!1),is=gi;function wo(t,e){var n=t.type.contextTypes;if(!n)return gi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function zt(t){return t=t.childContextTypes,t!=null}function rf(){Ee(Bt),Ee(St)}function Hw(t,e,n){if(St.current!==gi)throw Error(j(168));Se(St,e),Se(Bt,n)}function RE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(j(108,cR(t)||"Unknown",i));return Oe({},n,r)}function sf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||gi,is=St.current,Se(St,t),Se(Bt,Bt.current),!0}function Uw(t,e,n){var r=t.stateNode;if(!r)throw Error(j(169));n?(t=RE(t,e,is),r.__reactInternalMemoizedMergedChildContext=t,Ee(Bt),Ee(St),Se(St,t)):Ee(Bt),Se(Bt,n)}var hr=null,wd=!1,qh=!1;function IE(t){hr===null?hr=[t]:hr.push(t)}function TI(t){wd=!0,IE(t)}function Ei(){if(!qh&&hr!==null){qh=!0;var t=0,e=ve;try{var n=hr;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hr=null,wd=!1}catch(i){throw hr!==null&&(hr=hr.slice(t+1)),oE(by,Ei),i}finally{ve=e,qh=!1}}return null}var js=[],Hs=0,of=null,lf=0,an=[],cn=0,ss=null,pr=1,mr="";function Oi(t,e){js[Hs++]=lf,js[Hs++]=of,of=t,lf=e}function LE(t,e,n){an[cn++]=pr,an[cn++]=mr,an[cn++]=ss,ss=t;var r=pr;t=mr;var i=32-On(r)-1;r&=~(1<<i),n+=1;var s=32-On(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,pr=1<<32-On(e)+i|n<<i|r,mr=s+t}else pr=1<<s|n<<i|r,mr=t}function Ry(t){t.return!==null&&(Oi(t,1),LE(t,1,0))}function Iy(t){for(;t===of;)of=js[--Hs],js[Hs]=null,lf=js[--Hs],js[Hs]=null;for(;t===ss;)ss=an[--cn],an[cn]=null,mr=an[--cn],an[cn]=null,pr=an[--cn],an[cn]=null}var Xt=null,qt=null,Te=!1,Tn=null;function VE(t,e){var n=hn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ww(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xt=t,qt=ii(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xt=t,qt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ss!==null?{id:pr,overflow:mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=hn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xt=t,qt=null,!0):!1;default:return!1}}function Im(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Lm(t){if(Te){var e=qt;if(e){var n=e;if(!Ww(t,e)){if(Im(t))throw Error(j(418));e=ii(n.nextSibling);var r=Xt;e&&Ww(t,e)?VE(r,n):(t.flags=t.flags&-4097|2,Te=!1,Xt=t)}}else{if(Im(t))throw Error(j(418));t.flags=t.flags&-4097|2,Te=!1,Xt=t}}}function Kw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xt=t}function Vc(t){if(t!==Xt)return!1;if(!Te)return Kw(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Dm(t.type,t.memoizedProps)),e&&(e=qt)){if(Im(t))throw BE(),Error(j(418));for(;e;)VE(t,e),e=ii(e.nextSibling)}if(Kw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){qt=ii(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}qt=null}}else qt=Xt?ii(t.stateNode.nextSibling):null;return!0}function BE(){for(var t=qt;t;)t=ii(t.nextSibling)}function xo(){qt=Xt=null,Te=!1}function Ly(t){Tn===null?Tn=[t]:Tn.push(t)}var MI=Ar.ReactCurrentBatchConfig;function ml(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var r=n.stateNode}if(!r)throw Error(j(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,t))}return t}function Bc(t,e){throw t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function qw(t){var e=t._init;return e(t._payload)}function zE(t){function e(g,w){if(t){var y=g.deletions;y===null?(g.deletions=[w],g.flags|=16):y.push(w)}}function n(g,w){if(!t)return null;for(;w!==null;)e(g,w),w=w.sibling;return null}function r(g,w){for(g=new Map;w!==null;)w.key!==null?g.set(w.key,w):g.set(w.index,w),w=w.sibling;return g}function i(g,w){return g=ai(g,w),g.index=0,g.sibling=null,g}function s(g,w,y){return g.index=y,t?(y=g.alternate,y!==null?(y=y.index,y<w?(g.flags|=2,w):y):(g.flags|=2,w)):(g.flags|=1048576,w)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,w,y,x){return w===null||w.tag!==6?(w=ep(y,g.mode,x),w.return=g,w):(w=i(w,y),w.return=g,w)}function a(g,w,y,x){var S=y.type;return S===Ls?u(g,w,y.props.children,x,y.key):w!==null&&(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Fr&&qw(S)===w.type)?(x=i(w,y.props),x.ref=ml(g,w,y),x.return=g,x):(x=Tu(y.type,y.key,y.props,null,g.mode,x),x.ref=ml(g,w,y),x.return=g,x)}function c(g,w,y,x){return w===null||w.tag!==4||w.stateNode.containerInfo!==y.containerInfo||w.stateNode.implementation!==y.implementation?(w=tp(y,g.mode,x),w.return=g,w):(w=i(w,y.children||[]),w.return=g,w)}function u(g,w,y,x,S){return w===null||w.tag!==7?(w=Yi(y,g.mode,x,S),w.return=g,w):(w=i(w,y),w.return=g,w)}function f(g,w,y){if(typeof w=="string"&&w!==""||typeof w=="number")return w=ep(""+w,g.mode,y),w.return=g,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Mc:return y=Tu(w.type,w.key,w.props,null,g.mode,y),y.ref=ml(g,null,w),y.return=g,y;case Is:return w=tp(w,g.mode,y),w.return=g,w;case Fr:var x=w._init;return f(g,x(w._payload),y)}if(bl(w)||ul(w))return w=Yi(w,g.mode,y,null),w.return=g,w;Bc(g,w)}return null}function d(g,w,y,x){var S=w!==null?w.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return S!==null?null:l(g,w,""+y,x);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Mc:return y.key===S?a(g,w,y,x):null;case Is:return y.key===S?c(g,w,y,x):null;case Fr:return S=y._init,d(g,w,S(y._payload),x)}if(bl(y)||ul(y))return S!==null?null:u(g,w,y,x,null);Bc(g,y)}return null}function h(g,w,y,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return g=g.get(y)||null,l(w,g,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Mc:return g=g.get(x.key===null?y:x.key)||null,a(w,g,x,S);case Is:return g=g.get(x.key===null?y:x.key)||null,c(w,g,x,S);case Fr:var C=x._init;return h(g,w,y,C(x._payload),S)}if(bl(x)||ul(x))return g=g.get(y)||null,u(w,g,x,S,null);Bc(w,x)}return null}function p(g,w,y,x){for(var S=null,C=null,k=w,E=w=0,N=null;k!==null&&E<y.length;E++){k.index>E?(N=k,k=null):N=k.sibling;var I=d(g,k,y[E],x);if(I===null){k===null&&(k=N);break}t&&k&&I.alternate===null&&e(g,k),w=s(I,w,E),C===null?S=I:C.sibling=I,C=I,k=N}if(E===y.length)return n(g,k),Te&&Oi(g,E),S;if(k===null){for(;E<y.length;E++)k=f(g,y[E],x),k!==null&&(w=s(k,w,E),C===null?S=k:C.sibling=k,C=k);return Te&&Oi(g,E),S}for(k=r(g,k);E<y.length;E++)N=h(k,g,E,y[E],x),N!==null&&(t&&N.alternate!==null&&k.delete(N.key===null?E:N.key),w=s(N,w,E),C===null?S=N:C.sibling=N,C=N);return t&&k.forEach(function(O){return e(g,O)}),Te&&Oi(g,E),S}function m(g,w,y,x){var S=ul(y);if(typeof S!="function")throw Error(j(150));if(y=S.call(y),y==null)throw Error(j(151));for(var C=S=null,k=w,E=w=0,N=null,I=y.next();k!==null&&!I.done;E++,I=y.next()){k.index>E?(N=k,k=null):N=k.sibling;var O=d(g,k,I.value,x);if(O===null){k===null&&(k=N);break}t&&k&&O.alternate===null&&e(g,k),w=s(O,w,E),C===null?S=O:C.sibling=O,C=O,k=N}if(I.done)return n(g,k),Te&&Oi(g,E),S;if(k===null){for(;!I.done;E++,I=y.next())I=f(g,I.value,x),I!==null&&(w=s(I,w,E),C===null?S=I:C.sibling=I,C=I);return Te&&Oi(g,E),S}for(k=r(g,k);!I.done;E++,I=y.next())I=h(k,g,E,I.value,x),I!==null&&(t&&I.alternate!==null&&k.delete(I.key===null?E:I.key),w=s(I,w,E),C===null?S=I:C.sibling=I,C=I);return t&&k.forEach(function(L){return e(g,L)}),Te&&Oi(g,E),S}function v(g,w,y,x){if(typeof y=="object"&&y!==null&&y.type===Ls&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Mc:e:{for(var S=y.key,C=w;C!==null;){if(C.key===S){if(S=y.type,S===Ls){if(C.tag===7){n(g,C.sibling),w=i(C,y.props.children),w.return=g,g=w;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Fr&&qw(S)===C.type){n(g,C.sibling),w=i(C,y.props),w.ref=ml(g,C,y),w.return=g,g=w;break e}n(g,C);break}else e(g,C);C=C.sibling}y.type===Ls?(w=Yi(y.props.children,g.mode,x,y.key),w.return=g,g=w):(x=Tu(y.type,y.key,y.props,null,g.mode,x),x.ref=ml(g,w,y),x.return=g,g=x)}return o(g);case Is:e:{for(C=y.key;w!==null;){if(w.key===C)if(w.tag===4&&w.stateNode.containerInfo===y.containerInfo&&w.stateNode.implementation===y.implementation){n(g,w.sibling),w=i(w,y.children||[]),w.return=g,g=w;break e}else{n(g,w);break}else e(g,w);w=w.sibling}w=tp(y,g.mode,x),w.return=g,g=w}return o(g);case Fr:return C=y._init,v(g,w,C(y._payload),x)}if(bl(y))return p(g,w,y,x);if(ul(y))return m(g,w,y,x);Bc(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,w!==null&&w.tag===6?(n(g,w.sibling),w=i(w,y),w.return=g,g=w):(n(g,w),w=ep(y,g.mode,x),w.return=g,g=w),o(g)):n(g,w)}return v}var So=zE(!0),$E=zE(!1),af=Ci(null),cf=null,Us=null,Vy=null;function By(){Vy=Us=cf=null}function zy(t){var e=af.current;Ee(af),t._currentValue=e}function Vm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function oo(t,e){cf=t,Vy=Us=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Lt=!0),t.firstContext=null)}function yn(t){var e=t._currentValue;if(Vy!==t)if(t={context:t,memoizedValue:e,next:null},Us===null){if(cf===null)throw Error(j(308));Us=t,cf.dependencies={lanes:0,firstContext:t}}else Us=Us.next=t;return e}var $i=null;function $y(t){$i===null?$i=[t]:$i.push(t)}function FE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,$y(e)):(n.next=i.next,i.next=n),e.interleaved=n,Tr(t,r)}function Tr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var jr=!1;function Fy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function si(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Tr(t,n)}return i=r.interleaved,i===null?(e.next=e,$y(r)):(e.next=i.next,i.next=e),r.interleaved=e,Tr(t,n)}function xu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ty(t,n)}}function Yw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function uf(t,e,n,r){var i=t.updateQueue;jr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,c=a.next;a.next=null,o===null?s=c:o.next=c,o=a;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=a))}if(s!==null){var f=i.baseState;o=0,u=c=a=null,l=s;do{var d=l.lane,h=l.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,m=l;switch(d=e,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Oe({},f,d);break e;case 2:jr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[l]:d.push(l))}else h={eventTime:h,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(c=u=h,a=f):u=u.next=h,o|=d;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;d=l,l=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(u===null&&(a=f),i.baseState=a,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);as|=o,t.lanes=o,t.memoizedState=f}}function Xw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(j(191,i));i.call(r)}}}var sc={},qn=Ci(sc),ma=Ci(sc),ga=Ci(sc);function Fi(t){if(t===sc)throw Error(j(174));return t}function jy(t,e){switch(Se(ga,e),Se(ma,t),Se(qn,sc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ym(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ym(e,t)}Ee(qn),Se(qn,e)}function ko(){Ee(qn),Ee(ma),Ee(ga)}function HE(t){Fi(ga.current);var e=Fi(qn.current),n=ym(e,t.type);e!==n&&(Se(ma,t),Se(qn,n))}function Hy(t){ma.current===t&&(Ee(qn),Ee(ma))}var _e=Ci(0);function ff(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yh=[];function Uy(){for(var t=0;t<Yh.length;t++)Yh[t]._workInProgressVersionPrimary=null;Yh.length=0}var Su=Ar.ReactCurrentDispatcher,Xh=Ar.ReactCurrentBatchConfig,ls=0,De=null,Ue=null,Xe=null,df=!1,jl=!1,ya=0,NI=0;function pt(){throw Error(j(321))}function Wy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ln(t[n],e[n]))return!1;return!0}function Ky(t,e,n,r,i,s){if(ls=s,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Su.current=t===null||t.memoizedState===null?OI:PI,t=n(r,i),jl){s=0;do{if(jl=!1,ya=0,25<=s)throw Error(j(301));s+=1,Xe=Ue=null,e.updateQueue=null,Su.current=RI,t=n(r,i)}while(jl)}if(Su.current=hf,e=Ue!==null&&Ue.next!==null,ls=0,Xe=Ue=De=null,df=!1,e)throw Error(j(300));return t}function qy(){var t=ya!==0;return ya=0,t}function Fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?De.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function vn(){if(Ue===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=Ue.next;var e=Xe===null?De.memoizedState:Xe.next;if(e!==null)Xe=e,Ue=t;else{if(t===null)throw Error(j(310));Ue=t,t={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Xe===null?De.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function va(t,e){return typeof e=="function"?e(t):e}function Gh(t){var e=vn(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=Ue,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,c=s;do{var u=c.lane;if((ls&u)===u)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=f,o=r):a=a.next=f,De.lanes|=u,as|=u}c=c.next}while(c!==null&&c!==s);a===null?o=r:a.next=l,Ln(r,e.memoizedState)||(Lt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,De.lanes|=s,as|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Jh(t){var e=vn(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ln(s,e.memoizedState)||(Lt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function UE(){}function WE(t,e){var n=De,r=vn(),i=e(),s=!Ln(r.memoizedState,i);if(s&&(r.memoizedState=i,Lt=!0),r=r.queue,Yy(YE.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,wa(9,qE.bind(null,n,r,i,e),void 0,null),Ze===null)throw Error(j(349));ls&30||KE(n,e,i)}return i}function KE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function qE(t,e,n,r){e.value=n,e.getSnapshot=r,XE(e)&&GE(t)}function YE(t,e,n){return n(function(){XE(e)&&GE(t)})}function XE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ln(t,n)}catch{return!0}}function GE(t){var e=Tr(t,1);e!==null&&Pn(e,t,1,-1)}function Gw(t){var e=Fn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:t},e.queue=t,t=t.dispatch=DI.bind(null,De,t),[e.memoizedState,t]}function wa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function JE(){return vn().memoizedState}function ku(t,e,n,r){var i=Fn();De.flags|=t,i.memoizedState=wa(1|e,n,void 0,r===void 0?null:r)}function xd(t,e,n,r){var i=vn();r=r===void 0?null:r;var s=void 0;if(Ue!==null){var o=Ue.memoizedState;if(s=o.destroy,r!==null&&Wy(r,o.deps)){i.memoizedState=wa(e,n,s,r);return}}De.flags|=t,i.memoizedState=wa(1|e,n,s,r)}function Jw(t,e){return ku(8390656,8,t,e)}function Yy(t,e){return xd(2048,8,t,e)}function QE(t,e){return xd(4,2,t,e)}function ZE(t,e){return xd(4,4,t,e)}function eb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function tb(t,e,n){return n=n!=null?n.concat([t]):null,xd(4,4,eb.bind(null,e,t),n)}function Xy(){}function nb(t,e){var n=vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function rb(t,e){var n=vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ib(t,e,n){return ls&21?(Ln(n,e)||(n=cE(),De.lanes|=n,as|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Lt=!0),t.memoizedState=n)}function _I(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=Xh.transition;Xh.transition={};try{t(!1),e()}finally{ve=n,Xh.transition=r}}function sb(){return vn().memoizedState}function AI(t,e,n){var r=li(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ob(t))lb(e,n);else if(n=FE(t,e,n,r),n!==null){var i=Nt();Pn(n,t,r,i),ab(n,e,r)}}function DI(t,e,n){var r=li(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ob(t))lb(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Ln(l,o)){var a=e.interleaved;a===null?(i.next=i,$y(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=FE(t,e,i,r),n!==null&&(i=Nt(),Pn(n,t,r,i),ab(n,e,r))}}function ob(t){var e=t.alternate;return t===De||e!==null&&e===De}function lb(t,e){jl=df=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ab(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ty(t,n)}}var hf={readContext:yn,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},OI={readContext:yn,useCallback:function(t,e){return Fn().memoizedState=[t,e===void 0?null:e],t},useContext:yn,useEffect:Jw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ku(4194308,4,eb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ku(4194308,4,t,e)},useInsertionEffect:function(t,e){return ku(4,2,t,e)},useMemo:function(t,e){var n=Fn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Fn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=AI.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=Fn();return t={current:t},e.memoizedState=t},useState:Gw,useDebugValue:Xy,useDeferredValue:function(t){return Fn().memoizedState=t},useTransition:function(){var t=Gw(!1),e=t[0];return t=_I.bind(null,t[1]),Fn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,i=Fn();if(Te){if(n===void 0)throw Error(j(407));n=n()}else{if(n=e(),Ze===null)throw Error(j(349));ls&30||KE(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Jw(YE.bind(null,r,s,t),[t]),r.flags|=2048,wa(9,qE.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Fn(),e=Ze.identifierPrefix;if(Te){var n=mr,r=pr;n=(r&~(1<<32-On(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ya++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=NI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},PI={readContext:yn,useCallback:nb,useContext:yn,useEffect:Yy,useImperativeHandle:tb,useInsertionEffect:QE,useLayoutEffect:ZE,useMemo:rb,useReducer:Gh,useRef:JE,useState:function(){return Gh(va)},useDebugValue:Xy,useDeferredValue:function(t){var e=vn();return ib(e,Ue.memoizedState,t)},useTransition:function(){var t=Gh(va)[0],e=vn().memoizedState;return[t,e]},useMutableSource:UE,useSyncExternalStore:WE,useId:sb,unstable_isNewReconciler:!1},RI={readContext:yn,useCallback:nb,useContext:yn,useEffect:Yy,useImperativeHandle:tb,useInsertionEffect:QE,useLayoutEffect:ZE,useMemo:rb,useReducer:Jh,useRef:JE,useState:function(){return Jh(va)},useDebugValue:Xy,useDeferredValue:function(t){var e=vn();return Ue===null?e.memoizedState=t:ib(e,Ue.memoizedState,t)},useTransition:function(){var t=Jh(va)[0],e=vn().memoizedState;return[t,e]},useMutableSource:UE,useSyncExternalStore:WE,useId:sb,unstable_isNewReconciler:!1};function kn(t,e){if(t&&t.defaultProps){e=Oe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Bm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Oe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sd={isMounted:function(t){return(t=t._reactInternals)?ks(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Nt(),i=li(t),s=vr(r,i);s.payload=e,n!=null&&(s.callback=n),e=si(t,s,i),e!==null&&(Pn(e,t,i,r),xu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Nt(),i=li(t),s=vr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=si(t,s,i),e!==null&&(Pn(e,t,i,r),xu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Nt(),r=li(t),i=vr(n,r);i.tag=2,e!=null&&(i.callback=e),e=si(t,i,r),e!==null&&(Pn(e,t,r,n),xu(e,t,r))}};function Qw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!fa(n,r)||!fa(i,s):!0}function cb(t,e,n){var r=!1,i=gi,s=e.contextType;return typeof s=="object"&&s!==null?s=yn(s):(i=zt(e)?is:St.current,r=e.contextTypes,s=(r=r!=null)?wo(t,i):gi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Zw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Sd.enqueueReplaceState(e,e.state,null)}function zm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Fy(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=yn(s):(s=zt(e)?is:St.current,i.context=wo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Bm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Sd.enqueueReplaceState(i,i.state,null),uf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Co(t,e){try{var n="",r=e;do n+=aR(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Qh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function $m(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var II=typeof WeakMap=="function"?WeakMap:Map;function ub(t,e,n){n=vr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){mf||(mf=!0,Gm=r),$m(t,e)},n}function fb(t,e,n){n=vr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){$m(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){$m(t,e),typeof r!="function"&&(oi===null?oi=new Set([this]):oi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ex(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new II;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=XI.bind(null,t,e,n),e.then(t,t))}function tx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function nx(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vr(-1,1),e.tag=2,si(n,e,1))),n.lanes|=1),t)}var LI=Ar.ReactCurrentOwner,Lt=!1;function Mt(t,e,n,r){e.child=t===null?$E(e,null,n,r):So(e,t.child,n,r)}function rx(t,e,n,r,i){n=n.render;var s=e.ref;return oo(e,i),r=Ky(t,e,n,r,s,i),n=qy(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Mr(t,e,i)):(Te&&n&&Ry(e),e.flags|=1,Mt(t,e,r,i),e.child)}function ix(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!r0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,db(t,e,s,r,i)):(t=Tu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:fa,n(o,r)&&t.ref===e.ref)return Mr(t,e,i)}return e.flags|=1,t=ai(s,r),t.ref=e.ref,t.return=e,e.child=t}function db(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(fa(s,r)&&t.ref===e.ref)if(Lt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Lt=!0);else return e.lanes=t.lanes,Mr(t,e,i)}return Fm(t,e,n,r,i)}function hb(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(Ks,Ut),Ut|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Se(Ks,Ut),Ut|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Se(Ks,Ut),Ut|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Se(Ks,Ut),Ut|=r;return Mt(t,e,i,n),e.child}function pb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Fm(t,e,n,r,i){var s=zt(n)?is:St.current;return s=wo(e,s),oo(e,i),n=Ky(t,e,n,r,s,i),r=qy(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Mr(t,e,i)):(Te&&r&&Ry(e),e.flags|=1,Mt(t,e,n,i),e.child)}function sx(t,e,n,r,i){if(zt(n)){var s=!0;sf(e)}else s=!1;if(oo(e,i),e.stateNode===null)Cu(t,e),cb(e,n,r),zm(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=yn(c):(c=zt(n)?is:St.current,c=wo(e,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==c)&&Zw(e,o,r,c),jr=!1;var d=e.memoizedState;o.state=d,uf(e,r,o,i),a=e.memoizedState,l!==r||d!==a||Bt.current||jr?(typeof u=="function"&&(Bm(e,n,u,r),a=e.memoizedState),(l=jr||Qw(e,n,l,r,d,a,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,jE(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:kn(e.type,l),o.props=c,f=e.pendingProps,d=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=yn(a):(a=zt(n)?is:St.current,a=wo(e,a));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||d!==a)&&Zw(e,o,r,a),jr=!1,d=e.memoizedState,o.state=d,uf(e,r,o,i);var p=e.memoizedState;l!==f||d!==p||Bt.current||jr?(typeof h=="function"&&(Bm(e,n,h,r),p=e.memoizedState),(c=jr||Qw(e,n,c,r,d,p,a)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=a,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return jm(t,e,n,r,s,i)}function jm(t,e,n,r,i,s){pb(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Uw(e,n,!1),Mr(t,e,s);r=e.stateNode,LI.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=So(e,t.child,null,s),e.child=So(e,null,l,s)):Mt(t,e,l,s),e.memoizedState=r.state,i&&Uw(e,n,!0),e.child}function mb(t){var e=t.stateNode;e.pendingContext?Hw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Hw(t,e.context,!1),jy(t,e.containerInfo)}function ox(t,e,n,r,i){return xo(),Ly(i),e.flags|=256,Mt(t,e,n,r),e.child}var Hm={dehydrated:null,treeContext:null,retryLane:0};function Um(t){return{baseLanes:t,cachePool:null,transitions:null}}function gb(t,e,n){var r=e.pendingProps,i=_e.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Se(_e,i&1),t===null)return Lm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ed(o,r,0,null),t=Yi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Um(n),e.memoizedState=Hm,t):Gy(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return VI(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=ai(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=ai(l,s):(s=Yi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Um(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Hm,r}return s=t.child,t=s.sibling,r=ai(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Gy(t,e){return e=Ed({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zc(t,e,n,r){return r!==null&&Ly(r),So(e,t.child,null,n),t=Gy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function VI(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Qh(Error(j(422))),zc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ed({mode:"visible",children:r.children},i,0,null),s=Yi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&So(e,t.child,null,o),e.child.memoizedState=Um(o),e.memoizedState=Hm,s);if(!(e.mode&1))return zc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(j(419)),r=Qh(s,r,void 0),zc(t,e,o,r)}if(l=(o&t.childLanes)!==0,Lt||l){if(r=Ze,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Tr(t,i),Pn(r,t,i,-1))}return n0(),r=Qh(Error(j(421))),zc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=GI.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,qt=ii(i.nextSibling),Xt=e,Te=!0,Tn=null,t!==null&&(an[cn++]=pr,an[cn++]=mr,an[cn++]=ss,pr=t.id,mr=t.overflow,ss=e),e=Gy(e,r.children),e.flags|=4096,e)}function lx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Vm(t.return,e,n)}function Zh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function yb(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Mt(t,e,r.children,n),r=_e.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lx(t,n,e);else if(t.tag===19)lx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Se(_e,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ff(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Zh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ff(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Zh(e,!0,n,null,s);break;case"together":Zh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Cu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),as|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,n=ai(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ai(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function BI(t,e,n){switch(e.tag){case 3:mb(e),xo();break;case 5:HE(e);break;case 1:zt(e.type)&&sf(e);break;case 4:jy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Se(af,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Se(_e,_e.current&1),e.flags|=128,null):n&e.child.childLanes?gb(t,e,n):(Se(_e,_e.current&1),t=Mr(t,e,n),t!==null?t.sibling:null);Se(_e,_e.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return yb(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Se(_e,_e.current),r)break;return null;case 22:case 23:return e.lanes=0,hb(t,e,n)}return Mr(t,e,n)}var vb,Wm,wb,xb;vb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wm=function(){};wb=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Fi(qn.current);var s=null;switch(n){case"input":i=hm(t,i),r=hm(t,r),s=[];break;case"select":i=Oe({},i,{value:void 0}),r=Oe({},r,{value:void 0}),s=[];break;case"textarea":i=gm(t,i),r=gm(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=nf)}vm(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ia.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var a=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ia.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&Ce("scroll",t),s||l===a||(s=[])):(s=s||[]).push(c,a))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};xb=function(t,e,n,r){n!==r&&(e.flags|=4)};function gl(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function zI(t,e,n){var r=e.pendingProps;switch(Iy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return zt(e.type)&&rf(),mt(e),null;case 3:return r=e.stateNode,ko(),Ee(Bt),Ee(St),Uy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Vc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Tn!==null&&(Zm(Tn),Tn=null))),Wm(t,e),mt(e),null;case 5:Hy(e);var i=Fi(ga.current);if(n=e.type,t!==null&&e.stateNode!=null)wb(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(j(166));return mt(e),null}if(t=Fi(qn.current),Vc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Hn]=e,r[pa]=s,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(i=0;i<Ml.length;i++)Ce(Ml[i],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":gw(r,s),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ce("invalid",r);break;case"textarea":vw(r,s),Ce("invalid",r)}vm(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Lc(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Lc(r.textContent,l,t),i=["children",""+l]):ia.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ce("scroll",r)}switch(n){case"input":Nc(r),yw(r,s,!0);break;case"textarea":Nc(r),ww(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=nf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=YC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Hn]=e,t[pa]=r,vb(t,e,!1,!1),e.stateNode=t;e:{switch(o=wm(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),i=r;break;case"iframe":case"object":case"embed":Ce("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ml.length;i++)Ce(Ml[i],t);i=r;break;case"source":Ce("error",t),i=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),i=r;break;case"details":Ce("toggle",t),i=r;break;case"input":gw(t,r),i=hm(t,r),Ce("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Oe({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":vw(t,r),i=gm(t,r),Ce("invalid",t);break;default:i=r}vm(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?JC(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&XC(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&sa(t,a):typeof a=="number"&&sa(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ia.hasOwnProperty(s)?a!=null&&s==="onScroll"&&Ce("scroll",t):a!=null&&xy(t,s,a,o))}switch(n){case"input":Nc(t),yw(t,r,!1);break;case"textarea":Nc(t),ww(t);break;case"option":r.value!=null&&t.setAttribute("value",""+mi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?no(t,!!r.multiple,s,!1):r.defaultValue!=null&&no(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=nf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)xb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(j(166));if(n=Fi(ga.current),Fi(qn.current),Vc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Hn]=e,(s=r.nodeValue!==n)&&(t=Xt,t!==null))switch(t.tag){case 3:Lc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Lc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Hn]=e,e.stateNode=r}return mt(e),null;case 13:if(Ee(_e),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&qt!==null&&e.mode&1&&!(e.flags&128))BE(),xo(),e.flags|=98560,s=!1;else if(s=Vc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(j(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(j(317));s[Hn]=e}else xo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),s=!1}else Tn!==null&&(Zm(Tn),Tn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||_e.current&1?We===0&&(We=3):n0())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return ko(),Wm(t,e),t===null&&da(e.stateNode.containerInfo),mt(e),null;case 10:return zy(e.type._context),mt(e),null;case 17:return zt(e.type)&&rf(),mt(e),null;case 19:if(Ee(_e),s=e.memoizedState,s===null)return mt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)gl(s,!1);else{if(We!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ff(t),o!==null){for(e.flags|=128,gl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Se(_e,_e.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ve()>Eo&&(e.flags|=128,r=!0,gl(s,!1),e.lanes=4194304)}else{if(!r)if(t=ff(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),gl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Te)return mt(e),null}else 2*Ve()-s.renderingStartTime>Eo&&n!==1073741824&&(e.flags|=128,r=!0,gl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ve(),e.sibling=null,n=_e.current,Se(_e,r?n&1|2:n&1),e):(mt(e),null);case 22:case 23:return t0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ut&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error(j(156,e.tag))}function $I(t,e){switch(Iy(e),e.tag){case 1:return zt(e.type)&&rf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ko(),Ee(Bt),Ee(St),Uy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Hy(e),null;case 13:if(Ee(_e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));xo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(_e),null;case 4:return ko(),null;case 10:return zy(e.type._context),null;case 22:case 23:return t0(),null;case 24:return null;default:return null}}var $c=!1,vt=!1,FI=typeof WeakSet=="function"?WeakSet:Set,q=null;function Ws(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Re(t,e,r)}else n.current=null}function Km(t,e,n){try{n()}catch(r){Re(t,e,r)}}var ax=!1;function jI(t,e){if(_m=Zu,t=bE(),Py(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,c=0,u=0,f=t,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(l=o+i),f!==s||r!==0&&f.nodeType!==3||(a=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===t)break t;if(d===n&&++c===i&&(l=o),d===s&&++u===r&&(a=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Am={focusedElem:t,selectionRange:n},Zu=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,v=p.memoizedState,g=e.stateNode,w=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:kn(e.type,m),v);g.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(x){Re(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return p=ax,ax=!1,p}function Hl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Km(e,n,s)}i=i.next}while(i!==r)}}function kd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function qm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Sb(t){var e=t.alternate;e!==null&&(t.alternate=null,Sb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Hn],delete e[pa],delete e[Pm],delete e[EI],delete e[bI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function kb(t){return t.tag===5||t.tag===3||t.tag===4}function cx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||kb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ym(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=nf));else if(r!==4&&(t=t.child,t!==null))for(Ym(t,e,n),t=t.sibling;t!==null;)Ym(t,e,n),t=t.sibling}function Xm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Xm(t,e,n),t=t.sibling;t!==null;)Xm(t,e,n),t=t.sibling}var it=null,Cn=!1;function Ir(t,e,n){for(n=n.child;n!==null;)Cb(t,e,n),n=n.sibling}function Cb(t,e,n){if(Kn&&typeof Kn.onCommitFiberUnmount=="function")try{Kn.onCommitFiberUnmount(pd,n)}catch{}switch(n.tag){case 5:vt||Ws(n,e);case 6:var r=it,i=Cn;it=null,Ir(t,e,n),it=r,Cn=i,it!==null&&(Cn?(t=it,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):it.removeChild(n.stateNode));break;case 18:it!==null&&(Cn?(t=it,n=n.stateNode,t.nodeType===8?Kh(t.parentNode,n):t.nodeType===1&&Kh(t,n),ca(t)):Kh(it,n.stateNode));break;case 4:r=it,i=Cn,it=n.stateNode.containerInfo,Cn=!0,Ir(t,e,n),it=r,Cn=i;break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Km(n,e,o),i=i.next}while(i!==r)}Ir(t,e,n);break;case 1:if(!vt&&(Ws(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Re(n,e,l)}Ir(t,e,n);break;case 21:Ir(t,e,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,Ir(t,e,n),vt=r):Ir(t,e,n);break;default:Ir(t,e,n)}}function ux(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new FI),e.forEach(function(r){var i=JI.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function xn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:it=l.stateNode,Cn=!1;break e;case 3:it=l.stateNode.containerInfo,Cn=!0;break e;case 4:it=l.stateNode.containerInfo,Cn=!0;break e}l=l.return}if(it===null)throw Error(j(160));Cb(s,o,i),it=null,Cn=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(c){Re(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Eb(e,t),e=e.sibling}function Eb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xn(e,t),zn(t),r&4){try{Hl(3,t,t.return),kd(3,t)}catch(m){Re(t,t.return,m)}try{Hl(5,t,t.return)}catch(m){Re(t,t.return,m)}}break;case 1:xn(e,t),zn(t),r&512&&n!==null&&Ws(n,n.return);break;case 5:if(xn(e,t),zn(t),r&512&&n!==null&&Ws(n,n.return),t.flags&32){var i=t.stateNode;try{sa(i,"")}catch(m){Re(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&KC(i,s),wm(l,o);var c=wm(l,s);for(o=0;o<a.length;o+=2){var u=a[o],f=a[o+1];u==="style"?JC(i,f):u==="dangerouslySetInnerHTML"?XC(i,f):u==="children"?sa(i,f):xy(i,u,f,c)}switch(l){case"input":pm(i,s);break;case"textarea":qC(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?no(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?no(i,!!s.multiple,s.defaultValue,!0):no(i,!!s.multiple,s.multiple?[]:"",!1))}i[pa]=s}catch(m){Re(t,t.return,m)}}break;case 6:if(xn(e,t),zn(t),r&4){if(t.stateNode===null)throw Error(j(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){Re(t,t.return,m)}}break;case 3:if(xn(e,t),zn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ca(e.containerInfo)}catch(m){Re(t,t.return,m)}break;case 4:xn(e,t),zn(t);break;case 13:xn(e,t),zn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Zy=Ve())),r&4&&ux(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(c=vt)||u,xn(e,t),vt=c):xn(e,t),zn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(q=t,u=t.child;u!==null;){for(f=q=u;q!==null;){switch(d=q,h=d.child,d.tag){case 0:case 11:case 14:case 15:Hl(4,d,d.return);break;case 1:Ws(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Re(r,n,m)}}break;case 5:Ws(d,d.return);break;case 22:if(d.memoizedState!==null){dx(f);continue}}h!==null?(h.return=d,q=h):dx(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,a=f.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=GC("display",o))}catch(m){Re(t,t.return,m)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(m){Re(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:xn(e,t),zn(t),r&4&&ux(t);break;case 21:break;default:xn(e,t),zn(t)}}function zn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(kb(n)){var r=n;break e}n=n.return}throw Error(j(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(sa(i,""),r.flags&=-33);var s=cx(t);Xm(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=cx(t);Ym(t,l,o);break;default:throw Error(j(161))}}catch(a){Re(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function HI(t,e,n){q=t,bb(t)}function bb(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var i=q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||$c;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||vt;l=$c;var c=vt;if($c=o,(vt=a)&&!c)for(q=i;q!==null;)o=q,a=o.child,o.tag===22&&o.memoizedState!==null?hx(i):a!==null?(a.return=o,q=a):hx(i);for(;s!==null;)q=s,bb(s),s=s.sibling;q=i,$c=l,vt=c}fx(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,q=s):fx(t)}}function fx(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||kd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:kn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Xw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Xw(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&ca(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}vt||e.flags&512&&qm(e)}catch(d){Re(e,e.return,d)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function dx(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function hx(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{kd(4,e)}catch(a){Re(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){Re(e,i,a)}}var s=e.return;try{qm(e)}catch(a){Re(e,s,a)}break;case 5:var o=e.return;try{qm(e)}catch(a){Re(e,o,a)}}}catch(a){Re(e,e.return,a)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var UI=Math.ceil,pf=Ar.ReactCurrentDispatcher,Jy=Ar.ReactCurrentOwner,pn=Ar.ReactCurrentBatchConfig,me=0,Ze=null,ze=null,ut=0,Ut=0,Ks=Ci(0),We=0,xa=null,as=0,Cd=0,Qy=0,Ul=null,It=null,Zy=0,Eo=1/0,fr=null,mf=!1,Gm=null,oi=null,Fc=!1,Gr=null,gf=0,Wl=0,Jm=null,Eu=-1,bu=0;function Nt(){return me&6?Ve():Eu!==-1?Eu:Eu=Ve()}function li(t){return t.mode&1?me&2&&ut!==0?ut&-ut:MI.transition!==null?(bu===0&&(bu=cE()),bu):(t=ve,t!==0||(t=window.event,t=t===void 0?16:gE(t.type)),t):1}function Pn(t,e,n,r){if(50<Wl)throw Wl=0,Jm=null,Error(j(185));nc(t,n,r),(!(me&2)||t!==Ze)&&(t===Ze&&(!(me&2)&&(Cd|=n),We===4&&Kr(t,ut)),$t(t,r),n===1&&me===0&&!(e.mode&1)&&(Eo=Ve()+500,wd&&Ei()))}function $t(t,e){var n=t.callbackNode;MR(t,e);var r=Qu(t,t===Ze?ut:0);if(r===0)n!==null&&kw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&kw(n),e===1)t.tag===0?TI(px.bind(null,t)):IE(px.bind(null,t)),kI(function(){!(me&6)&&Ei()}),n=null;else{switch(uE(r)){case 1:n=by;break;case 4:n=lE;break;case 16:n=Ju;break;case 536870912:n=aE;break;default:n=Ju}n=Pb(n,Tb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Tb(t,e){if(Eu=-1,bu=0,me&6)throw Error(j(327));var n=t.callbackNode;if(lo()&&t.callbackNode!==n)return null;var r=Qu(t,t===Ze?ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=yf(t,r);else{e=r;var i=me;me|=2;var s=Nb();(Ze!==t||ut!==e)&&(fr=null,Eo=Ve()+500,qi(t,e));do try{qI();break}catch(l){Mb(t,l)}while(!0);By(),pf.current=s,me=i,ze!==null?e=0:(Ze=null,ut=0,e=We)}if(e!==0){if(e===2&&(i=Em(t),i!==0&&(r=i,e=Qm(t,i))),e===1)throw n=xa,qi(t,0),Kr(t,r),$t(t,Ve()),n;if(e===6)Kr(t,r);else{if(i=t.current.alternate,!(r&30)&&!WI(i)&&(e=yf(t,r),e===2&&(s=Em(t),s!==0&&(r=s,e=Qm(t,s))),e===1))throw n=xa,qi(t,0),Kr(t,r),$t(t,Ve()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(j(345));case 2:Pi(t,It,fr);break;case 3:if(Kr(t,r),(r&130023424)===r&&(e=Zy+500-Ve(),10<e)){if(Qu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Nt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Om(Pi.bind(null,t,It,fr),e);break}Pi(t,It,fr);break;case 4:if(Kr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-On(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*UI(r/1960))-r,10<r){t.timeoutHandle=Om(Pi.bind(null,t,It,fr),r);break}Pi(t,It,fr);break;case 5:Pi(t,It,fr);break;default:throw Error(j(329))}}}return $t(t,Ve()),t.callbackNode===n?Tb.bind(null,t):null}function Qm(t,e){var n=Ul;return t.current.memoizedState.isDehydrated&&(qi(t,e).flags|=256),t=yf(t,e),t!==2&&(e=It,It=n,e!==null&&Zm(e)),t}function Zm(t){It===null?It=t:It.push.apply(It,t)}function WI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ln(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Kr(t,e){for(e&=~Qy,e&=~Cd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-On(e),r=1<<n;t[n]=-1,e&=~r}}function px(t){if(me&6)throw Error(j(327));lo();var e=Qu(t,0);if(!(e&1))return $t(t,Ve()),null;var n=yf(t,e);if(t.tag!==0&&n===2){var r=Em(t);r!==0&&(e=r,n=Qm(t,r))}if(n===1)throw n=xa,qi(t,0),Kr(t,e),$t(t,Ve()),n;if(n===6)throw Error(j(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Pi(t,It,fr),$t(t,Ve()),null}function e0(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(Eo=Ve()+500,wd&&Ei())}}function cs(t){Gr!==null&&Gr.tag===0&&!(me&6)&&lo();var e=me;me|=1;var n=pn.transition,r=ve;try{if(pn.transition=null,ve=1,t)return t()}finally{ve=r,pn.transition=n,me=e,!(me&6)&&Ei()}}function t0(){Ut=Ks.current,Ee(Ks)}function qi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,SI(n)),ze!==null)for(n=ze.return;n!==null;){var r=n;switch(Iy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&rf();break;case 3:ko(),Ee(Bt),Ee(St),Uy();break;case 5:Hy(r);break;case 4:ko();break;case 13:Ee(_e);break;case 19:Ee(_e);break;case 10:zy(r.type._context);break;case 22:case 23:t0()}n=n.return}if(Ze=t,ze=t=ai(t.current,null),ut=Ut=e,We=0,xa=null,Qy=Cd=as=0,It=Ul=null,$i!==null){for(e=0;e<$i.length;e++)if(n=$i[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}$i=null}return t}function Mb(t,e){do{var n=ze;try{if(By(),Su.current=hf,df){for(var r=De.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}df=!1}if(ls=0,Xe=Ue=De=null,jl=!1,ya=0,Jy.current=null,n===null||n.return===null){We=1,xa=e,ze=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=ut,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,u=l,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=tx(o);if(h!==null){h.flags&=-257,nx(h,o,l,s,e),h.mode&1&&ex(s,c,e),e=h,a=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(a),e.updateQueue=m}else p.add(a);break e}else{if(!(e&1)){ex(s,c,e),n0();break e}a=Error(j(426))}}else if(Te&&l.mode&1){var v=tx(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),nx(v,o,l,s,e),Ly(Co(a,l));break e}}s=a=Co(a,l),We!==4&&(We=2),Ul===null?Ul=[s]:Ul.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=ub(s,a,e);Yw(s,g);break e;case 1:l=a;var w=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(oi===null||!oi.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=fb(s,l,e);Yw(s,x);break e}}s=s.return}while(s!==null)}Ab(n)}catch(S){e=S,ze===n&&n!==null&&(ze=n=n.return);continue}break}while(!0)}function Nb(){var t=pf.current;return pf.current=hf,t===null?hf:t}function n0(){(We===0||We===3||We===2)&&(We=4),Ze===null||!(as&268435455)&&!(Cd&268435455)||Kr(Ze,ut)}function yf(t,e){var n=me;me|=2;var r=Nb();(Ze!==t||ut!==e)&&(fr=null,qi(t,e));do try{KI();break}catch(i){Mb(t,i)}while(!0);if(By(),me=n,pf.current=r,ze!==null)throw Error(j(261));return Ze=null,ut=0,We}function KI(){for(;ze!==null;)_b(ze)}function qI(){for(;ze!==null&&!vR();)_b(ze)}function _b(t){var e=Ob(t.alternate,t,Ut);t.memoizedProps=t.pendingProps,e===null?Ab(t):ze=e,Jy.current=null}function Ab(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$I(n,e),n!==null){n.flags&=32767,ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{We=6,ze=null;return}}else if(n=zI(n,e,Ut),n!==null){ze=n;return}if(e=e.sibling,e!==null){ze=e;return}ze=e=t}while(e!==null);We===0&&(We=5)}function Pi(t,e,n){var r=ve,i=pn.transition;try{pn.transition=null,ve=1,YI(t,e,n,r)}finally{pn.transition=i,ve=r}return null}function YI(t,e,n,r){do lo();while(Gr!==null);if(me&6)throw Error(j(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(j(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(NR(t,s),t===Ze&&(ze=Ze=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fc||(Fc=!0,Pb(Ju,function(){return lo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=pn.transition,pn.transition=null;var o=ve;ve=1;var l=me;me|=4,Jy.current=null,jI(t,n),Eb(n,t),pI(Am),Zu=!!_m,Am=_m=null,t.current=n,HI(n),wR(),me=l,ve=o,pn.transition=s}else t.current=n;if(Fc&&(Fc=!1,Gr=t,gf=i),s=t.pendingLanes,s===0&&(oi=null),kR(n.stateNode),$t(t,Ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(mf)throw mf=!1,t=Gm,Gm=null,t;return gf&1&&t.tag!==0&&lo(),s=t.pendingLanes,s&1?t===Jm?Wl++:(Wl=0,Jm=t):Wl=0,Ei(),null}function lo(){if(Gr!==null){var t=uE(gf),e=pn.transition,n=ve;try{if(pn.transition=null,ve=16>t?16:t,Gr===null)var r=!1;else{if(t=Gr,Gr=null,gf=0,me&6)throw Error(j(331));var i=me;for(me|=4,q=t.current;q!==null;){var s=q,o=s.child;if(q.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(q=c;q!==null;){var u=q;switch(u.tag){case 0:case 11:case 15:Hl(8,u,s)}var f=u.child;if(f!==null)f.return=u,q=f;else for(;q!==null;){u=q;var d=u.sibling,h=u.return;if(Sb(u),u===c){q=null;break}if(d!==null){d.return=h,q=d;break}q=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,q=o;else e:for(;q!==null;){if(s=q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Hl(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,q=g;break e}q=s.return}}var w=t.current;for(q=w;q!==null;){o=q;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,q=y;else e:for(o=w;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:kd(9,l)}}catch(S){Re(l,l.return,S)}if(l===o){q=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,q=x;break e}q=l.return}}if(me=i,Ei(),Kn&&typeof Kn.onPostCommitFiberRoot=="function")try{Kn.onPostCommitFiberRoot(pd,t)}catch{}r=!0}return r}finally{ve=n,pn.transition=e}}return!1}function mx(t,e,n){e=Co(n,e),e=ub(t,e,1),t=si(t,e,1),e=Nt(),t!==null&&(nc(t,1,e),$t(t,e))}function Re(t,e,n){if(t.tag===3)mx(t,t,n);else for(;e!==null;){if(e.tag===3){mx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(oi===null||!oi.has(r))){t=Co(n,t),t=fb(e,t,1),e=si(e,t,1),t=Nt(),e!==null&&(nc(e,1,t),$t(e,t));break}}e=e.return}}function XI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Nt(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(ut&n)===n&&(We===4||We===3&&(ut&130023424)===ut&&500>Ve()-Zy?qi(t,0):Qy|=n),$t(t,e)}function Db(t,e){e===0&&(t.mode&1?(e=Dc,Dc<<=1,!(Dc&130023424)&&(Dc=4194304)):e=1);var n=Nt();t=Tr(t,e),t!==null&&(nc(t,e,n),$t(t,n))}function GI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Db(t,n)}function JI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(j(314))}r!==null&&r.delete(e),Db(t,n)}var Ob;Ob=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bt.current)Lt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Lt=!1,BI(t,e,n);Lt=!!(t.flags&131072)}else Lt=!1,Te&&e.flags&1048576&&LE(e,lf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Cu(t,e),t=e.pendingProps;var i=wo(e,St.current);oo(e,n),i=Ky(null,e,r,t,i,n);var s=qy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zt(r)?(s=!0,sf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Fy(e),i.updater=Sd,e.stateNode=i,i._reactInternals=e,zm(e,r,t,n),e=jm(null,e,r,!0,s,n)):(e.tag=0,Te&&s&&Ry(e),Mt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Cu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=ZI(r),t=kn(r,t),i){case 0:e=Fm(null,e,r,t,n);break e;case 1:e=sx(null,e,r,t,n);break e;case 11:e=rx(null,e,r,t,n);break e;case 14:e=ix(null,e,r,kn(r.type,t),n);break e}throw Error(j(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kn(r,i),Fm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kn(r,i),sx(t,e,r,i,n);case 3:e:{if(mb(e),t===null)throw Error(j(387));r=e.pendingProps,s=e.memoizedState,i=s.element,jE(t,e),uf(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Co(Error(j(423)),e),e=ox(t,e,r,n,i);break e}else if(r!==i){i=Co(Error(j(424)),e),e=ox(t,e,r,n,i);break e}else for(qt=ii(e.stateNode.containerInfo.firstChild),Xt=e,Te=!0,Tn=null,n=$E(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xo(),r===i){e=Mr(t,e,n);break e}Mt(t,e,r,n)}e=e.child}return e;case 5:return HE(e),t===null&&Lm(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Dm(r,i)?o=null:s!==null&&Dm(r,s)&&(e.flags|=32),pb(t,e),Mt(t,e,o,n),e.child;case 6:return t===null&&Lm(e),null;case 13:return gb(t,e,n);case 4:return jy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=So(e,null,r,n):Mt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kn(r,i),rx(t,e,r,i,n);case 7:return Mt(t,e,e.pendingProps,n),e.child;case 8:return Mt(t,e,e.pendingProps.children,n),e.child;case 12:return Mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Se(af,r._currentValue),r._currentValue=o,s!==null)if(Ln(s.value,o)){if(s.children===i.children&&!Bt.current){e=Mr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=vr(-1,n&-n),a.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?a.next=a:(a.next=u.next,u.next=a),c.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Vm(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(j(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Vm(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Mt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,oo(e,n),i=yn(i),r=r(i),e.flags|=1,Mt(t,e,r,n),e.child;case 14:return r=e.type,i=kn(r,e.pendingProps),i=kn(r.type,i),ix(t,e,r,i,n);case 15:return db(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kn(r,i),Cu(t,e),e.tag=1,zt(r)?(t=!0,sf(e)):t=!1,oo(e,n),cb(e,r,i),zm(e,r,i,n),jm(null,e,r,!0,t,n);case 19:return yb(t,e,n);case 22:return hb(t,e,n)}throw Error(j(156,e.tag))};function Pb(t,e){return oE(t,e)}function QI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(t,e,n,r){return new QI(t,e,n,r)}function r0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ZI(t){if(typeof t=="function")return r0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ky)return 11;if(t===Cy)return 14}return 2}function ai(t,e){var n=t.alternate;return n===null?(n=hn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Tu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")r0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ls:return Yi(n.children,i,s,e);case Sy:o=8,i|=8;break;case cm:return t=hn(12,n,e,i|2),t.elementType=cm,t.lanes=s,t;case um:return t=hn(13,n,e,i),t.elementType=um,t.lanes=s,t;case fm:return t=hn(19,n,e,i),t.elementType=fm,t.lanes=s,t;case HC:return Ed(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case FC:o=10;break e;case jC:o=9;break e;case ky:o=11;break e;case Cy:o=14;break e;case Fr:o=16,r=null;break e}throw Error(j(130,t==null?t:typeof t,""))}return e=hn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Yi(t,e,n,r){return t=hn(7,t,r,e),t.lanes=n,t}function Ed(t,e,n,r){return t=hn(22,t,r,e),t.elementType=HC,t.lanes=n,t.stateNode={isHidden:!1},t}function ep(t,e,n){return t=hn(6,t,null,e),t.lanes=n,t}function tp(t,e,n){return e=hn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function eL(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ih(0),this.expirationTimes=Ih(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ih(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function i0(t,e,n,r,i,s,o,l,a){return t=new eL(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=hn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fy(s),t}function tL(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Is,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Rb(t){if(!t)return gi;t=t._reactInternals;e:{if(ks(t)!==t||t.tag!==1)throw Error(j(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(j(171))}if(t.tag===1){var n=t.type;if(zt(n))return RE(t,n,e)}return e}function Ib(t,e,n,r,i,s,o,l,a){return t=i0(n,r,!0,t,i,s,o,l,a),t.context=Rb(null),n=t.current,r=Nt(),i=li(n),s=vr(r,i),s.callback=e??null,si(n,s,i),t.current.lanes=i,nc(t,i,r),$t(t,r),t}function bd(t,e,n,r){var i=e.current,s=Nt(),o=li(i);return n=Rb(n),e.context===null?e.context=n:e.pendingContext=n,e=vr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=si(i,e,o),t!==null&&(Pn(t,i,o,s),xu(t,i,o)),o}function vf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function gx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function s0(t,e){gx(t,e),(t=t.alternate)&&gx(t,e)}function nL(){return null}var Lb=typeof reportError=="function"?reportError:function(t){console.error(t)};function o0(t){this._internalRoot=t}Td.prototype.render=o0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));bd(t,e,null,null)};Td.prototype.unmount=o0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;cs(function(){bd(null,t,null,null)}),e[br]=null}};function Td(t){this._internalRoot=t}Td.prototype.unstable_scheduleHydration=function(t){if(t){var e=hE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Wr.length&&e!==0&&e<Wr[n].priority;n++);Wr.splice(n,0,t),n===0&&mE(t)}};function l0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Md(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function yx(){}function rL(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=vf(o);s.call(c)}}var o=Ib(e,r,t,0,null,!1,!1,"",yx);return t._reactRootContainer=o,t[br]=o.current,da(t.nodeType===8?t.parentNode:t),cs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=vf(a);l.call(c)}}var a=i0(t,0,!1,null,null,!1,!1,"",yx);return t._reactRootContainer=a,t[br]=a.current,da(t.nodeType===8?t.parentNode:t),cs(function(){bd(e,a,n,r)}),a}function Nd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=vf(o);l.call(a)}}bd(e,o,t,i)}else o=rL(n,e,t,i,r);return vf(o)}fE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Tl(e.pendingLanes);n!==0&&(Ty(e,n|1),$t(e,Ve()),!(me&6)&&(Eo=Ve()+500,Ei()))}break;case 13:cs(function(){var r=Tr(t,1);if(r!==null){var i=Nt();Pn(r,t,1,i)}}),s0(t,1)}};My=function(t){if(t.tag===13){var e=Tr(t,134217728);if(e!==null){var n=Nt();Pn(e,t,134217728,n)}s0(t,134217728)}};dE=function(t){if(t.tag===13){var e=li(t),n=Tr(t,e);if(n!==null){var r=Nt();Pn(n,t,e,r)}s0(t,e)}};hE=function(){return ve};pE=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};Sm=function(t,e,n){switch(e){case"input":if(pm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=vd(r);if(!i)throw Error(j(90));WC(r),pm(r,i)}}}break;case"textarea":qC(t,n);break;case"select":e=n.value,e!=null&&no(t,!!n.multiple,e,!1)}};eE=e0;tE=cs;var iL={usingClientEntryPoint:!1,Events:[ic,$s,vd,QC,ZC,e0]},yl={findFiberByHostInstance:zi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sL={bundleType:yl.bundleType,version:yl.version,rendererPackageName:yl.rendererPackageName,rendererConfig:yl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=iE(t),t===null?null:t.stateNode},findFiberByHostInstance:yl.findFiberByHostInstance||nL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jc.isDisabled&&jc.supportsFiber)try{pd=jc.inject(sL),Kn=jc}catch{}}nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iL;nn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!l0(e))throw Error(j(200));return tL(t,e,null,n)};nn.createRoot=function(t,e){if(!l0(t))throw Error(j(299));var n=!1,r="",i=Lb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=i0(t,1,!1,null,null,n,!1,r,i),t[br]=e.current,da(t.nodeType===8?t.parentNode:t),new o0(e)};nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=iE(e),t=t===null?null:t.stateNode,t};nn.flushSync=function(t){return cs(t)};nn.hydrate=function(t,e,n){if(!Md(e))throw Error(j(200));return Nd(null,t,e,!0,n)};nn.hydrateRoot=function(t,e,n){if(!l0(t))throw Error(j(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Lb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Ib(e,null,t,1,n??null,i,!1,s,o),t[br]=e.current,da(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Td(e)};nn.render=function(t,e,n){if(!Md(e))throw Error(j(200));return Nd(null,t,e,!1,n)};nn.unmountComponentAtNode=function(t){if(!Md(t))throw Error(j(40));return t._reactRootContainer?(cs(function(){Nd(null,null,t,!1,function(){t._reactRootContainer=null,t[br]=null})}),!0):!1};nn.unstable_batchedUpdates=e0;nn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Md(n))throw Error(j(200));if(t==null||t._reactInternals===void 0)throw Error(j(38));return Nd(t,e,n,!1,r)};nn.version="18.3.1-next-f1338f8080-20240426";function Vb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vb)}catch(t){console.error(t)}}Vb(),VC.exports=nn;var Bb=VC.exports;const oL=hy(Bb);var vx=Bb;lm.createRoot=vx.createRoot,lm.hydrateRoot=vx.hydrateRoot;const Qn=Object.create(null);Qn.open="0";Qn.close="1";Qn.ping="2";Qn.pong="3";Qn.message="4";Qn.upgrade="5";Qn.noop="6";const Mu=Object.create(null);Object.keys(Qn).forEach(t=>{Mu[Qn[t]]=t});const eg={type:"error",data:"parser error"},zb=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",$b=typeof ArrayBuffer=="function",Fb=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,a0=({type:t,data:e},n,r)=>zb&&e instanceof Blob?n?r(e):wx(e,r):$b&&(e instanceof ArrayBuffer||Fb(e))?n?r(e):wx(new Blob([e]),r):r(Qn[t]+(e||"")),wx=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function xx(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let np;function lL(t,e){if(zb&&t.data instanceof Blob)return t.data.arrayBuffer().then(xx).then(e);if($b&&(t.data instanceof ArrayBuffer||Fb(t.data)))return e(xx(t.data));a0(t,!1,n=>{np||(np=new TextEncoder),e(np.encode(n))})}const Sx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Sx.length;t++)Nl[Sx.charCodeAt(t)]=t;const aL=t=>{let e=t.length*.75,n=t.length,r,i=0,s,o,l,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),u=new Uint8Array(c);for(r=0;r<n;r+=4)s=Nl[t.charCodeAt(r)],o=Nl[t.charCodeAt(r+1)],l=Nl[t.charCodeAt(r+2)],a=Nl[t.charCodeAt(r+3)],u[i++]=s<<2|o>>4,u[i++]=(o&15)<<4|l>>2,u[i++]=(l&3)<<6|a&63;return c},cL=typeof ArrayBuffer=="function",c0=(t,e)=>{if(typeof t!="string")return{type:"message",data:jb(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:uL(t.substring(1),e)}:Mu[n]?t.length>1?{type:Mu[n],data:t.substring(1)}:{type:Mu[n]}:eg},uL=(t,e)=>{if(cL){const n=aL(t);return jb(n,e)}else return{base64:!0,data:t}},jb=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Hb="",fL=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,o)=>{a0(s,!1,l=>{r[o]=l,++i===n&&e(r.join(Hb))})})},dL=(t,e)=>{const n=t.split(Hb),r=[];for(let i=0;i<n.length;i++){const s=c0(n[i],e);if(r.push(s),s.type==="error")break}return r};function hL(){return new TransformStream({transform(t,e){lL(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let rp;function Hc(t){return t.reduce((e,n)=>e+n.length,0)}function Uc(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function pL(t,e){rp||(rp=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(r===0){if(Hc(n)<1)break;const a=Uc(n,1);s=(a[0]&128)===128,i=a[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(Hc(n)<2)break;const a=Uc(n,2);i=new DataView(a.buffer,a.byteOffset,a.length).getUint16(0),r=3}else if(r===2){if(Hc(n)<8)break;const a=Uc(n,8),c=new DataView(a.buffer,a.byteOffset,a.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){l.enqueue(eg);break}i=u*Math.pow(2,32)+c.getUint32(4),r=3}else{if(Hc(n)<i)break;const a=Uc(n,i);l.enqueue(c0(s?a:rp.decode(a),e)),r=0}if(i===0||i>t){l.enqueue(eg);break}}}})}const Ub=4;function $e(t){if(t)return mL(t)}function mL(t){for(var e in $e.prototype)t[e]=$e.prototype[e];return t}$e.prototype.on=$e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};$e.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};$e.prototype.off=$e.prototype.removeListener=$e.prototype.removeAllListeners=$e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};$e.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};$e.prototype.emitReserved=$e.prototype.emit;$e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};$e.prototype.hasListeners=function(t){return!!this.listeners(t).length};const _d=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),un=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),gL="arraybuffer";function Wb(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const yL=un.setTimeout,vL=un.clearTimeout;function Ad(t,e){e.useNativeTimers?(t.setTimeoutFn=yL.bind(un),t.clearTimeoutFn=vL.bind(un)):(t.setTimeoutFn=un.setTimeout.bind(un),t.clearTimeoutFn=un.clearTimeout.bind(un))}const wL=1.33;function xL(t){return typeof t=="string"?SL(t):Math.ceil((t.byteLength||t.size)*wL)}function SL(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function Kb(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function kL(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function CL(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class EL extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class u0 extends $e{constructor(e){super(),this.writable=!1,Ad(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new EL(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=c0(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=kL(e);return n.length?"?"+n:""}}class bL extends u0{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};dL(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,fL(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Kb()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let qb=!1;try{qb=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const TL=qb;function ML(){}class NL extends bL{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class Yn extends $e{constructor(e,n,r){super(),this.createRequest=e,Ad(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=Wb(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Yn.requestsCount++,Yn.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=ML,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Yn.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Yn.requestsCount=0;Yn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",kx);else if(typeof addEventListener=="function"){const t="onpagehide"in un?"pagehide":"unload";addEventListener(t,kx,!1)}}function kx(){for(let t in Yn.requests)Yn.requests.hasOwnProperty(t)&&Yn.requests[t].abort()}const _L=function(){const t=Yb({xdomain:!1});return t&&t.responseType!==null}();class AL extends NL{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=_L&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Yn(Yb,this.uri(),e)}}function Yb(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||TL))return new XMLHttpRequest}catch{}if(!e)try{return new un[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Xb=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class DL extends u0{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=Xb?{}:Wb(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;a0(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&_d(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Kb()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const ip=un.WebSocket||un.MozWebSocket;class OL extends DL{createSocket(e,n,r){return Xb?new ip(e,n,r):n?new ip(e,n):new ip(e)}doWrite(e,n){this.ws.send(n)}}class PL extends u0{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=pL(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=hL();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:l,value:a})=>{l||(this.onPacket(a),s())}).catch(l=>{})};s();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&_d(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const RL={websocket:OL,webtransport:PL,polling:AL},IL=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,LL=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function tg(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=IL.exec(t||""),s={},o=14;for(;o--;)s[LL[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=VL(s,s.path),s.queryKey=BL(s,s.query),s}function VL(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function BL(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const ng=typeof addEventListener=="function"&&typeof removeEventListener=="function",Nu=[];ng&&addEventListener("offline",()=>{Nu.forEach(t=>t())},!1);class ci extends $e{constructor(e,n){if(super(),this.binaryType=gL,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=tg(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=tg(n.host).host);Ad(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=CL(this.opts.query)),ng&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Nu.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=Ub,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&ci.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",ci.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=xL(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,_d(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(ci.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ng&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Nu.indexOf(this._offlineEventListener);r!==-1&&Nu.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}ci.protocol=Ub;class zL extends ci{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;ci.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;ci.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=n.name,this.emitReserved("upgradeError",d)}}))};function s(){r||(r=!0,u(),n.close(),n=null)}const o=f=>{const d=new Error("probe error: "+f);d.transport=n.name,s(),this.emitReserved("upgradeError",d)};function l(){o("transport closed")}function a(){o("socket closed")}function c(f){n&&f.name!==n.name&&s()}const u=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",l),this.off("close",a),this.off("upgrading",c)};n.once("open",i),n.once("error",o),n.once("close",l),this.once("close",a),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let $L=class extends zL{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>RL[i]).filter(i=>!!i)),super(e,r)}};function FL(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=tg(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const jL=typeof ArrayBuffer=="function",HL=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Gb=Object.prototype.toString,UL=typeof Blob=="function"||typeof Blob<"u"&&Gb.call(Blob)==="[object BlobConstructor]",WL=typeof File=="function"||typeof File<"u"&&Gb.call(File)==="[object FileConstructor]";function f0(t){return jL&&(t instanceof ArrayBuffer||HL(t))||UL&&t instanceof Blob||WL&&t instanceof File}function _u(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(_u(t[n]))return!0;return!1}if(f0(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return _u(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&_u(t[n]))return!0;return!1}function KL(t){const e=[],n=t.data,r=t;return r.data=rg(n,e),r.attachments=e.length,{packet:r,buffers:e}}function rg(t,e){if(!t)return t;if(f0(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=rg(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=rg(t[r],e));return n}return t}function qL(t,e){return t.data=ig(t.data,e),delete t.attachments,t}function ig(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=ig(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=ig(t[n],e));return t}const Jb=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],YL=5;var oe;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(oe||(oe={}));let XL=class{constructor(e){this.replacer=e}encode(e){return(e.type===oe.EVENT||e.type===oe.ACK)&&_u(e)?this.encodeAsBinary({type:e.type===oe.EVENT?oe.BINARY_EVENT:oe.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===oe.BINARY_EVENT||e.type===oe.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=KL(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}},GL=class Qb extends $e{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===oe.BINARY_EVENT;r||n.type===oe.BINARY_ACK?(n.type=r?oe.EVENT:oe.ACK,this.reconstructor=new JL(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(f0(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(oe[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===oe.BINARY_EVENT||r.type===oe.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(Qb.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case oe.CONNECT:return wf(n);case oe.DISCONNECT:return n===void 0;case oe.CONNECT_ERROR:return typeof n=="string"||wf(n);case oe.EVENT:case oe.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Jb.indexOf(n[0])===-1);case oe.ACK:case oe.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}};class JL{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=qL(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function QL(t){return typeof t=="string"}const ZL=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};function e2(t){return t===void 0||ZL(t)}function wf(t){return Object.prototype.toString.call(t)==="[object Object]"}function t2(t,e){switch(t){case oe.CONNECT:return e===void 0||wf(e);case oe.DISCONNECT:return e===void 0;case oe.EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&Jb.indexOf(e[0])===-1);case oe.ACK:return Array.isArray(e);case oe.CONNECT_ERROR:return typeof e=="string"||wf(e);default:return!1}}function n2(t){return QL(t.nsp)&&e2(t.id)&&t2(t.type,t.data)}const r2=Object.freeze(Object.defineProperty({__proto__:null,Decoder:GL,Encoder:XL,get PacketType(){return oe},isPacketValid:n2,protocol:YL},Symbol.toStringTag,{value:"Module"}));function En(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const i2=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Zb extends $e{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[En(e,"open",this.onopen.bind(this)),En(e,"packet",this.onpacket.bind(this)),En(e,"error",this.onerror.bind(this)),En(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,s;if(i2.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:oe.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const u=this.ids++,f=n.pop();this._registerAckCallback(u,f),o.id=u}const l=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,a=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!l||(a?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),o=(...l)=>{this.io.clearTimeoutFn(s),n.apply(this,l)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,i)=>{const s=(o,l)=>o?i(o):r(l);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>(this._queue[0],i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:oe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case oe.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case oe.EVENT:case oe.BINARY_EVENT:this.onevent(e);break;case oe.ACK:case oe.BINARY_ACK:this.onack(e);break;case oe.DISCONNECT:this.ondisconnect();break;case oe.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:oe.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:oe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Qo(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Qo.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Qo.prototype.reset=function(){this.attempts=0};Qo.prototype.setMin=function(t){this.ms=t};Qo.prototype.setMax=function(t){this.max=t};Qo.prototype.setJitter=function(t){this.jitter=t};class sg extends $e{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Ad(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Qo({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||r2;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new $L(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=En(n,"open",function(){r.onopen(),e&&e()}),s=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},o=En(n,"error",s);if(this._timeout!==!1){const l=this._timeout,a=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},l);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(En(e,"ping",this.onping.bind(this)),En(e,"data",this.ondata.bind(this)),En(e,"error",this.onerror.bind(this)),En(e,"close",this.onclose.bind(this)),En(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){_d(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new Zb(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const vl={};function Au(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=FL(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=vl[i]&&s in vl[i].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let a;return l?a=new sg(r,e):(vl[i]||(vl[i]=new sg(r,e)),a=vl[i]),n.query&&!e.query&&(e.query=n.queryKey),a.socket(n.path,e)}Object.assign(Au,{Manager:sg,Socket:Zb,io:Au,connect:Au});function je(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=je(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var s2={value:()=>{}};function Dd(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Du(n)}function Du(t){this._=t}function o2(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Du.prototype=Dd.prototype={constructor:Du,on:function(t,e){var n=this._,r=o2(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=l2(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=Cx(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Cx(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Du(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function l2(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Cx(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=s2,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var og="http://www.w3.org/1999/xhtml";const Ex={svg:"http://www.w3.org/2000/svg",xhtml:og,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Od(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ex.hasOwnProperty(e)?{space:Ex[e],local:t}:t}function a2(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===og&&e.documentElement.namespaceURI===og?e.createElement(t):e.createElementNS(n,t)}}function c2(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function eT(t){var e=Od(t);return(e.local?c2:a2)(e)}function u2(){}function d0(t){return t==null?u2:function(){return this.querySelector(t)}}function f2(t){typeof t!="function"&&(t=d0(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=new Array(o),a,c,u=0;u<o;++u)(a=s[u])&&(c=t.call(a,a.__data__,u,s))&&("__data__"in a&&(c.__data__=a.__data__),l[u]=c);return new en(r,this._parents)}function d2(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function h2(){return[]}function tT(t){return t==null?h2:function(){return this.querySelectorAll(t)}}function p2(t){return function(){return d2(t.apply(this,arguments))}}function m2(t){typeof t=="function"?t=p2(t):t=tT(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],l=o.length,a,c=0;c<l;++c)(a=o[c])&&(r.push(t.call(a,a.__data__,c,o)),i.push(a));return new en(r,i)}function nT(t){return function(){return this.matches(t)}}function rT(t){return function(e){return e.matches(t)}}var g2=Array.prototype.find;function y2(t){return function(){return g2.call(this.children,t)}}function v2(){return this.firstElementChild}function w2(t){return this.select(t==null?v2:y2(typeof t=="function"?t:rT(t)))}var x2=Array.prototype.filter;function S2(){return Array.from(this.children)}function k2(t){return function(){return x2.call(this.children,t)}}function C2(t){return this.selectAll(t==null?S2:k2(typeof t=="function"?t:rT(t)))}function E2(t){typeof t!="function"&&(t=nT(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=[],a,c=0;c<o;++c)(a=s[c])&&t.call(a,a.__data__,c,s)&&l.push(a);return new en(r,this._parents)}function iT(t){return new Array(t.length)}function b2(){return new en(this._enter||this._groups.map(iT),this._parents)}function xf(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}xf.prototype={constructor:xf,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function T2(t){return function(){return t}}function M2(t,e,n,r,i,s){for(var o=0,l,a=e.length,c=s.length;o<c;++o)(l=e[o])?(l.__data__=s[o],r[o]=l):n[o]=new xf(t,s[o]);for(;o<a;++o)(l=e[o])&&(i[o]=l)}function N2(t,e,n,r,i,s,o){var l,a,c=new Map,u=e.length,f=s.length,d=new Array(u),h;for(l=0;l<u;++l)(a=e[l])&&(d[l]=h=o.call(a,a.__data__,l,e)+"",c.has(h)?i[l]=a:c.set(h,a));for(l=0;l<f;++l)h=o.call(t,s[l],l,s)+"",(a=c.get(h))?(r[l]=a,a.__data__=s[l],c.delete(h)):n[l]=new xf(t,s[l]);for(l=0;l<u;++l)(a=e[l])&&c.get(d[l])===a&&(i[l]=a)}function _2(t){return t.__data__}function A2(t,e){if(!arguments.length)return Array.from(this,_2);var n=e?N2:M2,r=this._parents,i=this._groups;typeof t!="function"&&(t=T2(t));for(var s=i.length,o=new Array(s),l=new Array(s),a=new Array(s),c=0;c<s;++c){var u=r[c],f=i[c],d=f.length,h=D2(t.call(u,u&&u.__data__,c,r)),p=h.length,m=l[c]=new Array(p),v=o[c]=new Array(p),g=a[c]=new Array(d);n(u,f,m,v,g,h,e);for(var w=0,y=0,x,S;w<p;++w)if(x=m[w]){for(w>=y&&(y=w+1);!(S=v[y])&&++y<p;);x._next=S||null}}return o=new en(o,r),o._enter=l,o._exit=a,o}function D2(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function O2(){return new en(this._exit||this._groups.map(iT),this._parents)}function P2(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function R2(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),l=new Array(i),a=0;a<o;++a)for(var c=n[a],u=r[a],f=c.length,d=l[a]=new Array(f),h,p=0;p<f;++p)(h=c[p]||u[p])&&(d[p]=h);for(;a<i;++a)l[a]=n[a];return new en(l,this._parents)}function I2(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function L2(t){t||(t=V2);function e(f,d){return f&&d?t(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],l=o.length,a=i[s]=new Array(l),c,u=0;u<l;++u)(c=o[u])&&(a[u]=c);a.sort(e)}return new en(i,this._parents).order()}function V2(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function B2(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function z2(){return Array.from(this)}function $2(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function F2(){let t=0;for(const e of this)++t;return t}function j2(){return!this.node()}function H2(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,l;s<o;++s)(l=i[s])&&t.call(l,l.__data__,s,i);return this}function U2(t){return function(){this.removeAttribute(t)}}function W2(t){return function(){this.removeAttributeNS(t.space,t.local)}}function K2(t,e){return function(){this.setAttribute(t,e)}}function q2(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Y2(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function X2(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function G2(t,e){var n=Od(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?W2:U2:typeof e=="function"?n.local?X2:Y2:n.local?q2:K2)(n,e))}function sT(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function J2(t){return function(){this.style.removeProperty(t)}}function Q2(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Z2(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function eV(t,e,n){return arguments.length>1?this.each((e==null?J2:typeof e=="function"?Z2:Q2)(t,e,n??"")):bo(this.node(),t)}function bo(t,e){return t.style.getPropertyValue(e)||sT(t).getComputedStyle(t,null).getPropertyValue(e)}function tV(t){return function(){delete this[t]}}function nV(t,e){return function(){this[t]=e}}function rV(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function iV(t,e){return arguments.length>1?this.each((e==null?tV:typeof e=="function"?rV:nV)(t,e)):this.node()[t]}function oT(t){return t.trim().split(/^|\s+/)}function h0(t){return t.classList||new lT(t)}function lT(t){this._node=t,this._names=oT(t.getAttribute("class")||"")}lT.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function aT(t,e){for(var n=h0(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function cT(t,e){for(var n=h0(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function sV(t){return function(){aT(this,t)}}function oV(t){return function(){cT(this,t)}}function lV(t,e){return function(){(e.apply(this,arguments)?aT:cT)(this,t)}}function aV(t,e){var n=oT(t+"");if(arguments.length<2){for(var r=h0(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?lV:e?sV:oV)(n,e))}function cV(){this.textContent=""}function uV(t){return function(){this.textContent=t}}function fV(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function dV(t){return arguments.length?this.each(t==null?cV:(typeof t=="function"?fV:uV)(t)):this.node().textContent}function hV(){this.innerHTML=""}function pV(t){return function(){this.innerHTML=t}}function mV(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function gV(t){return arguments.length?this.each(t==null?hV:(typeof t=="function"?mV:pV)(t)):this.node().innerHTML}function yV(){this.nextSibling&&this.parentNode.appendChild(this)}function vV(){return this.each(yV)}function wV(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xV(){return this.each(wV)}function SV(t){var e=typeof t=="function"?t:eT(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function kV(){return null}function CV(t,e){var n=typeof t=="function"?t:eT(t),r=e==null?kV:typeof e=="function"?e:d0(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function EV(){var t=this.parentNode;t&&t.removeChild(this)}function bV(){return this.each(EV)}function TV(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function MV(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function NV(t){return this.select(t?MV:TV)}function _V(t){return arguments.length?this.property("__data__",t):this.node().__data__}function AV(t){return function(e){t.call(this,e,this.__data__)}}function DV(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function OV(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function PV(t,e,n){return function(){var r=this.__on,i,s=AV(e);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function RV(t,e,n){var r=DV(t+""),i,s=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var a=0,c=l.length,u;a<c;++a)for(i=0,u=l[a];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(l=e?PV:OV,i=0;i<s;++i)this.each(l(r[i],e,n));return this}function uT(t,e,n){var r=sT(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function IV(t,e){return function(){return uT(this,t,e)}}function LV(t,e){return function(){return uT(this,t,e.apply(this,arguments))}}function VV(t,e){return this.each((typeof e=="function"?LV:IV)(t,e))}function*BV(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var fT=[null];function en(t,e){this._groups=t,this._parents=e}function oc(){return new en([[document.documentElement]],fT)}function zV(){return this}en.prototype=oc.prototype={constructor:en,select:f2,selectAll:m2,selectChild:w2,selectChildren:C2,filter:E2,data:A2,enter:b2,exit:O2,join:P2,merge:R2,selection:zV,order:I2,sort:L2,call:B2,nodes:z2,node:$2,size:F2,empty:j2,each:H2,attr:G2,style:eV,property:iV,classed:aV,text:dV,html:gV,raise:vV,lower:xV,append:SV,insert:CV,remove:bV,clone:NV,datum:_V,on:RV,dispatch:VV,[Symbol.iterator]:BV};function Wt(t){return typeof t=="string"?new en([[document.querySelector(t)]],[document.documentElement]):new en([[t]],fT)}function $V(t){let e;for(;e=t.sourceEvent;)t=e;return t}function bn(t,e){if(t=$V(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const FV={passive:!1},Sa={capture:!0,passive:!1};function sp(t){t.stopImmediatePropagation()}function ao(t){t.preventDefault(),t.stopImmediatePropagation()}function dT(t){var e=t.document.documentElement,n=Wt(t).on("dragstart.drag",ao,Sa);"onselectstart"in e?n.on("selectstart.drag",ao,Sa):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function hT(t,e){var n=t.document.documentElement,r=Wt(t).on("dragstart.drag",null);e&&(r.on("click.drag",ao,Sa),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Wc=t=>()=>t;function lg(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:l,dx:a,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}lg.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function jV(t){return!t.ctrlKey&&!t.button}function HV(){return this.parentNode}function UV(t,e){return e??{x:t.x,y:t.y}}function WV(){return navigator.maxTouchPoints||"ontouchstart"in this}function pT(){var t=jV,e=HV,n=UV,r=WV,i={},s=Dd("start","drag","end"),o=0,l,a,c,u,f=0;function d(x){x.on("mousedown.drag",h).filter(r).on("touchstart.drag",v).on("touchmove.drag",g,FV).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(x,S){if(!(u||!t.call(this,x,S))){var C=y(this,e.call(this,x,S),x,S,"mouse");C&&(Wt(x.view).on("mousemove.drag",p,Sa).on("mouseup.drag",m,Sa),dT(x.view),sp(x),c=!1,l=x.clientX,a=x.clientY,C("start",x))}}function p(x){if(ao(x),!c){var S=x.clientX-l,C=x.clientY-a;c=S*S+C*C>f}i.mouse("drag",x)}function m(x){Wt(x.view).on("mousemove.drag mouseup.drag",null),hT(x.view,c),ao(x),i.mouse("end",x)}function v(x,S){if(t.call(this,x,S)){var C=x.changedTouches,k=e.call(this,x,S),E=C.length,N,I;for(N=0;N<E;++N)(I=y(this,k,x,S,C[N].identifier,C[N]))&&(sp(x),I("start",x,C[N]))}}function g(x){var S=x.changedTouches,C=S.length,k,E;for(k=0;k<C;++k)(E=i[S[k].identifier])&&(ao(x),E("drag",x,S[k]))}function w(x){var S=x.changedTouches,C=S.length,k,E;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),k=0;k<C;++k)(E=i[S[k].identifier])&&(sp(x),E("end",x,S[k]))}function y(x,S,C,k,E,N){var I=s.copy(),O=bn(N||C,S),L,$,_;if((_=n.call(x,new lg("beforestart",{sourceEvent:C,target:d,identifier:E,active:o,x:O[0],y:O[1],dx:0,dy:0,dispatch:I}),k))!=null)return L=_.x-O[0]||0,$=_.y-O[1]||0,function V(P,R,T){var A=O,D;switch(P){case"start":i[E]=V,D=o++;break;case"end":delete i[E],--o;case"drag":O=bn(T||R,S),D=o;break}I.call(P,x,new lg(P,{sourceEvent:R,subject:_,target:d,identifier:E,active:D,x:O[0]+L,y:O[1]+$,dx:O[0]-A[0],dy:O[1]-A[1],dispatch:I}),k)}}return d.filter=function(x){return arguments.length?(t=typeof x=="function"?x:Wc(!!x),d):t},d.container=function(x){return arguments.length?(e=typeof x=="function"?x:Wc(x),d):e},d.subject=function(x){return arguments.length?(n=typeof x=="function"?x:Wc(x),d):n},d.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:Wc(!!x),d):r},d.on=function(){var x=s.on.apply(s,arguments);return x===s?d:x},d.clickDistance=function(x){return arguments.length?(f=(x=+x)*x,d):Math.sqrt(f)},d}function p0(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function mT(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function lc(){}var ka=.7,Sf=1/ka,co="\\s*([+-]?\\d+)\\s*",Ca="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",KV=/^#([0-9a-f]{3,8})$/,qV=new RegExp(`^rgb\\(${co},${co},${co}\\)$`),YV=new RegExp(`^rgb\\(${Xn},${Xn},${Xn}\\)$`),XV=new RegExp(`^rgba\\(${co},${co},${co},${Ca}\\)$`),GV=new RegExp(`^rgba\\(${Xn},${Xn},${Xn},${Ca}\\)$`),JV=new RegExp(`^hsl\\(${Ca},${Xn},${Xn}\\)$`),QV=new RegExp(`^hsla\\(${Ca},${Xn},${Xn},${Ca}\\)$`),bx={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};p0(lc,us,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Tx,formatHex:Tx,formatHex8:ZV,formatHsl:eB,formatRgb:Mx,toString:Mx});function Tx(){return this.rgb().formatHex()}function ZV(){return this.rgb().formatHex8()}function eB(){return gT(this).formatHsl()}function Mx(){return this.rgb().formatRgb()}function us(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=KV.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Nx(e):n===3?new Vt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Kc(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Kc(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=qV.exec(t))?new Vt(e[1],e[2],e[3],1):(e=YV.exec(t))?new Vt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=XV.exec(t))?Kc(e[1],e[2],e[3],e[4]):(e=GV.exec(t))?Kc(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=JV.exec(t))?Dx(e[1],e[2]/100,e[3]/100,1):(e=QV.exec(t))?Dx(e[1],e[2]/100,e[3]/100,e[4]):bx.hasOwnProperty(t)?Nx(bx[t]):t==="transparent"?new Vt(NaN,NaN,NaN,0):null}function Nx(t){return new Vt(t>>16&255,t>>8&255,t&255,1)}function Kc(t,e,n,r){return r<=0&&(t=e=n=NaN),new Vt(t,e,n,r)}function tB(t){return t instanceof lc||(t=us(t)),t?(t=t.rgb(),new Vt(t.r,t.g,t.b,t.opacity)):new Vt}function ag(t,e,n,r){return arguments.length===1?tB(t):new Vt(t,e,n,r??1)}function Vt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}p0(Vt,ag,mT(lc,{brighter(t){return t=t==null?Sf:Math.pow(Sf,t),new Vt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ka:Math.pow(ka,t),new Vt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Vt(Xi(this.r),Xi(this.g),Xi(this.b),kf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_x,formatHex:_x,formatHex8:nB,formatRgb:Ax,toString:Ax}));function _x(){return`#${ji(this.r)}${ji(this.g)}${ji(this.b)}`}function nB(){return`#${ji(this.r)}${ji(this.g)}${ji(this.b)}${ji((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ax(){const t=kf(this.opacity);return`${t===1?"rgb(":"rgba("}${Xi(this.r)}, ${Xi(this.g)}, ${Xi(this.b)}${t===1?")":`, ${t})`}`}function kf(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Xi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ji(t){return t=Xi(t),(t<16?"0":"")+t.toString(16)}function Dx(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Mn(t,e,n,r)}function gT(t){if(t instanceof Mn)return new Mn(t.h,t.s,t.l,t.opacity);if(t instanceof lc||(t=us(t)),!t)return new Mn;if(t instanceof Mn)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,l=s-i,a=(s+i)/2;return l?(e===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-e)/l+2:o=(e-n)/l+4,l/=a<.5?s+i:2-s-i,o*=60):l=a>0&&a<1?0:o,new Mn(o,l,a,t.opacity)}function rB(t,e,n,r){return arguments.length===1?gT(t):new Mn(t,e,n,r??1)}function Mn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}p0(Mn,rB,mT(lc,{brighter(t){return t=t==null?Sf:Math.pow(Sf,t),new Mn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ka:Math.pow(ka,t),new Mn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Vt(op(t>=240?t-240:t+120,i,r),op(t,i,r),op(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Mn(Ox(this.h),qc(this.s),qc(this.l),kf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=kf(this.opacity);return`${t===1?"hsl(":"hsla("}${Ox(this.h)}, ${qc(this.s)*100}%, ${qc(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ox(t){return t=(t||0)%360,t<0?t+360:t}function qc(t){return Math.max(0,Math.min(1,t||0))}function op(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const m0=t=>()=>t;function iB(t,e){return function(n){return t+n*e}}function sB(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function oB(t){return(t=+t)==1?yT:function(e,n){return n-e?sB(e,n,t):m0(isNaN(e)?n:e)}}function yT(t,e){var n=e-t;return n?iB(t,n):m0(isNaN(t)?e:t)}const Cf=function t(e){var n=oB(e);function r(i,s){var o=n((i=ag(i)).r,(s=ag(s)).r),l=n(i.g,s.g),a=n(i.b,s.b),c=yT(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=l(u),i.b=a(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function lB(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function aB(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function cB(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Kl(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(l){for(o=0;o<r;++o)s[o]=i[o](l);return s}}function uB(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function jn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function fB(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Kl(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var cg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lp=new RegExp(cg.source,"g");function dB(t){return function(){return t}}function hB(t){return function(e){return t(e)+""}}function vT(t,e){var n=cg.lastIndex=lp.lastIndex=0,r,i,s,o=-1,l=[],a=[];for(t=t+"",e=e+"";(r=cg.exec(t))&&(i=lp.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,a.push({i:o,x:jn(r,i)})),n=lp.lastIndex;return n<e.length&&(s=e.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?a[0]?hB(a[0].x):dB(e):(e=a.length,function(c){for(var u=0,f;u<e;++u)l[(f=a[u]).i]=f.x(c);return l.join("")})}function Kl(t,e){var n=typeof e,r;return e==null||n==="boolean"?m0(e):(n==="number"?jn:n==="string"?(r=us(e))?(e=r,Cf):vT:e instanceof us?Cf:e instanceof Date?uB:aB(e)?lB:Array.isArray(e)?cB:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?fB:jn)(t,e)}var Px=180/Math.PI,ug={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function wT(t,e,n,r,i,s){var o,l,a;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(a=t*n+e*r)&&(n-=t*a,r-=e*a),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,a/=l),t*r<e*n&&(t=-t,e=-e,a=-a,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Px,skewX:Math.atan(a)*Px,scaleX:o,scaleY:l}}var Yc;function pB(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ug:wT(e.a,e.b,e.c,e.d,e.e,e.f)}function mB(t){return t==null||(Yc||(Yc=document.createElementNS("http://www.w3.org/2000/svg","g")),Yc.setAttribute("transform",t),!(t=Yc.transform.baseVal.consolidate()))?ug:(t=t.matrix,wT(t.a,t.b,t.c,t.d,t.e,t.f))}function xT(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,f,d,h,p){if(c!==f||u!==d){var m=h.push("translate(",null,e,null,n);p.push({i:m-4,x:jn(c,f)},{i:m-2,x:jn(u,d)})}else(f||d)&&h.push("translate("+f+e+d+n)}function o(c,u,f,d){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:jn(c,u)})):u&&f.push(i(f)+"rotate("+u+r)}function l(c,u,f,d){c!==u?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:jn(c,u)}):u&&f.push(i(f)+"skewX("+u+r)}function a(c,u,f,d,h,p){if(c!==f||u!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:jn(c,f)},{i:m-2,x:jn(u,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(c,u){var f=[],d=[];return c=t(c),u=t(u),s(c.translateX,c.translateY,u.translateX,u.translateY,f,d),o(c.rotate,u.rotate,f,d),l(c.skewX,u.skewX,f,d),a(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,d),c=u=null,function(h){for(var p=-1,m=d.length,v;++p<m;)f[(v=d[p]).i]=v.x(h);return f.join("")}}}var gB=xT(pB,"px, ","px)","deg)"),yB=xT(mB,", ",")",")"),vB=1e-12;function Rx(t){return((t=Math.exp(t))+1/t)/2}function wB(t){return((t=Math.exp(t))-1/t)/2}function xB(t){return((t=Math.exp(2*t))-1)/(t+1)}const Ou=function t(e,n,r){function i(s,o){var l=s[0],a=s[1],c=s[2],u=o[0],f=o[1],d=o[2],h=u-l,p=f-a,m=h*h+p*p,v,g;if(m<vB)g=Math.log(d/c)/e,v=function(k){return[l+k*h,a+k*p,c*Math.exp(e*k*g)]};else{var w=Math.sqrt(m),y=(d*d-c*c+r*m)/(2*c*n*w),x=(d*d-c*c-r*m)/(2*d*n*w),S=Math.log(Math.sqrt(y*y+1)-y),C=Math.log(Math.sqrt(x*x+1)-x);g=(C-S)/e,v=function(k){var E=k*g,N=Rx(S),I=c/(n*w)*(N*xB(e*E+S)-wB(S));return[l+I*h,a+I*p,c*N/Rx(e*E+S)]}}return v.duration=g*1e3*e/Math.SQRT2,v}return i.rho=function(s){var o=Math.max(.001,+s),l=o*o,a=l*l;return t(o,l,a)},i}(Math.SQRT2,2,4);var To=0,_l=0,wl=0,ST=1e3,Ef,Al,bf=0,fs=0,Pd=0,Ea=typeof performance=="object"&&performance.now?performance:Date,kT=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function g0(){return fs||(kT(SB),fs=Ea.now()+Pd)}function SB(){fs=0}function Tf(){this._call=this._time=this._next=null}Tf.prototype=CT.prototype={constructor:Tf,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?g0():+n)+(e==null?0:+e),!this._next&&Al!==this&&(Al?Al._next=this:Ef=this,Al=this),this._call=t,this._time=n,fg()},stop:function(){this._call&&(this._call=null,this._time=1/0,fg())}};function CT(t,e,n){var r=new Tf;return r.restart(t,e,n),r}function kB(){g0(),++To;for(var t=Ef,e;t;)(e=fs-t._time)>=0&&t._call.call(void 0,e),t=t._next;--To}function Ix(){fs=(bf=Ea.now())+Pd,To=_l=0;try{kB()}finally{To=0,EB(),fs=0}}function CB(){var t=Ea.now(),e=t-bf;e>ST&&(Pd-=e,bf=t)}function EB(){for(var t,e=Ef,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ef=n);Al=t,fg(r)}function fg(t){if(!To){_l&&(_l=clearTimeout(_l));var e=t-fs;e>24?(t<1/0&&(_l=setTimeout(Ix,t-Ea.now()-Pd)),wl&&(wl=clearInterval(wl))):(wl||(bf=Ea.now(),wl=setInterval(CB,ST)),To=1,kT(Ix))}}function Lx(t,e,n){var r=new Tf;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var bB=Dd("start","end","cancel","interrupt"),TB=[],ET=0,Vx=1,dg=2,Pu=3,Bx=4,hg=5,Ru=6;function Rd(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;MB(t,n,{name:e,index:r,group:i,on:bB,tween:TB,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:ET})}function y0(t,e){var n=Vn(t,e);if(n.state>ET)throw new Error("too late; already scheduled");return n}function or(t,e){var n=Vn(t,e);if(n.state>Pu)throw new Error("too late; already running");return n}function Vn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function MB(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=CT(s,0,n.time);function s(c){n.state=Vx,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,f,d,h;if(n.state!==Vx)return a();for(u in r)if(h=r[u],h.name===n.name){if(h.state===Pu)return Lx(o);h.state===Bx?(h.state=Ru,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete r[u]):+u<e&&(h.state=Ru,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete r[u])}if(Lx(function(){n.state===Pu&&(n.state=Bx,n.timer.restart(l,n.delay,n.time),l(c))}),n.state=dg,n.on.call("start",t,t.__data__,n.index,n.group),n.state===dg){for(n.state=Pu,i=new Array(d=n.tween.length),u=0,f=-1;u<d;++u)(h=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function l(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(a),n.state=hg,1),f=-1,d=i.length;++f<d;)i[f].call(t,u);n.state===hg&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){n.state=Ru,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function Iu(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>dg&&r.state<hg,r.state=Ru,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function NB(t){return this.each(function(){Iu(this,t)})}function _B(t,e){var n,r;return function(){var i=or(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,l=r.length;o<l;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function AB(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=or(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var l={name:e,value:n},a=0,c=i.length;a<c;++a)if(i[a].name===e){i[a]=l;break}a===c&&i.push(l)}s.tween=i}}function DB(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Vn(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?_B:AB)(n,t,e))}function v0(t,e,n){var r=t._id;return t.each(function(){var i=or(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Vn(i,r).value[e]}}function bT(t,e){var n;return(typeof e=="number"?jn:e instanceof us?Cf:(n=us(e))?(e=n,Cf):vT)(t,e)}function OB(t){return function(){this.removeAttribute(t)}}function PB(t){return function(){this.removeAttributeNS(t.space,t.local)}}function RB(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function IB(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function LB(t,e,n){var r,i,s;return function(){var o,l=n(this),a;return l==null?void this.removeAttribute(t):(o=this.getAttribute(t),a=l+"",o===a?null:o===r&&a===i?s:(i=a,s=e(r=o,l)))}}function VB(t,e,n){var r,i,s;return function(){var o,l=n(this),a;return l==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),a=l+"",o===a?null:o===r&&a===i?s:(i=a,s=e(r=o,l)))}}function BB(t,e){var n=Od(t),r=n==="transform"?yB:bT;return this.attrTween(t,typeof e=="function"?(n.local?VB:LB)(n,r,v0(this,"attr."+t,e)):e==null?(n.local?PB:OB)(n):(n.local?IB:RB)(n,r,e))}function zB(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function $B(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function FB(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&$B(t,s)),n}return i._value=e,i}function jB(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&zB(t,s)),n}return i._value=e,i}function HB(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Od(t);return this.tween(n,(r.local?FB:jB)(r,e))}function UB(t,e){return function(){y0(this,t).delay=+e.apply(this,arguments)}}function WB(t,e){return e=+e,function(){y0(this,t).delay=e}}function KB(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?UB:WB)(e,t)):Vn(this.node(),e).delay}function qB(t,e){return function(){or(this,t).duration=+e.apply(this,arguments)}}function YB(t,e){return e=+e,function(){or(this,t).duration=e}}function XB(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?qB:YB)(e,t)):Vn(this.node(),e).duration}function GB(t,e){if(typeof e!="function")throw new Error;return function(){or(this,t).ease=e}}function JB(t){var e=this._id;return arguments.length?this.each(GB(e,t)):Vn(this.node(),e).ease}function QB(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;or(this,t).ease=n}}function ZB(t){if(typeof t!="function")throw new Error;return this.each(QB(this._id,t))}function ez(t){typeof t!="function"&&(t=nT(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=[],a,c=0;c<o;++c)(a=s[c])&&t.call(a,a.__data__,c,s)&&l.push(a);return new Nr(r,this._parents,this._name,this._id)}function tz(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var a=e[l],c=n[l],u=a.length,f=o[l]=new Array(u),d,h=0;h<u;++h)(d=a[h]||c[h])&&(f[h]=d);for(;l<r;++l)o[l]=e[l];return new Nr(o,this._parents,this._name,this._id)}function nz(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function rz(t,e,n){var r,i,s=nz(e)?y0:or;return function(){var o=s(this,t),l=o.on;l!==r&&(i=(r=l).copy()).on(e,n),o.on=i}}function iz(t,e){var n=this._id;return arguments.length<2?Vn(this.node(),n).on.on(t):this.each(rz(n,t,e))}function sz(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function oz(){return this.on("end.remove",sz(this._id))}function lz(t){var e=this._name,n=this._id;typeof t!="function"&&(t=d0(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var l=r[o],a=l.length,c=s[o]=new Array(a),u,f,d=0;d<a;++d)(u=l[d])&&(f=t.call(u,u.__data__,d,l))&&("__data__"in u&&(f.__data__=u.__data__),c[d]=f,Rd(c[d],e,n,d,c,Vn(u,n)));return new Nr(s,this._parents,e,n)}function az(t){var e=this._name,n=this._id;typeof t!="function"&&(t=tT(t));for(var r=this._groups,i=r.length,s=[],o=[],l=0;l<i;++l)for(var a=r[l],c=a.length,u,f=0;f<c;++f)if(u=a[f]){for(var d=t.call(u,u.__data__,f,a),h,p=Vn(u,n),m=0,v=d.length;m<v;++m)(h=d[m])&&Rd(h,e,n,m,d,p);s.push(d),o.push(u)}return new Nr(s,o,e,n)}var cz=oc.prototype.constructor;function uz(){return new cz(this._groups,this._parents)}function fz(t,e){var n,r,i;return function(){var s=bo(this,t),o=(this.style.removeProperty(t),bo(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function TT(t){return function(){this.style.removeProperty(t)}}function dz(t,e,n){var r,i=n+"",s;return function(){var o=bo(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function hz(t,e,n){var r,i,s;return function(){var o=bo(this,t),l=n(this),a=l+"";return l==null&&(a=l=(this.style.removeProperty(t),bo(this,t))),o===a?null:o===r&&a===i?s:(i=a,s=e(r=o,l))}}function pz(t,e){var n,r,i,s="style."+e,o="end."+s,l;return function(){var a=or(this,t),c=a.on,u=a.value[s]==null?l||(l=TT(e)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(o,i=u),a.on=r}}function mz(t,e,n){var r=(t+="")=="transform"?gB:bT;return e==null?this.styleTween(t,fz(t,r)).on("end.style."+t,TT(t)):typeof e=="function"?this.styleTween(t,hz(t,r,v0(this,"style."+t,e))).each(pz(this._id,t)):this.styleTween(t,dz(t,r,e),n).on("end.style."+t,null)}function gz(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function yz(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&gz(t,o,n)),r}return s._value=e,s}function vz(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,yz(t,e,n??""))}function wz(t){return function(){this.textContent=t}}function xz(t){return function(){var e=t(this);this.textContent=e??""}}function Sz(t){return this.tween("text",typeof t=="function"?xz(v0(this,"text",t)):wz(t==null?"":t+""))}function kz(t){return function(e){this.textContent=t.call(this,e)}}function Cz(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&kz(i)),e}return r._value=t,r}function Ez(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Cz(t))}function bz(){for(var t=this._name,e=this._id,n=MT(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,a,c=0;c<l;++c)if(a=o[c]){var u=Vn(a,e);Rd(a,t,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Nr(r,this._parents,t,n)}function Tz(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var l={value:o},a={value:function(){--i===0&&s()}};n.each(function(){var c=or(this,r),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(a)),c.on=e}),i===0&&s()})}var Mz=0;function Nr(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function MT(){return++Mz}var ar=oc.prototype;Nr.prototype={constructor:Nr,select:lz,selectAll:az,selectChild:ar.selectChild,selectChildren:ar.selectChildren,filter:ez,merge:tz,selection:uz,transition:bz,call:ar.call,nodes:ar.nodes,node:ar.node,size:ar.size,empty:ar.empty,each:ar.each,on:iz,attr:BB,attrTween:HB,style:mz,styleTween:vz,text:Sz,textTween:Ez,remove:oz,tween:DB,delay:KB,duration:XB,ease:JB,easeVarying:ZB,end:Tz,[Symbol.iterator]:ar[Symbol.iterator]};function Nz(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var _z={time:null,delay:0,duration:250,ease:Nz};function Az(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Dz(t){var e,n;t instanceof Nr?(e=t._id,t=t._name):(e=MT(),(n=_z).time=g0(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,a,c=0;c<l;++c)(a=o[c])&&Rd(a,t,e,c,o,n||Az(a,e));return new Nr(r,this._parents,t,e)}oc.prototype.interrupt=NB;oc.prototype.transition=Dz;const Xc=t=>()=>t;function Oz(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function gr(t,e,n){this.k=t,this.x=e,this.y=n}gr.prototype={constructor:gr,scale:function(t){return t===1?this:new gr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new gr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Id=new gr(1,0,0);NT.prototype=gr.prototype;function NT(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Id;return t.__zoom}function ap(t){t.stopImmediatePropagation()}function xl(t){t.preventDefault(),t.stopImmediatePropagation()}function Pz(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Rz(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function zx(){return this.__zoom||Id}function Iz(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Lz(){return navigator.maxTouchPoints||"ontouchstart"in this}function Vz(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function _T(){var t=Pz,e=Rz,n=Vz,r=Iz,i=Lz,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,a=Ou,c=Dd("start","zoom","end"),u,f,d,h=500,p=150,m=0,v=10;function g(_){_.property("__zoom",zx).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",I).filter(i).on("touchstart.zoom",O).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",$).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(_,V,P,R){var T=_.selection?_.selection():_;T.property("__zoom",zx),_!==T?S(_,V,P,R):T.interrupt().each(function(){C(this,arguments).event(R).start().zoom(null,typeof V=="function"?V.apply(this,arguments):V).end()})},g.scaleBy=function(_,V,P,R){g.scaleTo(_,function(){var T=this.__zoom.k,A=typeof V=="function"?V.apply(this,arguments):V;return T*A},P,R)},g.scaleTo=function(_,V,P,R){g.transform(_,function(){var T=e.apply(this,arguments),A=this.__zoom,D=P==null?x(T):typeof P=="function"?P.apply(this,arguments):P,B=A.invert(D),z=typeof V=="function"?V.apply(this,arguments):V;return n(y(w(A,z),D,B),T,o)},P,R)},g.translateBy=function(_,V,P,R){g.transform(_,function(){return n(this.__zoom.translate(typeof V=="function"?V.apply(this,arguments):V,typeof P=="function"?P.apply(this,arguments):P),e.apply(this,arguments),o)},null,R)},g.translateTo=function(_,V,P,R,T){g.transform(_,function(){var A=e.apply(this,arguments),D=this.__zoom,B=R==null?x(A):typeof R=="function"?R.apply(this,arguments):R;return n(Id.translate(B[0],B[1]).scale(D.k).translate(typeof V=="function"?-V.apply(this,arguments):-V,typeof P=="function"?-P.apply(this,arguments):-P),A,o)},R,T)};function w(_,V){return V=Math.max(s[0],Math.min(s[1],V)),V===_.k?_:new gr(V,_.x,_.y)}function y(_,V,P){var R=V[0]-P[0]*_.k,T=V[1]-P[1]*_.k;return R===_.x&&T===_.y?_:new gr(_.k,R,T)}function x(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function S(_,V,P,R){_.on("start.zoom",function(){C(this,arguments).event(R).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(R).end()}).tween("zoom",function(){var T=this,A=arguments,D=C(T,A).event(R),B=e.apply(T,A),z=P==null?x(B):typeof P=="function"?P.apply(T,A):P,U=Math.max(B[1][0]-B[0][0],B[1][1]-B[0][1]),H=T.__zoom,X=typeof V=="function"?V.apply(T,A):V,G=a(H.invert(z).concat(U/H.k),X.invert(z).concat(U/X.k));return function(Q){if(Q===1)Q=X;else{var W=G(Q),ee=U/W[2];Q=new gr(ee,z[0]-W[0]*ee,z[1]-W[1]*ee)}D.zoom(null,Q)}})}function C(_,V,P){return!P&&_.__zooming||new k(_,V)}function k(_,V){this.that=_,this.args=V,this.active=0,this.sourceEvent=null,this.extent=e.apply(_,V),this.taps=0}k.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,V){return this.mouse&&_!=="mouse"&&(this.mouse[1]=V.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=V.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=V.invert(this.touch1[0])),this.that.__zoom=V,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var V=Wt(this.that).datum();c.call(_,this.that,new Oz(_,{sourceEvent:this.sourceEvent,target:g,transform:this.that.__zoom,dispatch:c}),V)}};function E(_,...V){if(!t.apply(this,arguments))return;var P=C(this,V).event(_),R=this.__zoom,T=Math.max(s[0],Math.min(s[1],R.k*Math.pow(2,r.apply(this,arguments)))),A=bn(_);if(P.wheel)(P.mouse[0][0]!==A[0]||P.mouse[0][1]!==A[1])&&(P.mouse[1]=R.invert(P.mouse[0]=A)),clearTimeout(P.wheel);else{if(R.k===T)return;P.mouse=[A,R.invert(A)],Iu(this),P.start()}xl(_),P.wheel=setTimeout(D,p),P.zoom("mouse",n(y(w(R,T),P.mouse[0],P.mouse[1]),P.extent,o));function D(){P.wheel=null,P.end()}}function N(_,...V){if(d||!t.apply(this,arguments))return;var P=_.currentTarget,R=C(this,V,!0).event(_),T=Wt(_.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",U,!0),A=bn(_,P),D=_.clientX,B=_.clientY;dT(_.view),ap(_),R.mouse=[A,this.__zoom.invert(A)],Iu(this),R.start();function z(H){if(xl(H),!R.moved){var X=H.clientX-D,G=H.clientY-B;R.moved=X*X+G*G>m}R.event(H).zoom("mouse",n(y(R.that.__zoom,R.mouse[0]=bn(H,P),R.mouse[1]),R.extent,o))}function U(H){T.on("mousemove.zoom mouseup.zoom",null),hT(H.view,R.moved),xl(H),R.event(H).end()}}function I(_,...V){if(t.apply(this,arguments)){var P=this.__zoom,R=bn(_.changedTouches?_.changedTouches[0]:_,this),T=P.invert(R),A=P.k*(_.shiftKey?.5:2),D=n(y(w(P,A),R,T),e.apply(this,V),o);xl(_),l>0?Wt(this).transition().duration(l).call(S,D,R,_):Wt(this).call(g.transform,D,R,_)}}function O(_,...V){if(t.apply(this,arguments)){var P=_.touches,R=P.length,T=C(this,V,_.changedTouches.length===R).event(_),A,D,B,z;for(ap(_),D=0;D<R;++D)B=P[D],z=bn(B,this),z=[z,this.__zoom.invert(z),B.identifier],T.touch0?!T.touch1&&T.touch0[2]!==z[2]&&(T.touch1=z,T.taps=0):(T.touch0=z,A=!0,T.taps=1+!!u);u&&(u=clearTimeout(u)),A&&(T.taps<2&&(f=z[0],u=setTimeout(function(){u=null},h)),Iu(this),T.start())}}function L(_,...V){if(this.__zooming){var P=C(this,V).event(_),R=_.changedTouches,T=R.length,A,D,B,z;for(xl(_),A=0;A<T;++A)D=R[A],B=bn(D,this),P.touch0&&P.touch0[2]===D.identifier?P.touch0[0]=B:P.touch1&&P.touch1[2]===D.identifier&&(P.touch1[0]=B);if(D=P.that.__zoom,P.touch1){var U=P.touch0[0],H=P.touch0[1],X=P.touch1[0],G=P.touch1[1],Q=(Q=X[0]-U[0])*Q+(Q=X[1]-U[1])*Q,W=(W=G[0]-H[0])*W+(W=G[1]-H[1])*W;D=w(D,Math.sqrt(Q/W)),B=[(U[0]+X[0])/2,(U[1]+X[1])/2],z=[(H[0]+G[0])/2,(H[1]+G[1])/2]}else if(P.touch0)B=P.touch0[0],z=P.touch0[1];else return;P.zoom("touch",n(y(D,B,z),P.extent,o))}}function $(_,...V){if(this.__zooming){var P=C(this,V).event(_),R=_.changedTouches,T=R.length,A,D;for(ap(_),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),A=0;A<T;++A)D=R[A],P.touch0&&P.touch0[2]===D.identifier?delete P.touch0:P.touch1&&P.touch1[2]===D.identifier&&delete P.touch1;if(P.touch1&&!P.touch0&&(P.touch0=P.touch1,delete P.touch1),P.touch0)P.touch0[1]=this.__zoom.invert(P.touch0[0]);else if(P.end(),P.taps===2&&(D=bn(D,this),Math.hypot(f[0]-D[0],f[1]-D[1])<v)){var B=Wt(this).on("dblclick.zoom");B&&B.apply(this,arguments)}}}return g.wheelDelta=function(_){return arguments.length?(r=typeof _=="function"?_:Xc(+_),g):r},g.filter=function(_){return arguments.length?(t=typeof _=="function"?_:Xc(!!_),g):t},g.touchable=function(_){return arguments.length?(i=typeof _=="function"?_:Xc(!!_),g):i},g.extent=function(_){return arguments.length?(e=typeof _=="function"?_:Xc([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),g):e},g.scaleExtent=function(_){return arguments.length?(s[0]=+_[0],s[1]=+_[1],g):[s[0],s[1]]},g.translateExtent=function(_){return arguments.length?(o[0][0]=+_[0][0],o[1][0]=+_[1][0],o[0][1]=+_[0][1],o[1][1]=+_[1][1],g):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},g.constrain=function(_){return arguments.length?(n=_,g):n},g.duration=function(_){return arguments.length?(l=+_,g):l},g.interpolate=function(_){return arguments.length?(a=_,g):a},g.on=function(){var _=c.on.apply(c,arguments);return _===c?g:_},g.clickDistance=function(_){return arguments.length?(m=(_=+_)*_,g):Math.sqrt(m)},g.tapDistance=function(_){return arguments.length?(v=+_,g):v},g}const Zn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:r}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},ba=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],AT=["Enter"," ","Escape"],DT={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:e,y:n})=>`Moved selected node ${t}. New position, x: ${e}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Mo;(function(t){t.Strict="strict",t.Loose="loose"})(Mo||(Mo={}));var Gi;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Gi||(Gi={}));var Ta;(function(t){t.Partial="partial",t.Full="full"})(Ta||(Ta={}));const OT={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var qr;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(qr||(qr={}));var Mf;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Mf||(Mf={}));var J;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(J||(J={}));const $x={[J.Left]:J.Right,[J.Right]:J.Left,[J.Top]:J.Bottom,[J.Bottom]:J.Top};function PT(t){return t===null?null:t?"valid":"invalid"}const RT=t=>"id"in t&&"source"in t&&"target"in t,Bz=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),w0=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),ac=(t,e=[0,0])=>{const{width:n,height:r}=Dr(t),i=t.origin??e,s=n*i[0],o=r*i[1];return{x:t.position.x-s,y:t.position.y-o}},zz=(t,e={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,i)=>{const s=typeof i=="string";let o=!e.nodeLookup&&!s?i:void 0;e.nodeLookup&&(o=s?e.nodeLookup.get(i):w0(i)?i:e.nodeLookup.get(i.id));const l=o?Nf(o,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Ld(r,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Vd(n)},cc=(t,e={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return t.forEach(i=>{(e.filter===void 0||e.filter(i))&&(n=Ld(n,Nf(i)),r=!0)}),r?Vd(n):{x:0,y:0,width:0,height:0}},x0=(t,e,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const l={...fc(e,[n,r,i]),width:e.width/i,height:e.height/i},a=[];for(const c of t.values()){const{measured:u,selectable:f=!0,hidden:d=!1}=c;if(o&&!f||d)continue;const h=u.width??c.width??c.initialWidth??null,p=u.height??c.height??c.initialHeight??null,m=Ma(l,_o(c)),v=(h??0)*(p??0),g=s&&m>0;(!c.internals.handleBounds||g||m>=v||c.dragging)&&a.push(c)}return a},$z=(t,e)=>{const n=new Set;return t.forEach(r=>{n.add(r.id)}),e.filter(r=>n.has(r.source)||n.has(r.target))};function Fz(t,e){const n=new Map,r=e!=null&&e.nodes?new Set(e.nodes.map(i=>i.id)):null;return t.forEach(i=>{i.measured.width&&i.measured.height&&((e==null?void 0:e.includeHiddenNodes)||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function jz({nodes:t,width:e,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(t.size===0)return Promise.resolve(!0);const l=Fz(t,o),a=cc(l),c=S0(a,e,n,(o==null?void 0:o.minZoom)??i,(o==null?void 0:o.maxZoom)??s,(o==null?void 0:o.padding)??.1);return await r.setViewport(c,{duration:o==null?void 0:o.duration,ease:o==null?void 0:o.ease,interpolate:o==null?void 0:o.interpolate}),Promise.resolve(!0)}function IT({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(t),l=o.parentId?n.get(o.parentId):void 0,{x:a,y:c}=l?l.internals.positionAbsolute:{x:0,y:0},u=o.origin??r;let f=o.extent||i;if(o.extent==="parent"&&!o.expandParent)if(!l)s==null||s("005",Zn.error005());else{const h=l.measured.width,p=l.measured.height;h&&p&&(f=[[a,c],[a+h,c+p]])}else l&&Ao(o.extent)&&(f=[[o.extent[0][0]+a,o.extent[0][1]+c],[o.extent[1][0]+a,o.extent[1][1]+c]]);const d=Ao(f)?ds(e,f,o.measured):e;return(o.measured.width===void 0||o.measured.height===void 0)&&(s==null||s("015",Zn.error015())),{position:{x:d.x-a+(o.measured.width??0)*u[0],y:d.y-c+(o.measured.height??0)*u[1]},positionAbsolute:d}}async function Hz({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(t.map(d=>d.id)),o=[];for(const d of n){if(d.deletable===!1)continue;const h=s.has(d.id),p=!h&&d.parentId&&o.find(m=>m.id===d.parentId);(h||p)&&o.push(d)}const l=new Set(e.map(d=>d.id)),a=r.filter(d=>d.deletable!==!1),u=$z(o,a);for(const d of a)l.has(d.id)&&!u.find(p=>p.id===d.id)&&u.push(d);if(!i)return{edges:u,nodes:o};const f=await i({nodes:o,edges:u});return typeof f=="boolean"?f?{edges:u,nodes:o}:{edges:[],nodes:[]}:f}const No=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),ds=(t={x:0,y:0},e,n)=>({x:No(t.x,e[0][0],e[1][0]-((n==null?void 0:n.width)??0)),y:No(t.y,e[0][1],e[1][1]-((n==null?void 0:n.height)??0))});function LT(t,e,n){const{width:r,height:i}=Dr(n),{x:s,y:o}=n.internals.positionAbsolute;return ds(t,[[s,o],[s+r,o+i]],e)}const Fx=(t,e,n)=>t<e?No(Math.abs(t-e),1,e)/e:t>n?-No(Math.abs(t-n),1,e)/e:0,VT=(t,e,n=15,r=40)=>{const i=Fx(t.x,r,e.width-r)*n,s=Fx(t.y,r,e.height-r)*n;return[i,s]},Ld=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),pg=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),Vd=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),_o=(t,e=[0,0])=>{var i,s;const{x:n,y:r}=w0(t)?t.internals.positionAbsolute:ac(t,e);return{x:n,y:r,width:((i=t.measured)==null?void 0:i.width)??t.width??t.initialWidth??0,height:((s=t.measured)==null?void 0:s.height)??t.height??t.initialHeight??0}},Nf=(t,e=[0,0])=>{var i,s;const{x:n,y:r}=w0(t)?t.internals.positionAbsolute:ac(t,e);return{x:n,y:r,x2:n+(((i=t.measured)==null?void 0:i.width)??t.width??t.initialWidth??0),y2:r+(((s=t.measured)==null?void 0:s.height)??t.height??t.initialHeight??0)}},BT=(t,e)=>Vd(Ld(pg(t),pg(e))),Ma=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},jx=t=>An(t.width)&&An(t.height)&&An(t.x)&&An(t.y),An=t=>!isNaN(t)&&isFinite(t),Uz=(t,e)=>{},uc=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),fc=({x:t,y:e},[n,r,i],s=!1,o=[1,1])=>{const l={x:(t-n)/i,y:(e-r)/i};return s?uc(l,o):l},_f=({x:t,y:e},[n,r,i])=>({x:t*i+n,y:e*i+r});function Ns(t,e){if(typeof t=="number")return Math.floor((e-e/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(n)}if(typeof t=="string"&&t.endsWith("%")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(e*n*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Wz(t,e,n){if(typeof t=="string"||typeof t=="number"){const r=Ns(t,n),i=Ns(t,e);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof t=="object"){const r=Ns(t.top??t.y??0,n),i=Ns(t.bottom??t.y??0,n),s=Ns(t.left??t.x??0,e),o=Ns(t.right??t.x??0,e);return{top:r,right:o,bottom:i,left:s,x:s+o,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Kz(t,e,n,r,i,s){const{x:o,y:l}=_f(t,[e,n,r]),{x:a,y:c}=_f({x:t.x+t.width,y:t.y+t.height},[e,n,r]),u=i-a,f=s-c;return{left:Math.floor(o),top:Math.floor(l),right:Math.floor(u),bottom:Math.floor(f)}}const S0=(t,e,n,r,i,s)=>{const o=Wz(s,e,n),l=(e-o.x)/t.width,a=(n-o.y)/t.height,c=Math.min(l,a),u=No(c,r,i),f=t.x+t.width/2,d=t.y+t.height/2,h=e/2-f*u,p=n/2-d*u,m=Kz(t,h,p,u,e,n),v={left:Math.min(m.left-o.left,0),top:Math.min(m.top-o.top,0),right:Math.min(m.right-o.right,0),bottom:Math.min(m.bottom-o.bottom,0)};return{x:h-v.left+v.right,y:p-v.top+v.bottom,zoom:u}},Na=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0};function Ao(t){return t!=null&&t!=="parent"}function Dr(t){var e,n;return{width:((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth??0,height:((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight??0}}function zT(t){var e,n;return(((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth)!==void 0&&(((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight)!==void 0}function $T(t,e={width:0,height:0},n,r,i){const s={...t},o=r.get(n);if(o){const l=o.origin||i;s.x+=o.internals.positionAbsolute.x-(e.width??0)*l[0],s.y+=o.internals.positionAbsolute.y-(e.height??0)*l[1]}return s}function Hx(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function qz(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}}function Yz(t){return{...DT,...t||{}}}function ql(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=Dn(t),l=fc({x:s-((i==null?void 0:i.left)??0),y:o-((i==null?void 0:i.top)??0)},r),{x:a,y:c}=n?uc(l,e):l;return{xSnapped:a,ySnapped:c,...l}}const k0=t=>({width:t.offsetWidth,height:t.offsetHeight}),FT=t=>{var e;return((e=t==null?void 0:t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},Xz=["INPUT","SELECT","TEXTAREA"];function jT(t){var r,i;const e=((i=(r=t.composedPath)==null?void 0:r.call(t))==null?void 0:i[0])||t.target;return(e==null?void 0:e.nodeType)!==1?!1:Xz.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const HT=t=>"clientX"in t,Dn=(t,e)=>{var s,o;const n=HT(t),r=n?t.clientX:(s=t.touches)==null?void 0:s[0].clientX,i=n?t.clientY:(o=t.touches)==null?void 0:o[0].clientY;return{x:r-((e==null?void 0:e.left)??0),y:i-((e==null?void 0:e.top)??0)}},Ux=(t,e,n,r,i)=>{const s=e.querySelectorAll(`.${t}`);return!s||!s.length?null:Array.from(s).map(o=>{const l=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:t,nodeId:i,position:o.getAttribute("data-handlepos"),x:(l.left-n.left)/r,y:(l.top-n.top)/r,...k0(o)}})};function UT({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:l}){const a=t*.125+i*.375+o*.375+n*.125,c=e*.125+s*.375+l*.375+r*.125,u=Math.abs(a-t),f=Math.abs(c-e);return[a,c,u,f]}function Gc(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function Wx({pos:t,x1:e,y1:n,x2:r,y2:i,c:s}){switch(t){case J.Left:return[e-Gc(e-r,s),n];case J.Right:return[e+Gc(r-e,s),n];case J.Top:return[e,n-Gc(n-i,s)];case J.Bottom:return[e,n+Gc(i-n,s)]}}function WT({sourceX:t,sourceY:e,sourcePosition:n=J.Bottom,targetX:r,targetY:i,targetPosition:s=J.Top,curvature:o=.25}){const[l,a]=Wx({pos:n,x1:t,y1:e,x2:r,y2:i,c:o}),[c,u]=Wx({pos:s,x1:r,y1:i,x2:t,y2:e,c:o}),[f,d,h,p]=UT({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:l,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${t},${e} C${l},${a} ${c},${u} ${r},${i}`,f,d,h,p]}function KT({sourceX:t,sourceY:e,targetX:n,targetY:r}){const i=Math.abs(n-t)/2,s=n<t?n+i:n-i,o=Math.abs(r-e)/2,l=r<e?r+o:r-o;return[s,l,i,o]}function Gz({sourceNode:t,targetNode:e,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1,zIndexMode:s="basic"}){if(s==="manual")return r;const o=i&&n?r+1e3:r,l=Math.max(t.parentId||i&&t.selected?t.internals.z:0,e.parentId||i&&e.selected?e.internals.z:0);return o+l}function Jz({sourceNode:t,targetNode:e,width:n,height:r,transform:i}){const s=Ld(Nf(t),Nf(e));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return Ma(o,Vd(s))>0}const Qz=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`xy-edge__${t}${e||""}-${n}${r||""}`,Zz=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),e$=(t,e,n={})=>{if(!t.source||!t.target)return e;const r=n.getEdgeId||Qz;let i;return RT(t)?i={...t}:i={...t,id:r(t)},Zz(i,e)?e:(i.sourceHandle===null&&delete i.sourceHandle,i.targetHandle===null&&delete i.targetHandle,e.concat(i))};function qT({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[i,s,o,l]=KT({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,i,s,o,l]}const Kx={[J.Left]:{x:-1,y:0},[J.Right]:{x:1,y:0},[J.Top]:{x:0,y:-1},[J.Bottom]:{x:0,y:1}},t$=({source:t,sourcePosition:e=J.Bottom,target:n})=>e===J.Left||e===J.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},qx=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function n$({source:t,sourcePosition:e=J.Bottom,target:n,targetPosition:r=J.Top,center:i,offset:s,stepPosition:o}){const l=Kx[e],a=Kx[r],c={x:t.x+l.x*s,y:t.y+l.y*s},u={x:n.x+a.x*s,y:n.y+a.y*s},f=t$({source:c,sourcePosition:e,target:u}),d=f.x!==0?"x":"y",h=f[d];let p=[],m,v;const g={x:0,y:0},w={x:0,y:0},[,,y,x]=KT({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(l[d]*a[d]===-1){d==="x"?(m=i.x??c.x+(u.x-c.x)*o,v=i.y??(c.y+u.y)/2):(m=i.x??(c.x+u.x)/2,v=i.y??c.y+(u.y-c.y)*o);const C=[{x:m,y:c.y},{x:m,y:u.y}],k=[{x:c.x,y:v},{x:u.x,y:v}];l[d]===h?p=d==="x"?C:k:p=d==="x"?k:C}else{const C=[{x:c.x,y:u.y}],k=[{x:u.x,y:c.y}];if(d==="x"?p=l.x===h?k:C:p=l.y===h?C:k,e===r){const L=Math.abs(t[d]-n[d]);if(L<=s){const $=Math.min(s-1,s-L);l[d]===h?g[d]=(c[d]>t[d]?-1:1)*$:w[d]=(u[d]>n[d]?-1:1)*$}}if(e!==r){const L=d==="x"?"y":"x",$=l[d]===a[L],_=c[L]>u[L],V=c[L]<u[L];(l[d]===1&&(!$&&_||$&&V)||l[d]!==1&&(!$&&V||$&&_))&&(p=d==="x"?C:k)}const E={x:c.x+g.x,y:c.y+g.y},N={x:u.x+w.x,y:u.y+w.y},I=Math.max(Math.abs(E.x-p[0].x),Math.abs(N.x-p[0].x)),O=Math.max(Math.abs(E.y-p[0].y),Math.abs(N.y-p[0].y));I>=O?(m=(E.x+N.x)/2,v=p[0].y):(m=p[0].x,v=(E.y+N.y)/2)}return[[t,{x:c.x+g.x,y:c.y+g.y},...p,{x:u.x+w.x,y:u.y+w.y},n],m,v,y,x]}function r$(t,e,n,r){const i=Math.min(qx(t,e)/2,qx(e,n)/2,r),{x:s,y:o}=e;if(t.x===s&&s===n.x||t.y===o&&o===n.y)return`L${s} ${o}`;if(t.y===o){const c=t.x<n.x?-1:1,u=t.y<n.y?1:-1;return`L ${s+i*c},${o}Q ${s},${o} ${s},${o+i*u}`}const l=t.x<n.x?1:-1,a=t.y<n.y?-1:1;return`L ${s},${o+i*a}Q ${s},${o} ${s+i*l},${o}`}function mg({sourceX:t,sourceY:e,sourcePosition:n=J.Bottom,targetX:r,targetY:i,targetPosition:s=J.Top,borderRadius:o=5,centerX:l,centerY:a,offset:c=20,stepPosition:u=.5}){const[f,d,h,p,m]=n$({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:l,y:a},offset:c,stepPosition:u});return[f.reduce((g,w,y)=>{let x="";return y>0&&y<f.length-1?x=r$(f[y-1],w,f[y+1],o):x=`${y===0?"M":"L"}${w.x} ${w.y}`,g+=x,g},""),d,h,p,m]}function Yx(t){var e;return t&&!!(t.internals.handleBounds||(e=t.handles)!=null&&e.length)&&!!(t.measured.width||t.width||t.initialWidth)}function i$(t){var f;const{sourceNode:e,targetNode:n}=t;if(!Yx(e)||!Yx(n))return null;const r=e.internals.handleBounds||Xx(e.handles),i=n.internals.handleBounds||Xx(n.handles),s=Gx((r==null?void 0:r.source)??[],t.sourceHandle),o=Gx(t.connectionMode===Mo.Strict?(i==null?void 0:i.target)??[]:((i==null?void 0:i.target)??[]).concat((i==null?void 0:i.source)??[]),t.targetHandle);if(!s||!o)return(f=t.onError)==null||f.call(t,"008",Zn.error008(s?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const l=(s==null?void 0:s.position)||J.Bottom,a=(o==null?void 0:o.position)||J.Top,c=hs(e,s,l),u=hs(n,o,a);return{sourceX:c.x,sourceY:c.y,targetX:u.x,targetY:u.y,sourcePosition:l,targetPosition:a}}function Xx(t){if(!t)return null;const e=[],n=[];for(const r of t)r.width=r.width??1,r.height=r.height??1,r.type==="source"?e.push(r):r.type==="target"&&n.push(r);return{source:e,target:n}}function hs(t,e,n=J.Left,r=!1){const i=((e==null?void 0:e.x)??0)+t.internals.positionAbsolute.x,s=((e==null?void 0:e.y)??0)+t.internals.positionAbsolute.y,{width:o,height:l}=e??Dr(t);if(r)return{x:i+o/2,y:s+l/2};switch((e==null?void 0:e.position)??n){case J.Top:return{x:i+o/2,y:s};case J.Right:return{x:i+o,y:s+l/2};case J.Bottom:return{x:i+o/2,y:s+l};case J.Left:return{x:i,y:s+l/2}}}function Gx(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function gg(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`:""}function s$(t,{id:e,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return t.reduce((o,l)=>([l.markerStart||r,l.markerEnd||i].forEach(a=>{if(a&&typeof a=="object"){const c=gg(a,e);s.has(c)||(o.push({id:c,color:a.color||n,...a}),s.add(c))}}),o),[]).sort((o,l)=>o.id.localeCompare(l.id))}const YT=1e3,o$=10,C0={nodeOrigin:[0,0],nodeExtent:ba,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},l$={...C0,checkEquality:!0};function E0(t,e){const n={...t};for(const r in e)e[r]!==void 0&&(n[r]=e[r]);return n}function a$(t,e,n){const r=E0(C0,n);for(const i of t.values())if(i.parentId)T0(i,t,e,r);else{const s=ac(i,r.nodeOrigin),o=Ao(i.extent)?i.extent:r.nodeExtent,l=ds(s,o,Dr(i));i.internals.positionAbsolute=l}}function c$(t,e){if(!t.handles)return t.measured?e==null?void 0:e.internals.handleBounds:void 0;const n=[],r=[];for(const i of t.handles){const s={id:i.id,width:i.width??1,height:i.height??1,nodeId:t.id,x:i.x,y:i.y,position:i.position,type:i.type};i.type==="source"?n.push(s):i.type==="target"&&r.push(s)}return{source:n,target:r}}function b0(t){return t==="manual"}function yg(t,e,n,r={}){var c,u;const i=E0(l$,r),s={i:0},o=new Map(e),l=i!=null&&i.elevateNodesOnSelect&&!b0(i.zIndexMode)?YT:0;let a=t.length>0;e.clear(),n.clear();for(const f of t){let d=o.get(f.id);if(i.checkEquality&&f===(d==null?void 0:d.internals.userNode))e.set(f.id,d);else{const h=ac(f,i.nodeOrigin),p=Ao(f.extent)?f.extent:i.nodeExtent,m=ds(h,p,Dr(f));d={...i.defaults,...f,measured:{width:(c=f.measured)==null?void 0:c.width,height:(u=f.measured)==null?void 0:u.height},internals:{positionAbsolute:m,handleBounds:c$(f,d),z:XT(f,l,i.zIndexMode),userNode:f}},e.set(f.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(a=!1),f.parentId&&T0(d,e,n,r,s)}return a}function u$(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function T0(t,e,n,r,i){const{elevateNodesOnSelect:s,nodeOrigin:o,nodeExtent:l,zIndexMode:a}=E0(C0,r),c=t.parentId,u=e.get(c);if(!u){console.warn(`Parent node ${c} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}u$(t,n),i&&!u.parentId&&u.internals.rootParentIndex===void 0&&a==="auto"&&(u.internals.rootParentIndex=++i.i,u.internals.z=u.internals.z+i.i*o$),i&&u.internals.rootParentIndex!==void 0&&(i.i=u.internals.rootParentIndex);const f=s&&!b0(a)?YT:0,{x:d,y:h,z:p}=f$(t,u,o,l,f,a),{positionAbsolute:m}=t.internals,v=d!==m.x||h!==m.y;(v||p!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:v?{x:d,y:h}:m,z:p}})}function XT(t,e,n){const r=An(t.zIndex)?t.zIndex:0;return b0(n)?r:r+(t.selected?e:0)}function f$(t,e,n,r,i,s){const{x:o,y:l}=e.internals.positionAbsolute,a=Dr(t),c=ac(t,n),u=Ao(t.extent)?ds(c,t.extent,a):c;let f=ds({x:o+u.x,y:l+u.y},r,a);t.extent==="parent"&&(f=LT(f,a,e));const d=XT(t,i,s),h=e.internals.z??0;return{x:f.x,y:f.y,z:h>=d?h+1:d}}function M0(t,e,n,r=[0,0]){var o;const i=[],s=new Map;for(const l of t){const a=e.get(l.parentId);if(!a)continue;const c=((o=s.get(l.parentId))==null?void 0:o.expandedRect)??_o(a),u=BT(c,l.rect);s.set(l.parentId,{expandedRect:u,parent:a})}return s.size>0&&s.forEach(({expandedRect:l,parent:a},c)=>{var y;const u=a.internals.positionAbsolute,f=Dr(a),d=a.origin??r,h=l.x<u.x?Math.round(Math.abs(u.x-l.x)):0,p=l.y<u.y?Math.round(Math.abs(u.y-l.y)):0,m=Math.max(f.width,Math.round(l.width)),v=Math.max(f.height,Math.round(l.height)),g=(m-f.width)*d[0],w=(v-f.height)*d[1];(h>0||p>0||g||w)&&(i.push({id:c,type:"position",position:{x:a.position.x-h+g,y:a.position.y-p+w}}),(y=n.get(c))==null||y.forEach(x=>{t.some(S=>S.id===x.id)||i.push({id:x.id,type:"position",position:{x:x.position.x+h,y:x.position.y+p}})})),(f.width<l.width||f.height<l.height||h||p)&&i.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:m+(h?d[0]*h-g:0),height:v+(p?d[1]*p-w:0)}})}),i}function d$(t,e,n,r,i,s,o){const l=r==null?void 0:r.querySelector(".xyflow__viewport");let a=!1;if(!l)return{changes:[],updatedInternals:a};const c=[],u=window.getComputedStyle(l),{m22:f}=new window.DOMMatrixReadOnly(u.transform),d=[];for(const h of t.values()){const p=e.get(h.id);if(!p)continue;if(p.hidden){e.set(p.id,{...p,internals:{...p.internals,handleBounds:void 0}}),a=!0;continue}const m=k0(h.nodeElement),v=p.measured.width!==m.width||p.measured.height!==m.height;if(!!(m.width&&m.height&&(v||!p.internals.handleBounds||h.force))){const w=h.nodeElement.getBoundingClientRect(),y=Ao(p.extent)?p.extent:s;let{positionAbsolute:x}=p.internals;p.parentId&&p.extent==="parent"?x=LT(x,m,e.get(p.parentId)):y&&(x=ds(x,y,m));const S={...p,measured:m,internals:{...p.internals,positionAbsolute:x,handleBounds:{source:Ux("source",h.nodeElement,w,f,p.id),target:Ux("target",h.nodeElement,w,f,p.id)}}};e.set(p.id,S),p.parentId&&T0(S,e,n,{nodeOrigin:i,zIndexMode:o}),a=!0,v&&(c.push({id:p.id,type:"dimensions",dimensions:m}),p.expandParent&&p.parentId&&d.push({id:p.id,parentId:p.parentId,rect:_o(S,i)}))}}if(d.length>0){const h=M0(d,e,n,i);c.push(...h)}return{changes:c,updatedInternals:a}}async function h$({delta:t,panZoom:e,transform:n,translateExtent:r,width:i,height:s}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const o=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[i,s]],r),l=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(l)}function Jx(t,e,n,r,i,s){let o=i;const l=r.get(o)||new Map;r.set(o,l.set(n,e)),o=`${i}-${t}`;const a=r.get(o)||new Map;if(r.set(o,a.set(n,e)),s){o=`${i}-${t}-${s}`;const c=r.get(o)||new Map;r.set(o,c.set(n,e))}}function GT(t,e,n){t.clear(),e.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:l=null}=r,a={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:l},c=`${i}-${o}--${s}-${l}`,u=`${s}-${l}--${i}-${o}`;Jx("source",a,u,t,i,o),Jx("target",a,c,t,s,l),e.set(r.id,r)}}function JT(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:JT(n,e):!1}function Qx(t,e,n){var i;let r=t;do{if((i=r==null?void 0:r.matches)!=null&&i.call(r,e))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function p$(t,e,n,r){const i=new Map;for(const[s,o]of t)if((o.selected||o.id===r)&&(!o.parentId||!JT(o,t))&&(o.draggable||e&&typeof o.draggable>"u")){const l=t.get(s);l&&i.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return i}function cp({nodeId:t,dragItems:e,nodeLookup:n,dragging:r=!0}){var o,l,a;const i=[];for(const[c,u]of e){const f=(o=n.get(c))==null?void 0:o.internals.userNode;f&&i.push({...f,position:u.position,dragging:r})}if(!t)return[i[0],i];const s=(l=n.get(t))==null?void 0:l.internals.userNode;return[s?{...s,position:((a=e.get(t))==null?void 0:a.position)||s.position,dragging:r}:i[0],i]}function m$({dragItems:t,snapGrid:e,x:n,y:r}){const i=t.values().next().value;if(!i)return null;const s={x:n-i.distance.x,y:r-i.distance.y},o=uc(s,e);return{x:o.x-s.x,y:o.y-s.y}}function g$({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,l=new Map,a=!1,c={x:0,y:0},u=null,f=!1,d=null,h=!1,p=!1,m=null;function v({noDragClassName:w,handleSelector:y,domNode:x,isSelectable:S,nodeId:C,nodeClickDistance:k=0}){d=Wt(x);function E({x:L,y:$}){const{nodeLookup:_,nodeExtent:V,snapGrid:P,snapToGrid:R,nodeOrigin:T,onNodeDrag:A,onSelectionDrag:D,onError:B,updateNodePositions:z}=e();s={x:L,y:$};let U=!1;const H=l.size>1,X=H&&V?pg(cc(l)):null,G=H&&R?m$({dragItems:l,snapGrid:P,x:L,y:$}):null;for(const[Q,W]of l){if(!_.has(Q))continue;let ee={x:L-W.distance.x,y:$-W.distance.y};R&&(ee=G?{x:Math.round(ee.x+G.x),y:Math.round(ee.y+G.y)}:uc(ee,P));let ce=null;if(H&&V&&!W.extent&&X){const{positionAbsolute:te}=W.internals,ye=te.x-X.x+V[0][0],ke=te.x+W.measured.width-X.x2+V[1][0],ge=te.y-X.y+V[0][1],ht=te.y+W.measured.height-X.y2+V[1][1];ce=[[ye,ge],[ke,ht]]}const{position:se,positionAbsolute:re}=IT({nodeId:Q,nextPosition:ee,nodeLookup:_,nodeExtent:ce||V,nodeOrigin:T,onError:B});U=U||W.position.x!==se.x||W.position.y!==se.y,W.position=se,W.internals.positionAbsolute=re}if(p=p||U,!!U&&(z(l,!0),m&&(r||A||!C&&D))){const[Q,W]=cp({nodeId:C,dragItems:l,nodeLookup:_});r==null||r(m,l,Q,W),A==null||A(m,Q,W),C||D==null||D(m,W)}}async function N(){if(!u)return;const{transform:L,panBy:$,autoPanSpeed:_,autoPanOnNodeDrag:V}=e();if(!V){a=!1,cancelAnimationFrame(o);return}const[P,R]=VT(c,u,_);(P!==0||R!==0)&&(s.x=(s.x??0)-P/L[2],s.y=(s.y??0)-R/L[2],await $({x:P,y:R})&&E(s)),o=requestAnimationFrame(N)}function I(L){var H;const{nodeLookup:$,multiSelectionActive:_,nodesDraggable:V,transform:P,snapGrid:R,snapToGrid:T,selectNodesOnDrag:A,onNodeDragStart:D,onSelectionDragStart:B,unselectNodesAndEdges:z}=e();f=!0,(!A||!S)&&!_&&C&&((H=$.get(C))!=null&&H.selected||z()),S&&A&&C&&(t==null||t(C));const U=ql(L.sourceEvent,{transform:P,snapGrid:R,snapToGrid:T,containerBounds:u});if(s=U,l=p$($,V,U,C),l.size>0&&(n||D||!C&&B)){const[X,G]=cp({nodeId:C,dragItems:l,nodeLookup:$});n==null||n(L.sourceEvent,l,X,G),D==null||D(L.sourceEvent,X,G),C||B==null||B(L.sourceEvent,G)}}const O=pT().clickDistance(k).on("start",L=>{const{domNode:$,nodeDragThreshold:_,transform:V,snapGrid:P,snapToGrid:R}=e();u=($==null?void 0:$.getBoundingClientRect())||null,h=!1,p=!1,m=L.sourceEvent,_===0&&I(L),s=ql(L.sourceEvent,{transform:V,snapGrid:P,snapToGrid:R,containerBounds:u}),c=Dn(L.sourceEvent,u)}).on("drag",L=>{const{autoPanOnNodeDrag:$,transform:_,snapGrid:V,snapToGrid:P,nodeDragThreshold:R,nodeLookup:T}=e(),A=ql(L.sourceEvent,{transform:_,snapGrid:V,snapToGrid:P,containerBounds:u});if(m=L.sourceEvent,(L.sourceEvent.type==="touchmove"&&L.sourceEvent.touches.length>1||C&&!T.has(C))&&(h=!0),!h){if(!a&&$&&f&&(a=!0,N()),!f){const D=Dn(L.sourceEvent,u),B=D.x-c.x,z=D.y-c.y;Math.sqrt(B*B+z*z)>R&&I(L)}(s.x!==A.xSnapped||s.y!==A.ySnapped)&&l&&f&&(c=Dn(L.sourceEvent,u),E(A))}}).on("end",L=>{if(!(!f||h)&&(a=!1,f=!1,cancelAnimationFrame(o),l.size>0)){const{nodeLookup:$,updateNodePositions:_,onNodeDragStop:V,onSelectionDragStop:P}=e();if(p&&(_(l,!1),p=!1),i||V||!C&&P){const[R,T]=cp({nodeId:C,dragItems:l,nodeLookup:$,dragging:!1});i==null||i(L.sourceEvent,l,R,T),V==null||V(L.sourceEvent,R,T),C||P==null||P(L.sourceEvent,T)}}}).filter(L=>{const $=L.target;return!L.button&&(!w||!Qx($,`.${w}`,x))&&(!y||Qx($,y,x))});d.call(O)}function g(){d==null||d.on(".drag",null)}return{update:v,destroy:g}}function y$(t,e,n){const r=[],i={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const s of e.values())Ma(i,_o(s))>0&&r.push(s);return r}const v$=250;function w$(t,e,n,r){var l,a;let i=[],s=1/0;const o=y$(t,n,e+v$);for(const c of o){const u=[...((l=c.internals.handleBounds)==null?void 0:l.source)??[],...((a=c.internals.handleBounds)==null?void 0:a.target)??[]];for(const f of u){if(r.nodeId===f.nodeId&&r.type===f.type&&r.id===f.id)continue;const{x:d,y:h}=hs(c,f,f.position,!0),p=Math.sqrt(Math.pow(d-t.x,2)+Math.pow(h-t.y,2));p>e||(p<s?(i=[{...f,x:d,y:h}],s=p):p===s&&i.push({...f,x:d,y:h}))}}if(!i.length)return null;if(i.length>1){const c=r.type==="source"?"target":"source";return i.find(u=>u.type===c)??i[0]}return i[0]}function QT(t,e,n,r,i,s=!1){var c,u,f;const o=r.get(t);if(!o)return null;const l=i==="strict"?(c=o.internals.handleBounds)==null?void 0:c[e]:[...((u=o.internals.handleBounds)==null?void 0:u.source)??[],...((f=o.internals.handleBounds)==null?void 0:f.target)??[]],a=(n?l==null?void 0:l.find(d=>d.id===n):l==null?void 0:l[0])??null;return a&&s?{...a,...hs(o,a,a.position,!0)}:a}function ZT(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function x$(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const eM=()=>!0;function S$(t,{connectionMode:e,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:l,nodeLookup:a,lib:c,autoPanOnConnect:u,flowId:f,panBy:d,cancelConnection:h,onConnectStart:p,onConnect:m,onConnectEnd:v,isValidConnection:g=eM,onReconnectEnd:w,updateConnection:y,getTransform:x,getFromHandle:S,autoPanSpeed:C,dragThreshold:k=1,handleDomNode:E}){const N=FT(t.target);let I=0,O;const{x:L,y:$}=Dn(t),_=ZT(s,E),V=l==null?void 0:l.getBoundingClientRect();let P=!1;if(!V||!_)return;const R=QT(i,_,r,a,e);if(!R)return;let T=Dn(t,V),A=!1,D=null,B=!1,z=null;function U(){if(!u||!V)return;const[se,re]=VT(T,V,C);d({x:se,y:re}),I=requestAnimationFrame(U)}const H={...R,nodeId:i,type:_,position:R.position},X=a.get(i);let Q={inProgress:!0,isValid:null,from:hs(X,H,J.Left,!0),fromHandle:H,fromPosition:H.position,fromNode:X,to:T,toHandle:null,toPosition:$x[H.position],toNode:null,pointer:T};function W(){P=!0,y(Q),p==null||p(t,{nodeId:i,handleId:r,handleType:_})}k===0&&W();function ee(se){if(!P){const{x:ht,y:Rr}=Dn(se),lr=ht-L,Ai=Rr-$;if(!(lr*lr+Ai*Ai>k*k))return;W()}if(!S()||!H){ce(se);return}const re=x();T=Dn(se,V),O=w$(fc(T,re,!1,[1,1]),n,a,H),A||(U(),A=!0);const te=tM(se,{handle:O,connectionMode:e,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:g,doc:N,lib:c,flowId:f,nodeLookup:a});z=te.handleDomNode,D=te.connection,B=x$(!!O,te.isValid);const ye=a.get(i),ke=ye?hs(ye,H,J.Left,!0):Q.from,ge={...Q,from:ke,isValid:B,to:te.toHandle&&B?_f({x:te.toHandle.x,y:te.toHandle.y},re):T,toHandle:te.toHandle,toPosition:B&&te.toHandle?te.toHandle.position:$x[H.position],toNode:te.toHandle?a.get(te.toHandle.nodeId):null,pointer:T};y(ge),Q=ge}function ce(se){if(!("touches"in se&&se.touches.length>0)){if(P){(O||z)&&D&&B&&(m==null||m(D));const{inProgress:re,...te}=Q,ye={...te,toPosition:Q.toHandle?Q.toPosition:null};v==null||v(se,ye),s&&(w==null||w(se,ye))}h(),cancelAnimationFrame(I),A=!1,B=!1,D=null,z=null,N.removeEventListener("mousemove",ee),N.removeEventListener("mouseup",ce),N.removeEventListener("touchmove",ee),N.removeEventListener("touchend",ce)}}N.addEventListener("mousemove",ee),N.addEventListener("mouseup",ce),N.addEventListener("touchmove",ee),N.addEventListener("touchend",ce)}function tM(t,{handle:e,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:l,flowId:a,isValidConnection:c=eM,nodeLookup:u}){const f=s==="target",d=e?o.querySelector(`.${l}-flow__handle[data-id="${a}-${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`):null,{x:h,y:p}=Dn(t),m=o.elementFromPoint(h,p),v=m!=null&&m.classList.contains(`${l}-flow__handle`)?m:d,g={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const w=ZT(void 0,v),y=v.getAttribute("data-nodeid"),x=v.getAttribute("data-handleid"),S=v.classList.contains("connectable"),C=v.classList.contains("connectableend");if(!y||!w)return g;const k={source:f?y:r,sourceHandle:f?x:i,target:f?r:y,targetHandle:f?i:x};g.connection=k;const N=S&&C&&(n===Mo.Strict?f&&w==="source"||!f&&w==="target":y!==r||x!==i);g.isValid=N&&c(k),g.toHandle=QT(y,w,x,u,n,!0)}return g}const vg={onPointerDown:S$,isValid:tM};function k$({domNode:t,panZoom:e,getTransform:n,getViewScale:r}){const i=Wt(t);function s({translateExtent:l,width:a,height:c,zoomStep:u=1,pannable:f=!0,zoomable:d=!0,inversePan:h=!1}){const p=y=>{if(y.sourceEvent.type!=="wheel"||!e)return;const x=n(),S=y.sourceEvent.ctrlKey&&Na()?10:1,C=-y.sourceEvent.deltaY*(y.sourceEvent.deltaMode===1?.05:y.sourceEvent.deltaMode?1:.002)*u,k=x[2]*Math.pow(2,C*S);e.scaleTo(k)};let m=[0,0];const v=y=>{(y.sourceEvent.type==="mousedown"||y.sourceEvent.type==="touchstart")&&(m=[y.sourceEvent.clientX??y.sourceEvent.touches[0].clientX,y.sourceEvent.clientY??y.sourceEvent.touches[0].clientY])},g=y=>{const x=n();if(y.sourceEvent.type!=="mousemove"&&y.sourceEvent.type!=="touchmove"||!e)return;const S=[y.sourceEvent.clientX??y.sourceEvent.touches[0].clientX,y.sourceEvent.clientY??y.sourceEvent.touches[0].clientY],C=[S[0]-m[0],S[1]-m[1]];m=S;const k=r()*Math.max(x[2],Math.log(x[2]))*(h?-1:1),E={x:x[0]-C[0]*k,y:x[1]-C[1]*k},N=[[0,0],[a,c]];e.setViewportConstrained({x:E.x,y:E.y,zoom:x[2]},N,l)},w=_T().on("start",v).on("zoom",f?g:null).on("zoom.wheel",d?p:null);i.call(w,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:bn}}const Bd=t=>({x:t.x,y:t.y,zoom:t.k}),up=({x:t,y:e,zoom:n})=>Id.translate(t,e).scale(n),qs=(t,e)=>t.target.closest(`.${e}`),nM=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),C$=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,fp=(t,e=0,n=C$,r=()=>{})=>{const i=typeof e=="number"&&e>0;return i||r(),i?t.transition().duration(e).ease(n).on("end",r):t},rM=t=>{const e=t.ctrlKey&&Na()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function E$({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:l,onPanZoom:a,onPanZoomEnd:c}){return u=>{if(qs(u,e))return u.ctrlKey&&u.preventDefault(),!1;u.preventDefault(),u.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(u.ctrlKey&&o){const v=bn(u),g=rM(u),w=f*Math.pow(2,g);r.scaleTo(n,w,v,u);return}const d=u.deltaMode===1?20:1;let h=i===Gi.Vertical?0:u.deltaX*d,p=i===Gi.Horizontal?0:u.deltaY*d;!Na()&&u.shiftKey&&i!==Gi.Vertical&&(h=u.deltaY*d,p=0),r.translateBy(n,-(h/f)*s,-(p/f)*s,{internal:!0});const m=Bd(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(a==null||a(u,m),t.panScrollTimeout=setTimeout(()=>{c==null||c(u,m),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,l==null||l(u,m))}}function b$({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(r,i){const s=r.type==="wheel",o=!e&&s&&!r.ctrlKey,l=qs(r,t);if(r.ctrlKey&&s&&l&&r.preventDefault(),o||l)return null;r.preventDefault(),n.call(this,r,i)}}function T$({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return r=>{var s,o,l;if((s=r.sourceEvent)!=null&&s.internal)return;const i=Bd(r.transform);t.mouseButton=((o=r.sourceEvent)==null?void 0:o.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=i,((l=r.sourceEvent)==null?void 0:l.type)==="mousedown"&&e(!0),n&&(n==null||n(r.sourceEvent,i))}}function M$({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{var o,l;t.usedRightMouseButton=!!(n&&nM(e,t.mouseButton??0)),(o=s.sourceEvent)!=null&&o.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!((l=s.sourceEvent)!=null&&l.internal)&&(i==null||i(s.sourceEvent,Bd(s.transform)))}}function N$({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{var l;if(!((l=o.sourceEvent)!=null&&l.internal)&&(t.isZoomingOrPanning=!1,s&&nM(e,t.mouseButton??0)&&!t.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),t.usedRightMouseButton=!1,r(!1),i)){const a=Bd(o.transform);t.prevViewport=a,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{i==null||i(o.sourceEvent,a)},n?150:0)}}}function _$({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:l,noPanClassName:a,lib:c,connectionInProgress:u}){return f=>{var v;const d=t||e,h=n&&f.ctrlKey,p=f.type==="wheel";if(f.button===1&&f.type==="mousedown"&&(qs(f,`${c}-flow__node`)||qs(f,`${c}-flow__edge`)))return!0;if(!r&&!d&&!i&&!s&&!n||o||u&&!p||qs(f,l)&&p||qs(f,a)&&(!p||i&&p&&!t)||!n&&f.ctrlKey&&p)return!1;if(!n&&f.type==="touchstart"&&((v=f.touches)==null?void 0:v.length)>1)return f.preventDefault(),!1;if(!d&&!i&&!h&&p||!r&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(r)&&!r.includes(f.button)&&f.type==="mousedown")return!1;const m=Array.isArray(r)&&r.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||p)&&m}}function A$({domNode:t,minZoom:e,maxZoom:n,translateExtent:r,viewport:i,onPanZoom:s,onPanZoomStart:o,onPanZoomEnd:l,onDraggingChange:a}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},u=t.getBoundingClientRect(),f=_T().scaleExtent([e,n]).translateExtent(r),d=Wt(t).call(f);w({x:i.x,y:i.y,zoom:No(i.zoom,e,n)},[[0,0],[u.width,u.height]],r);const h=d.on("wheel.zoom"),p=d.on("dblclick.zoom");f.wheelDelta(rM);function m(O,L){return d?new Promise($=>{f==null||f.interpolate((L==null?void 0:L.interpolate)==="linear"?Kl:Ou).transform(fp(d,L==null?void 0:L.duration,L==null?void 0:L.ease,()=>$(!0)),O)}):Promise.resolve(!1)}function v({noWheelClassName:O,noPanClassName:L,onPaneContextMenu:$,userSelectionActive:_,panOnScroll:V,panOnDrag:P,panOnScrollMode:R,panOnScrollSpeed:T,preventScrolling:A,zoomOnPinch:D,zoomOnScroll:B,zoomOnDoubleClick:z,zoomActivationKeyPressed:U,lib:H,onTransformChange:X,connectionInProgress:G,paneClickDistance:Q,selectionOnDrag:W}){_&&!c.isZoomingOrPanning&&g();const ee=V&&!U&&!_;f.clickDistance(W?1/0:!An(Q)||Q<0?0:Q);const ce=ee?E$({zoomPanValues:c,noWheelClassName:O,d3Selection:d,d3Zoom:f,panOnScrollMode:R,panOnScrollSpeed:T,zoomOnPinch:D,onPanZoomStart:o,onPanZoom:s,onPanZoomEnd:l}):b$({noWheelClassName:O,preventScrolling:A,d3ZoomHandler:h});if(d.on("wheel.zoom",ce,{passive:!1}),!_){const re=T$({zoomPanValues:c,onDraggingChange:a,onPanZoomStart:o});f.on("start",re);const te=M$({zoomPanValues:c,panOnDrag:P,onPaneContextMenu:!!$,onPanZoom:s,onTransformChange:X});f.on("zoom",te);const ye=N$({zoomPanValues:c,panOnDrag:P,panOnScroll:V,onPaneContextMenu:$,onPanZoomEnd:l,onDraggingChange:a});f.on("end",ye)}const se=_$({zoomActivationKeyPressed:U,panOnDrag:P,zoomOnScroll:B,panOnScroll:V,zoomOnDoubleClick:z,zoomOnPinch:D,userSelectionActive:_,noPanClassName:L,noWheelClassName:O,lib:H,connectionInProgress:G});f.filter(se),z?d.on("dblclick.zoom",p):d.on("dblclick.zoom",null)}function g(){f.on("zoom",null)}async function w(O,L,$){const _=up(O),V=f==null?void 0:f.constrain()(_,L,$);return V&&await m(V),new Promise(P=>P(V))}async function y(O,L){const $=up(O);return await m($,L),new Promise(_=>_($))}function x(O){if(d){const L=up(O),$=d.property("__zoom");($.k!==O.zoom||$.x!==O.x||$.y!==O.y)&&(f==null||f.transform(d,L,null,{sync:!0}))}}function S(){const O=d?NT(d.node()):{x:0,y:0,k:1};return{x:O.x,y:O.y,zoom:O.k}}function C(O,L){return d?new Promise($=>{f==null||f.interpolate((L==null?void 0:L.interpolate)==="linear"?Kl:Ou).scaleTo(fp(d,L==null?void 0:L.duration,L==null?void 0:L.ease,()=>$(!0)),O)}):Promise.resolve(!1)}function k(O,L){return d?new Promise($=>{f==null||f.interpolate((L==null?void 0:L.interpolate)==="linear"?Kl:Ou).scaleBy(fp(d,L==null?void 0:L.duration,L==null?void 0:L.ease,()=>$(!0)),O)}):Promise.resolve(!1)}function E(O){f==null||f.scaleExtent(O)}function N(O){f==null||f.translateExtent(O)}function I(O){const L=!An(O)||O<0?0:O;f==null||f.clickDistance(L)}return{update:v,destroy:g,setViewport:y,setViewportConstrained:w,getViewport:S,scaleTo:C,scaleBy:k,setScaleExtent:E,setTranslateExtent:N,syncViewport:x,setClickDistance:I}}var Do;(function(t){t.Line="line",t.Handle="handle"})(Do||(Do={}));function D$({width:t,prevWidth:e,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=t-e,l=n-r,a=[o>0?1:o<0?-1:0,l>0?1:l<0?-1:0];return o&&i&&(a[0]=a[0]*-1),l&&s&&(a[1]=a[1]*-1),a}function Zx(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),r=t.includes("left"),i=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:r,affectsY:i}}function Lr(t,e){return Math.max(0,e-t)}function Vr(t,e){return Math.max(0,t-e)}function Jc(t,e,n){return Math.max(0,e-t,t-n)}function e1(t,e){return t?!e:e}function O$(t,e,n,r,i,s,o,l){let{affectsX:a,affectsY:c}=e;const{isHorizontal:u,isVertical:f}=e,d=u&&f,{xSnapped:h,ySnapped:p}=n,{minWidth:m,maxWidth:v,minHeight:g,maxHeight:w}=r,{x:y,y:x,width:S,height:C,aspectRatio:k}=t;let E=Math.floor(u?h-t.pointerX:0),N=Math.floor(f?p-t.pointerY:0);const I=S+(a?-E:E),O=C+(c?-N:N),L=-s[0]*S,$=-s[1]*C;let _=Jc(I,m,v),V=Jc(O,g,w);if(o){let T=0,A=0;a&&E<0?T=Lr(y+E+L,o[0][0]):!a&&E>0&&(T=Vr(y+I+L,o[1][0])),c&&N<0?A=Lr(x+N+$,o[0][1]):!c&&N>0&&(A=Vr(x+O+$,o[1][1])),_=Math.max(_,T),V=Math.max(V,A)}if(l){let T=0,A=0;a&&E>0?T=Vr(y+E,l[0][0]):!a&&E<0&&(T=Lr(y+I,l[1][0])),c&&N>0?A=Vr(x+N,l[0][1]):!c&&N<0&&(A=Lr(x+O,l[1][1])),_=Math.max(_,T),V=Math.max(V,A)}if(i){if(u){const T=Jc(I/k,g,w)*k;if(_=Math.max(_,T),o){let A=0;!a&&!c||a&&!c&&d?A=Vr(x+$+I/k,o[1][1])*k:A=Lr(x+$+(a?E:-E)/k,o[0][1])*k,_=Math.max(_,A)}if(l){let A=0;!a&&!c||a&&!c&&d?A=Lr(x+I/k,l[1][1])*k:A=Vr(x+(a?E:-E)/k,l[0][1])*k,_=Math.max(_,A)}}if(f){const T=Jc(O*k,m,v)/k;if(V=Math.max(V,T),o){let A=0;!a&&!c||c&&!a&&d?A=Vr(y+O*k+L,o[1][0])/k:A=Lr(y+(c?N:-N)*k+L,o[0][0])/k,V=Math.max(V,A)}if(l){let A=0;!a&&!c||c&&!a&&d?A=Lr(y+O*k,l[1][0])/k:A=Vr(y+(c?N:-N)*k,l[0][0])/k,V=Math.max(V,A)}}}N=N+(N<0?V:-V),E=E+(E<0?_:-_),i&&(d?I>O*k?N=(e1(a,c)?-E:E)/k:E=(e1(a,c)?-N:N)*k:u?(N=E/k,c=a):(E=N*k,a=c));const P=a?y+E:y,R=c?x+N:x;return{width:S+(a?-E:E),height:C+(c?-N:N),x:s[0]*E*(a?-1:1)+P,y:s[1]*N*(c?-1:1)+R}}const iM={width:0,height:0,x:0,y:0},P$={...iM,pointerX:0,pointerY:0,aspectRatio:1};function R$(t){return[[0,0],[t.measured.width,t.measured.height]]}function I$(t,e,n){const r=e.position.x+t.position.x,i=e.position.y+t.position.y,s=t.measured.width??0,o=t.measured.height??0,l=n[0]*s,a=n[1]*o;return[[r-l,i-a],[r+s-l,i+o-a]]}function L$({domNode:t,nodeId:e,getStoreItems:n,onChange:r,onEnd:i}){const s=Wt(t);let o={controlDirection:Zx("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function l({controlPosition:c,boundaries:u,keepAspectRatio:f,resizeDirection:d,onResizeStart:h,onResize:p,onResizeEnd:m,shouldResize:v}){let g={...iM},w={...P$};o={boundaries:u,resizeDirection:d,keepAspectRatio:f,controlDirection:Zx(c)};let y,x=null,S=[],C,k,E,N=!1;const I=pT().on("start",O=>{const{nodeLookup:L,transform:$,snapGrid:_,snapToGrid:V,nodeOrigin:P,paneDomNode:R}=n();if(y=L.get(e),!y)return;x=(R==null?void 0:R.getBoundingClientRect())??null;const{xSnapped:T,ySnapped:A}=ql(O.sourceEvent,{transform:$,snapGrid:_,snapToGrid:V,containerBounds:x});g={width:y.measured.width??0,height:y.measured.height??0,x:y.position.x??0,y:y.position.y??0},w={...g,pointerX:T,pointerY:A,aspectRatio:g.width/g.height},C=void 0,y.parentId&&(y.extent==="parent"||y.expandParent)&&(C=L.get(y.parentId),k=C&&y.extent==="parent"?R$(C):void 0),S=[],E=void 0;for(const[D,B]of L)if(B.parentId===e&&(S.push({id:D,position:{...B.position},extent:B.extent}),B.extent==="parent"||B.expandParent)){const z=I$(B,y,B.origin??P);E?E=[[Math.min(z[0][0],E[0][0]),Math.min(z[0][1],E[0][1])],[Math.max(z[1][0],E[1][0]),Math.max(z[1][1],E[1][1])]]:E=z}h==null||h(O,{...g})}).on("drag",O=>{const{transform:L,snapGrid:$,snapToGrid:_,nodeOrigin:V}=n(),P=ql(O.sourceEvent,{transform:L,snapGrid:$,snapToGrid:_,containerBounds:x}),R=[];if(!y)return;const{x:T,y:A,width:D,height:B}=g,z={},U=y.origin??V,{width:H,height:X,x:G,y:Q}=O$(w,o.controlDirection,P,o.boundaries,o.keepAspectRatio,U,k,E),W=H!==D,ee=X!==B,ce=G!==T&&W,se=Q!==A&&ee;if(!ce&&!se&&!W&&!ee)return;if((ce||se||U[0]===1||U[1]===1)&&(z.x=ce?G:g.x,z.y=se?Q:g.y,g.x=z.x,g.y=z.y,S.length>0)){const ke=G-T,ge=Q-A;for(const ht of S)ht.position={x:ht.position.x-ke+U[0]*(H-D),y:ht.position.y-ge+U[1]*(X-B)},R.push(ht)}if((W||ee)&&(z.width=W&&(!o.resizeDirection||o.resizeDirection==="horizontal")?H:g.width,z.height=ee&&(!o.resizeDirection||o.resizeDirection==="vertical")?X:g.height,g.width=z.width,g.height=z.height),C&&y.expandParent){const ke=U[0]*(z.width??0);z.x&&z.x<ke&&(g.x=ke,w.x=w.x-(z.x-ke));const ge=U[1]*(z.height??0);z.y&&z.y<ge&&(g.y=ge,w.y=w.y-(z.y-ge))}const re=D$({width:g.width,prevWidth:D,height:g.height,prevHeight:B,affectsX:o.controlDirection.affectsX,affectsY:o.controlDirection.affectsY}),te={...g,direction:re};(v==null?void 0:v(O,te))!==!1&&(N=!0,p==null||p(O,te),r(z,R))}).on("end",O=>{N&&(m==null||m(O,{...g}),i==null||i({...g}),N=!1)});s.call(I)}function a(){s.on(".drag",null)}return{update:l,destroy:a}}var sM={exports:{}},oM={},lM={exports:{}},aM={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oo=b;function V$(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var B$=typeof Object.is=="function"?Object.is:V$,z$=Oo.useState,$$=Oo.useEffect,F$=Oo.useLayoutEffect,j$=Oo.useDebugValue;function H$(t,e){var n=e(),r=z$({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return F$(function(){i.value=n,i.getSnapshot=e,dp(i)&&s({inst:i})},[t,n,e]),$$(function(){return dp(i)&&s({inst:i}),t(function(){dp(i)&&s({inst:i})})},[t]),j$(n),n}function dp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!B$(t,n)}catch{return!0}}function U$(t,e){return e()}var W$=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?U$:H$;aM.useSyncExternalStore=Oo.useSyncExternalStore!==void 0?Oo.useSyncExternalStore:W$;lM.exports=aM;var K$=lM.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zd=b,q$=K$;function Y$(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var X$=typeof Object.is=="function"?Object.is:Y$,G$=q$.useSyncExternalStore,J$=zd.useRef,Q$=zd.useEffect,Z$=zd.useMemo,eF=zd.useDebugValue;oM.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=J$(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Z$(function(){function a(h){if(!c){if(c=!0,u=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,X$(u,h))return p;var m=r(h);return i!==void 0&&i(p,m)?(u=h,p):(u=h,f=m)}var c=!1,u,f,d=n===void 0?null:n;return[function(){return a(e())},d===null?void 0:function(){return a(d())}]},[e,n,r,i]);var l=G$(t,s[0],s[1]);return Q$(function(){o.hasValue=!0,o.value=l},[l]),eF(l),l};sM.exports=oM;var tF=sM.exports;const nF=hy(tF),rF={},t1=t=>{let e;const n=new Set,r=(u,f)=>{const d=typeof u=="function"?u(e):u;if(!Object.is(d,e)){const h=e;e=f??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(p=>p(e,h))}},i=()=>e,a={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(rF?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,a);return a},iF=t=>t?t1(t):t1,{useDebugValue:sF}=lt,{useSyncExternalStoreWithSelector:oF}=nF,lF=t=>t;function cM(t,e=lF,n){const r=oF(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return sF(r),r}const n1=(t,e)=>{const n=iF(t),r=(i,s=e)=>cM(n,i,s);return Object.assign(r,n),r},aF=(t,e)=>t?n1(t,e):n1;function Me(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}const $d=b.createContext(null),cF=$d.Provider,uM=Zn.error001();function he(t,e){const n=b.useContext($d);if(n===null)throw new Error(uM);return cM(n,t,e)}function Ne(){const t=b.useContext($d);if(t===null)throw new Error(uM);return b.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const r1={display:"none"},uF={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},fM="react-flow__node-desc",dM="react-flow__edge-desc",fF="react-flow__aria-live",dF=t=>t.ariaLiveMessage,hF=t=>t.ariaLabelConfig;function pF({rfId:t}){const e=he(dF);return M.jsx("div",{id:`${fF}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:uF,children:e})}function mF({rfId:t,disableKeyboardA11y:e}){const n=he(hF);return M.jsxs(M.Fragment,{children:[M.jsx("div",{id:`${fM}-${t}`,style:r1,children:e?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),M.jsx("div",{id:`${dM}-${t}`,style:r1,children:n["edge.a11yDescription.default"]}),!e&&M.jsx(pF,{rfId:t})]})}const Fd=b.forwardRef(({position:t="top-left",children:e,className:n,style:r,...i},s)=>{const o=`${t}`.split("-");return M.jsx("div",{className:je(["react-flow__panel",n,...o]),style:r,ref:s,...i,children:e})});Fd.displayName="Panel";function gF({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:M.jsx(Fd,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:M.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const yF=t=>{const e=[],n=[];for(const[,r]of t.nodeLookup)r.selected&&e.push(r.internals.userNode);for(const[,r]of t.edgeLookup)r.selected&&n.push(r);return{selectedNodes:e,selectedEdges:n}},Qc=t=>t.id;function vF(t,e){return Me(t.selectedNodes.map(Qc),e.selectedNodes.map(Qc))&&Me(t.selectedEdges.map(Qc),e.selectedEdges.map(Qc))}function wF({onSelectionChange:t}){const e=Ne(),{selectedNodes:n,selectedEdges:r}=he(yF,vF);return b.useEffect(()=>{const i={nodes:n,edges:r};t==null||t(i),e.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,t]),null}const xF=t=>!!t.onSelectionChangeHandlers;function SF({onSelectionChange:t}){const e=he(xF);return t||e?M.jsx(wF,{onSelectionChange:t}):null}const hM=[0,0],kF={x:0,y:0,zoom:1},CF=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],i1=[...CF,"rfId"],EF=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),s1={translateExtent:ba,nodeOrigin:hM,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function bF(t){const{setNodes:e,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:l,setDefaultNodesAndEdges:a}=he(EF,Me),c=Ne();b.useEffect(()=>(a(t.defaultNodes,t.defaultEdges),()=>{u.current=s1,l()}),[]);const u=b.useRef(s1);return b.useEffect(()=>{for(const f of i1){const d=t[f],h=u.current[f];d!==h&&(typeof t[f]>"u"||(f==="nodes"?e(d):f==="edges"?n(d):f==="minZoom"?r(d):f==="maxZoom"?i(d):f==="translateExtent"?s(d):f==="nodeExtent"?o(d):f==="ariaLabelConfig"?c.setState({ariaLabelConfig:Yz(d)}):f==="fitView"?c.setState({fitViewQueued:d}):f==="fitViewOptions"?c.setState({fitViewOptions:d}):c.setState({[f]:d})))}u.current=t},i1.map(f=>t[f])),null}function o1(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function TF(t){var r;const[e,n]=b.useState(t==="system"?null:t);return b.useEffect(()=>{if(t!=="system"){n(t);return}const i=o1(),s=()=>n(i!=null&&i.matches?"dark":"light");return s(),i==null||i.addEventListener("change",s),()=>{i==null||i.removeEventListener("change",s)}},[t]),e!==null?e:(r=o1())!=null&&r.matches?"dark":"light"}const l1=typeof document<"u"?document:null;function _a(t=null,e={target:l1,actInsideInputWithModifier:!0}){const[n,r]=b.useState(!1),i=b.useRef(!1),s=b.useRef(new Set([])),[o,l]=b.useMemo(()=>{if(t!==null){const c=(Array.isArray(t)?t:[t]).filter(f=>typeof f=="string").map(f=>f.replace("+",`
`).replace(`

`,`
+`).split(`
`)),u=c.reduce((f,d)=>f.concat(...d),[]);return[c,u]}return[[],[]]},[t]);return b.useEffect(()=>{const a=(e==null?void 0:e.target)??l1,c=(e==null?void 0:e.actInsideInputWithModifier)??!0;if(t!==null){const u=h=>{var v,g;if(i.current=h.ctrlKey||h.metaKey||h.shiftKey||h.altKey,(!i.current||i.current&&!c)&&jT(h))return!1;const m=c1(h.code,l);if(s.current.add(h[m]),a1(o,s.current,!1)){const w=((g=(v=h.composedPath)==null?void 0:v.call(h))==null?void 0:g[0])||h.target,y=(w==null?void 0:w.nodeName)==="BUTTON"||(w==null?void 0:w.nodeName)==="A";e.preventDefault!==!1&&(i.current||!y)&&h.preventDefault(),r(!0)}},f=h=>{const p=c1(h.code,l);a1(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(h[p]),h.key==="Meta"&&s.current.clear(),i.current=!1},d=()=>{s.current.clear(),r(!1)};return a==null||a.addEventListener("keydown",u),a==null||a.addEventListener("keyup",f),window.addEventListener("blur",d),window.addEventListener("contextmenu",d),()=>{a==null||a.removeEventListener("keydown",u),a==null||a.removeEventListener("keyup",f),window.removeEventListener("blur",d),window.removeEventListener("contextmenu",d)}}},[t,r]),n}function a1(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function c1(t,e){return e.includes(t)?"code":"key"}const MF=()=>{const t=Ne();return b.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e==null?void 0:e.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e==null?void 0:e.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:r}=t.getState();return r?r.scaleTo(e,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[r,i,s],panZoom:o}=t.getState();return o?(await o.setViewport({x:e.x??r,y:e.y??i,zoom:e.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,r]=t.getState().transform;return{x:e,y:n,zoom:r}},setCenter:async(e,n,r)=>t.getState().setCenter(e,n,r),fitBounds:async(e,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:l}=t.getState(),a=S0(e,r,i,s,o,(n==null?void 0:n.padding)??.1);return l?(await l.setViewport(a,{duration:n==null?void 0:n.duration,ease:n==null?void 0:n.ease,interpolate:n==null?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={})=>{const{transform:r,snapGrid:i,snapToGrid:s,domNode:o}=t.getState();if(!o)return e;const{x:l,y:a}=o.getBoundingClientRect(),c={x:e.x-l,y:e.y-a},u=n.snapGrid??i,f=n.snapToGrid??s;return fc(c,r,f,u)},flowToScreenPosition:e=>{const{transform:n,domNode:r}=t.getState();if(!r)return e;const{x:i,y:s}=r.getBoundingClientRect(),o=_f(e,n);return{x:o.x+i,y:o.y+s}}}),[])};function pM(t,e){const n=[],r=new Map,i=[];for(const s of t)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of e){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const l={...s};for(const a of o)NF(a,l);n.push(l)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function NF(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured={...t.dimensions},t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(e.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(e.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function mM(t,e){return pM(t,e)}function gM(t,e){return pM(t,e)}function Ri(t,e){return{id:t,type:"select",selected:e}}function Ys(t,e=new Set,n=!1){const r=[];for(const[i,s]of t){const o=e.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(Ri(s.id,o)))}return r}function u1({items:t=[],lookup:e}){var i;const n=[],r=new Map(t.map(s=>[s.id,s]));for(const[s,o]of t.entries()){const l=e.get(o.id),a=((i=l==null?void 0:l.internals)==null?void 0:i.userNode)??l;a!==void 0&&a!==o&&n.push({id:o.id,item:o,type:"replace"}),a===void 0&&n.push({item:o,type:"add",index:s})}for(const[s]of e)r.get(s)===void 0&&n.push({id:s,type:"remove"});return n}function f1(t){return{id:t.id,type:"remove"}}const d1=t=>Bz(t),_F=t=>RT(t);function yM(t){return b.forwardRef(t)}const AF=typeof window<"u"?b.useLayoutEffect:b.useEffect;function h1(t){const[e,n]=b.useState(BigInt(0)),[r]=b.useState(()=>DF(()=>n(i=>i+BigInt(1))));return AF(()=>{const i=r.get();i.length&&(t(i),r.reset())},[e]),r}function DF(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const vM=b.createContext(null);function OF({children:t}){const e=Ne(),n=b.useCallback(l=>{const{nodes:a=[],setNodes:c,hasDefaultNodes:u,onNodesChange:f,nodeLookup:d,fitViewQueued:h,onNodesChangeMiddlewareMap:p}=e.getState();let m=a;for(const g of l)m=typeof g=="function"?g(m):g;let v=u1({items:m,lookup:d});for(const g of p.values())v=g(v);u&&c(m),v.length>0?f==null||f(v):h&&window.requestAnimationFrame(()=>{const{fitViewQueued:g,nodes:w,setNodes:y}=e.getState();g&&y(w)})},[]),r=h1(n),i=b.useCallback(l=>{const{edges:a=[],setEdges:c,hasDefaultEdges:u,onEdgesChange:f,edgeLookup:d}=e.getState();let h=a;for(const p of l)h=typeof p=="function"?p(h):p;u?c(h):f&&f(u1({items:h,lookup:d}))},[]),s=h1(i),o=b.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return M.jsx(vM.Provider,{value:o,children:t})}function PF(){const t=b.useContext(vM);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const RF=t=>!!t.panZoom;function jd(){const t=MF(),e=Ne(),n=PF(),r=he(RF),i=b.useMemo(()=>{const s=f=>e.getState().nodeLookup.get(f),o=f=>{n.nodeQueue.push(f)},l=f=>{n.edgeQueue.push(f)},a=f=>{var g,w;const{nodeLookup:d,nodeOrigin:h}=e.getState(),p=d1(f)?f:d.get(f.id),m=p.parentId?$T(p.position,p.measured,p.parentId,d,h):p.position,v={...p,position:m,width:((g=p.measured)==null?void 0:g.width)??p.width,height:((w=p.measured)==null?void 0:w.height)??p.height};return _o(v)},c=(f,d,h={replace:!1})=>{o(p=>p.map(m=>{if(m.id===f){const v=typeof d=="function"?d(m):d;return h.replace&&d1(v)?v:{...m,...v}}return m}))},u=(f,d,h={replace:!1})=>{l(p=>p.map(m=>{if(m.id===f){const v=typeof d=="function"?d(m):d;return h.replace&&_F(v)?v:{...m,...v}}return m}))};return{getNodes:()=>e.getState().nodes.map(f=>({...f})),getNode:f=>{var d;return(d=s(f))==null?void 0:d.internals.userNode},getInternalNode:s,getEdges:()=>{const{edges:f=[]}=e.getState();return f.map(d=>({...d}))},getEdge:f=>e.getState().edgeLookup.get(f),setNodes:o,setEdges:l,addNodes:f=>{const d=Array.isArray(f)?f:[f];n.nodeQueue.push(h=>[...h,...d])},addEdges:f=>{const d=Array.isArray(f)?f:[f];n.edgeQueue.push(h=>[...h,...d])},toObject:()=>{const{nodes:f=[],edges:d=[],transform:h}=e.getState(),[p,m,v]=h;return{nodes:f.map(g=>({...g})),edges:d.map(g=>({...g})),viewport:{x:p,y:m,zoom:v}}},deleteElements:async({nodes:f=[],edges:d=[]})=>{const{nodes:h,edges:p,onNodesDelete:m,onEdgesDelete:v,triggerNodeChanges:g,triggerEdgeChanges:w,onDelete:y,onBeforeDelete:x}=e.getState(),{nodes:S,edges:C}=await Hz({nodesToRemove:f,edgesToRemove:d,nodes:h,edges:p,onBeforeDelete:x}),k=C.length>0,E=S.length>0;if(k){const N=C.map(f1);v==null||v(C),w(N)}if(E){const N=S.map(f1);m==null||m(S),g(N)}return(E||k)&&(y==null||y({nodes:S,edges:C})),{deletedNodes:S,deletedEdges:C}},getIntersectingNodes:(f,d=!0,h)=>{const p=jx(f),m=p?f:a(f),v=h!==void 0;return m?(h||e.getState().nodes).filter(g=>{const w=e.getState().nodeLookup.get(g.id);if(w&&!p&&(g.id===f.id||!w.internals.positionAbsolute))return!1;const y=_o(v?g:w),x=Ma(y,m);return d&&x>0||x>=y.width*y.height||x>=m.width*m.height}):[]},isNodeIntersecting:(f,d,h=!0)=>{const m=jx(f)?f:a(f);if(!m)return!1;const v=Ma(m,d);return h&&v>0||v>=d.width*d.height||v>=m.width*m.height},updateNode:c,updateNodeData:(f,d,h={replace:!1})=>{c(f,p=>{const m=typeof d=="function"?d(p):d;return h.replace?{...p,data:m}:{...p,data:{...p.data,...m}}},h)},updateEdge:u,updateEdgeData:(f,d,h={replace:!1})=>{u(f,p=>{const m=typeof d=="function"?d(p):d;return h.replace?{...p,data:m}:{...p,data:{...p.data,...m}}},h)},getNodesBounds:f=>{const{nodeLookup:d,nodeOrigin:h}=e.getState();return zz(f,{nodeLookup:d,nodeOrigin:h})},getHandleConnections:({type:f,id:d,nodeId:h})=>{var p;return Array.from(((p=e.getState().connectionLookup.get(`${h}-${f}${d?`-${d}`:""}`))==null?void 0:p.values())??[])},getNodeConnections:({type:f,handleId:d,nodeId:h})=>{var p;return Array.from(((p=e.getState().connectionLookup.get(`${h}${f?d?`-${f}-${d}`:`-${f}`:""}`))==null?void 0:p.values())??[])},fitView:async f=>{const d=e.getState().fitViewResolver??qz();return e.setState({fitViewQueued:!0,fitViewOptions:f,fitViewResolver:d}),n.nodeQueue.push(h=>[...h]),d.promise}}},[]);return b.useMemo(()=>({...i,...t,viewportInitialized:r}),[r])}const p1=t=>t.selected,IF=typeof window<"u"?window:void 0;function LF({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=Ne(),{deleteElements:r}=jd(),i=_a(t,{actInsideInputWithModifier:!1}),s=_a(e,{target:IF});b.useEffect(()=>{if(i){const{edges:o,nodes:l}=n.getState();r({nodes:l.filter(p1),edges:o.filter(p1)}),n.setState({nodesSelectionActive:!1})}},[i]),b.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function VF(t){const e=Ne();b.useEffect(()=>{const n=()=>{var i,s,o,l;if(!t.current||!(((s=(i=t.current).checkVisibility)==null?void 0:s.call(i))??!0))return!1;const r=k0(t.current);(r.height===0||r.width===0)&&((l=(o=e.getState()).onError)==null||l.call(o,"004",Zn.error004())),e.setState({width:r.width||500,height:r.height||500})};if(t.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(t.current),()=>{window.removeEventListener("resize",n),r&&t.current&&r.unobserve(t.current)}}},[])}const Hd={position:"absolute",width:"100%",height:"100%",top:0,left:0},BF=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function zF({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=Gi.Free,zoomOnDoubleClick:o=!0,panOnDrag:l=!0,defaultViewport:a,translateExtent:c,minZoom:u,maxZoom:f,zoomActivationKeyCode:d,preventScrolling:h=!0,children:p,noWheelClassName:m,noPanClassName:v,onViewportChange:g,isControlledViewport:w,paneClickDistance:y,selectionOnDrag:x}){const S=Ne(),C=b.useRef(null),{userSelectionActive:k,lib:E,connectionInProgress:N}=he(BF,Me),I=_a(d),O=b.useRef();VF(C);const L=b.useCallback($=>{g==null||g({x:$[0],y:$[1],zoom:$[2]}),w||S.setState({transform:$})},[g,w]);return b.useEffect(()=>{if(C.current){O.current=A$({domNode:C.current,minZoom:u,maxZoom:f,translateExtent:c,viewport:a,onDraggingChange:P=>S.setState({paneDragging:P}),onPanZoomStart:(P,R)=>{const{onViewportChangeStart:T,onMoveStart:A}=S.getState();A==null||A(P,R),T==null||T(R)},onPanZoom:(P,R)=>{const{onViewportChange:T,onMove:A}=S.getState();A==null||A(P,R),T==null||T(R)},onPanZoomEnd:(P,R)=>{const{onViewportChangeEnd:T,onMoveEnd:A}=S.getState();A==null||A(P,R),T==null||T(R)}});const{x:$,y:_,zoom:V}=O.current.getViewport();return S.setState({panZoom:O.current,transform:[$,_,V],domNode:C.current.closest(".react-flow")}),()=>{var P;(P=O.current)==null||P.destroy()}}},[]),b.useEffect(()=>{var $;($=O.current)==null||$.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:l,zoomActivationKeyPressed:I,preventScrolling:h,noPanClassName:v,userSelectionActive:k,noWheelClassName:m,lib:E,onTransformChange:L,connectionInProgress:N,selectionOnDrag:x,paneClickDistance:y})},[t,e,n,r,i,s,o,l,I,h,v,k,m,E,L,N,x,y]),M.jsx("div",{className:"react-flow__renderer",ref:C,style:Hd,children:p})}const $F=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function FF(){const{userSelectionActive:t,userSelectionRect:e}=he($F,Me);return t&&e?M.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const hp=(t,e)=>n=>{n.target===e.current&&(t==null||t(n))},jF=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function HF({isSelecting:t,selectionKeyPressed:e,selectionMode:n=Ta.Full,panOnDrag:r,paneClickDistance:i,selectionOnDrag:s,onSelectionStart:o,onSelectionEnd:l,onPaneClick:a,onPaneContextMenu:c,onPaneScroll:u,onPaneMouseEnter:f,onPaneMouseMove:d,onPaneMouseLeave:h,children:p}){const m=Ne(),{userSelectionActive:v,elementsSelectable:g,dragging:w,connectionInProgress:y}=he(jF,Me),x=g&&(t||v),S=b.useRef(null),C=b.useRef(),k=b.useRef(new Set),E=b.useRef(new Set),N=b.useRef(!1),I=T=>{if(N.current||y){N.current=!1;return}a==null||a(T),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},O=T=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){T.preventDefault();return}c==null||c(T)},L=u?T=>u(T):void 0,$=T=>{N.current&&(T.stopPropagation(),N.current=!1)},_=T=>{var X,G;const{domNode:A}=m.getState();if(C.current=A==null?void 0:A.getBoundingClientRect(),!C.current)return;const D=T.target===S.current;if(!D&&!!T.target.closest(".nokey")||!t||!(s&&D||e)||T.button!==0||!T.isPrimary)return;(G=(X=T.target)==null?void 0:X.setPointerCapture)==null||G.call(X,T.pointerId),N.current=!1;const{x:U,y:H}=Dn(T.nativeEvent,C.current);m.setState({userSelectionRect:{width:0,height:0,startX:U,startY:H,x:U,y:H}}),D||(T.stopPropagation(),T.preventDefault())},V=T=>{const{userSelectionRect:A,transform:D,nodeLookup:B,edgeLookup:z,connectionLookup:U,triggerNodeChanges:H,triggerEdgeChanges:X,defaultEdgeOptions:G,resetSelectedElements:Q}=m.getState();if(!C.current||!A)return;const{x:W,y:ee}=Dn(T.nativeEvent,C.current),{startX:ce,startY:se}=A;if(!N.current){const ge=e?0:i;if(Math.hypot(W-ce,ee-se)<=ge)return;Q(),o==null||o(T)}N.current=!0;const re={startX:ce,startY:se,x:W<ce?W:ce,y:ee<se?ee:se,width:Math.abs(W-ce),height:Math.abs(ee-se)},te=k.current,ye=E.current;k.current=new Set(x0(B,re,D,n===Ta.Partial,!0).map(ge=>ge.id)),E.current=new Set;const ke=(G==null?void 0:G.selectable)??!0;for(const ge of k.current){const ht=U.get(ge);if(ht)for(const{edgeId:Rr}of ht.values()){const lr=z.get(Rr);lr&&(lr.selectable??ke)&&E.current.add(Rr)}}if(!Hx(te,k.current)){const ge=Ys(B,k.current,!0);H(ge)}if(!Hx(ye,E.current)){const ge=Ys(z,E.current);X(ge)}m.setState({userSelectionRect:re,userSelectionActive:!0,nodesSelectionActive:!1})},P=T=>{var A,D;T.button===0&&((D=(A=T.target)==null?void 0:A.releasePointerCapture)==null||D.call(A,T.pointerId),!v&&T.target===S.current&&m.getState().userSelectionRect&&(I==null||I(T)),m.setState({userSelectionActive:!1,userSelectionRect:null}),N.current&&(l==null||l(T),m.setState({nodesSelectionActive:k.current.size>0})))},R=r===!0||Array.isArray(r)&&r.includes(0);return M.jsxs("div",{className:je(["react-flow__pane",{draggable:R,dragging:w,selection:t}]),onClick:x?void 0:hp(I,S),onContextMenu:hp(O,S),onWheel:hp(L,S),onPointerEnter:x?void 0:f,onPointerMove:x?V:d,onPointerUp:x?P:void 0,onPointerDownCapture:x?_:void 0,onClickCapture:x?$:void 0,onPointerLeave:h,ref:S,style:Hd,children:[p,M.jsx(FF,{})]})}function wg({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:l,onError:a}=e.getState(),c=l.get(t);if(!c){a==null||a("012",Zn.error012(t));return}e.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&o)&&(s({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var u;return(u=r==null?void 0:r.current)==null?void 0:u.blur()})):i([t])}function wM({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const l=Ne(),[a,c]=b.useState(!1),u=b.useRef();return b.useEffect(()=>{u.current=g$({getStoreItems:()=>l.getState(),onNodeMouseDown:f=>{wg({id:f,store:l,nodeRef:t})},onDragStart:()=>{c(!0)},onDragStop:()=>{c(!1)}})},[]),b.useEffect(()=>{var f,d;if(e)(f=u.current)==null||f.destroy();else if(t.current)return(d=u.current)==null||d.update({noDragClassName:n,handleSelector:r,domNode:t.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{var h;(h=u.current)==null||h.destroy()}},[n,r,e,s,t,i]),a}const UF=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function xM(){const t=Ne();return b.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:l,updateNodePositions:a,nodeLookup:c,nodeOrigin:u}=t.getState(),f=new Map,d=UF(o),h=i?s[0]:5,p=i?s[1]:5,m=n.direction.x*h*n.factor,v=n.direction.y*p*n.factor;for(const[,g]of c){if(!d(g))continue;let w={x:g.internals.positionAbsolute.x+m,y:g.internals.positionAbsolute.y+v};i&&(w=uc(w,s));const{position:y,positionAbsolute:x}=IT({nodeId:g.id,nextPosition:w,nodeLookup:c,nodeExtent:r,nodeOrigin:u,onError:l});g.position=y,g.internals.positionAbsolute=x,f.set(g.id,g)}a(f)},[])}const N0=b.createContext(null),WF=N0.Provider;N0.Consumer;const SM=()=>b.useContext(N0),KF=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),qF=(t,e,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:l,toHandle:a,isValid:c}=o,u=(a==null?void 0:a.nodeId)===t&&(a==null?void 0:a.id)===e&&(a==null?void 0:a.type)===n;return{connectingFrom:(l==null?void 0:l.nodeId)===t&&(l==null?void 0:l.id)===e&&(l==null?void 0:l.type)===n,connectingTo:u,clickConnecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.id)===e&&(i==null?void 0:i.type)===n,isPossibleEndHandle:s===Mo.Strict?(l==null?void 0:l.type)!==n:t!==(l==null?void 0:l.nodeId)||e!==(l==null?void 0:l.id),connectionInProcess:!!l,clickConnectionInProcess:!!i,valid:u&&c}};function YF({type:t="source",position:e=J.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:a,className:c,onMouseDown:u,onTouchStart:f,...d},h){var V,P;const p=o||null,m=t==="target",v=Ne(),g=SM(),{connectOnClick:w,noPanClassName:y,rfId:x}=he(KF,Me),{connectingFrom:S,connectingTo:C,clickConnecting:k,isPossibleEndHandle:E,connectionInProcess:N,clickConnectionInProcess:I,valid:O}=he(qF(g,p,t),Me);g||(P=(V=v.getState()).onError)==null||P.call(V,"010",Zn.error010());const L=R=>{const{defaultEdgeOptions:T,onConnect:A,hasDefaultEdges:D}=v.getState(),B={...T,...R};if(D){const{edges:z,setEdges:U}=v.getState();U(e$(B,z))}A==null||A(B),l==null||l(B)},$=R=>{if(!g)return;const T=HT(R.nativeEvent);if(i&&(T&&R.button===0||!T)){const A=v.getState();vg.onPointerDown(R.nativeEvent,{handleDomNode:R.currentTarget,autoPanOnConnect:A.autoPanOnConnect,connectionMode:A.connectionMode,connectionRadius:A.connectionRadius,domNode:A.domNode,nodeLookup:A.nodeLookup,lib:A.lib,isTarget:m,handleId:p,nodeId:g,flowId:A.rfId,panBy:A.panBy,cancelConnection:A.cancelConnection,onConnectStart:A.onConnectStart,onConnectEnd:A.onConnectEnd,updateConnection:A.updateConnection,onConnect:L,isValidConnection:n||A.isValidConnection,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,autoPanSpeed:A.autoPanSpeed,dragThreshold:A.connectionDragThreshold})}T?u==null||u(R):f==null||f(R)},_=R=>{const{onClickConnectStart:T,onClickConnectEnd:A,connectionClickStartHandle:D,connectionMode:B,isValidConnection:z,lib:U,rfId:H,nodeLookup:X,connection:G}=v.getState();if(!g||!D&&!i)return;if(!D){T==null||T(R.nativeEvent,{nodeId:g,handleId:p,handleType:t}),v.setState({connectionClickStartHandle:{nodeId:g,type:t,id:p}});return}const Q=FT(R.target),W=n||z,{connection:ee,isValid:ce}=vg.isValid(R.nativeEvent,{handle:{nodeId:g,id:p,type:t},connectionMode:B,fromNodeId:D.nodeId,fromHandleId:D.id||null,fromType:D.type,isValidConnection:W,flowId:H,doc:Q,lib:U,nodeLookup:X});ce&&ee&&L(ee);const se=structuredClone(G);delete se.inProgress,se.toPosition=se.toHandle?se.toHandle.position:null,A==null||A(R,se),v.setState({connectionClickStartHandle:null})};return M.jsx("div",{"data-handleid":p,"data-nodeid":g,"data-handlepos":e,"data-id":`${x}-${g}-${p}-${t}`,className:je(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",y,c,{source:!m,target:m,connectable:r,connectablestart:i,connectableend:s,clickconnecting:k,connectingfrom:S,connectingto:C,valid:O,connectionindicator:r&&(!N||E)&&(N||I?s:i)}]),onMouseDown:$,onTouchStart:$,onClick:w?_:void 0,ref:h,...d,children:a})}const Po=b.memo(yM(YF));function XF({data:t,isConnectable:e,sourcePosition:n=J.Bottom}){return M.jsxs(M.Fragment,{children:[t==null?void 0:t.label,M.jsx(Po,{type:"source",position:n,isConnectable:e})]})}function GF({data:t,isConnectable:e,targetPosition:n=J.Top,sourcePosition:r=J.Bottom}){return M.jsxs(M.Fragment,{children:[M.jsx(Po,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label,M.jsx(Po,{type:"source",position:r,isConnectable:e})]})}function JF(){return null}function QF({data:t,isConnectable:e,targetPosition:n=J.Top}){return M.jsxs(M.Fragment,{children:[M.jsx(Po,{type:"target",position:n,isConnectable:e}),t==null?void 0:t.label]})}const Af={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},m1={input:XF,default:GF,output:QF,group:JF};function ZF(t){var e,n,r,i;return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??((e=t.style)==null?void 0:e.width),height:t.height??t.initialHeight??((n=t.style)==null?void 0:n.height)}:{width:t.width??((r=t.style)==null?void 0:r.width),height:t.height??((i=t.style)==null?void 0:i.height)}}const e3=t=>{const{width:e,height:n,x:r,y:i}=cc(t.nodeLookup,{filter:s=>!!s.selected});return{width:An(e)?e:null,height:An(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${r}px,${i}px)`}};function t3({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=Ne(),{width:i,height:s,transformString:o,userSelectionActive:l}=he(e3,Me),a=xM(),c=b.useRef(null);if(b.useEffect(()=>{var d;n||(d=c.current)==null||d.focus({preventScroll:!0})},[n]),wM({nodeRef:c}),l||!i||!s)return null;const u=t?d=>{const h=r.getState().nodes.filter(p=>p.selected);t(d,h)}:void 0,f=d=>{Object.prototype.hasOwnProperty.call(Af,d.key)&&(d.preventDefault(),a({direction:Af[d.key],factor:d.shiftKey?4:1}))};return M.jsx("div",{className:je(["react-flow__nodesselection","react-flow__container",e]),style:{transform:o},children:M.jsx("div",{ref:c,className:"react-flow__nodesselection-rect",onContextMenu:u,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:i,height:s}})})}const g1=typeof window<"u"?window:void 0,n3=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function kM({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:l,deleteKeyCode:a,selectionKeyCode:c,selectionOnDrag:u,selectionMode:f,onSelectionStart:d,onSelectionEnd:h,multiSelectionKeyCode:p,panActivationKeyCode:m,zoomActivationKeyCode:v,elementsSelectable:g,zoomOnScroll:w,zoomOnPinch:y,panOnScroll:x,panOnScrollSpeed:S,panOnScrollMode:C,zoomOnDoubleClick:k,panOnDrag:E,defaultViewport:N,translateExtent:I,minZoom:O,maxZoom:L,preventScrolling:$,onSelectionContextMenu:_,noWheelClassName:V,noPanClassName:P,disableKeyboardA11y:R,onViewportChange:T,isControlledViewport:A}){const{nodesSelectionActive:D,userSelectionActive:B}=he(n3,Me),z=_a(c,{target:g1}),U=_a(m,{target:g1}),H=U||E,X=U||x,G=u&&H!==!0,Q=z||B||G;return LF({deleteKeyCode:a,multiSelectionKeyCode:p}),M.jsx(zF,{onPaneContextMenu:s,elementsSelectable:g,zoomOnScroll:w,zoomOnPinch:y,panOnScroll:X,panOnScrollSpeed:S,panOnScrollMode:C,zoomOnDoubleClick:k,panOnDrag:!z&&H,defaultViewport:N,translateExtent:I,minZoom:O,maxZoom:L,zoomActivationKeyCode:v,preventScrolling:$,noWheelClassName:V,noPanClassName:P,onViewportChange:T,isControlledViewport:A,paneClickDistance:l,selectionOnDrag:G,children:M.jsxs(HF,{onSelectionStart:d,onSelectionEnd:h,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:H,isSelecting:!!Q,selectionMode:f,selectionKeyPressed:z,paneClickDistance:l,selectionOnDrag:G,children:[t,D&&M.jsx(t3,{onSelectionContextMenu:_,noPanClassName:P,disableKeyboardA11y:R})]})})}kM.displayName="FlowRenderer";const r3=b.memo(kM),i3=t=>e=>t?x0(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function s3(t){return he(b.useCallback(i3(t),[t]),Me)}const o3=t=>t.updateNodeInternals;function l3(){const t=he(o3),[e]=b.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),t(r)}));return b.useEffect(()=>()=>{e==null||e.disconnect()},[e]),e}function a3({node:t,nodeType:e,hasDimensions:n,resizeObserver:r}){const i=Ne(),s=b.useRef(null),o=b.useRef(null),l=b.useRef(t.sourcePosition),a=b.useRef(t.targetPosition),c=b.useRef(e),u=n&&!!t.internals.handleBounds;return b.useEffect(()=>{s.current&&!t.hidden&&(!u||o.current!==s.current)&&(o.current&&(r==null||r.unobserve(o.current)),r==null||r.observe(s.current),o.current=s.current)},[u,t.hidden]),b.useEffect(()=>()=>{o.current&&(r==null||r.unobserve(o.current),o.current=null)},[]),b.useEffect(()=>{if(s.current){const f=c.current!==e,d=l.current!==t.sourcePosition,h=a.current!==t.targetPosition;(f||d||h)&&(c.current=e,l.current=t.sourcePosition,a.current=t.targetPosition,i.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:s.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),s}function c3({id:t,onClick:e,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:l,elementsSelectable:a,nodesConnectable:c,nodesFocusable:u,resizeObserver:f,noDragClassName:d,noPanClassName:h,disableKeyboardA11y:p,rfId:m,nodeTypes:v,nodeClickDistance:g,onError:w}){const{node:y,internals:x,isParent:S}=he(W=>{const ee=W.nodeLookup.get(t),ce=W.parentLookup.has(t);return{node:ee,internals:ee.internals,isParent:ce}},Me);let C=y.type||"default",k=(v==null?void 0:v[C])||m1[C];k===void 0&&(w==null||w("003",Zn.error003(C)),C="default",k=(v==null?void 0:v.default)||m1.default);const E=!!(y.draggable||l&&typeof y.draggable>"u"),N=!!(y.selectable||a&&typeof y.selectable>"u"),I=!!(y.connectable||c&&typeof y.connectable>"u"),O=!!(y.focusable||u&&typeof y.focusable>"u"),L=Ne(),$=zT(y),_=a3({node:y,nodeType:C,hasDimensions:$,resizeObserver:f}),V=wM({nodeRef:_,disabled:y.hidden||!E,noDragClassName:d,handleSelector:y.dragHandle,nodeId:t,isSelectable:N,nodeClickDistance:g}),P=xM();if(y.hidden)return null;const R=Dr(y),T=ZF(y),A=N||E||e||n||r||i,D=n?W=>n(W,{...x.userNode}):void 0,B=r?W=>r(W,{...x.userNode}):void 0,z=i?W=>i(W,{...x.userNode}):void 0,U=s?W=>s(W,{...x.userNode}):void 0,H=o?W=>o(W,{...x.userNode}):void 0,X=W=>{const{selectNodesOnDrag:ee,nodeDragThreshold:ce}=L.getState();N&&(!ee||!E||ce>0)&&wg({id:t,store:L,nodeRef:_}),e&&e(W,{...x.userNode})},G=W=>{if(!(jT(W.nativeEvent)||p)){if(AT.includes(W.key)&&N){const ee=W.key==="Escape";wg({id:t,store:L,unselect:ee,nodeRef:_})}else if(E&&y.selected&&Object.prototype.hasOwnProperty.call(Af,W.key)){W.preventDefault();const{ariaLabelConfig:ee}=L.getState();L.setState({ariaLiveMessage:ee["node.a11yDescription.ariaLiveMessage"]({direction:W.key.replace("Arrow","").toLowerCase(),x:~~x.positionAbsolute.x,y:~~x.positionAbsolute.y})}),P({direction:Af[W.key],factor:W.shiftKey?4:1})}}},Q=()=>{var ye;if(p||!((ye=_.current)!=null&&ye.matches(":focus-visible")))return;const{transform:W,width:ee,height:ce,autoPanOnNodeFocus:se,setCenter:re}=L.getState();if(!se)return;x0(new Map([[t,y]]),{x:0,y:0,width:ee,height:ce},W,!0).length>0||re(y.position.x+R.width/2,y.position.y+R.height/2,{zoom:W[2]})};return M.jsx("div",{className:je(["react-flow__node",`react-flow__node-${C}`,{[h]:E},y.className,{selected:y.selected,selectable:N,parent:S,draggable:E,dragging:V}]),ref:_,style:{zIndex:x.z,transform:`translate(${x.positionAbsolute.x}px,${x.positionAbsolute.y}px)`,pointerEvents:A?"all":"none",visibility:$?"visible":"hidden",...y.style,...T},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:D,onMouseMove:B,onMouseLeave:z,onContextMenu:U,onClick:X,onDoubleClick:H,onKeyDown:O?G:void 0,tabIndex:O?0:void 0,onFocus:O?Q:void 0,role:y.ariaRole??(O?"group":void 0),"aria-roledescription":"node","aria-describedby":p?void 0:`${fM}-${m}`,"aria-label":y.ariaLabel,...y.domAttributes,children:M.jsx(WF,{value:t,children:M.jsx(k,{id:t,data:y.data,type:C,positionAbsoluteX:x.positionAbsolute.x,positionAbsoluteY:x.positionAbsolute.y,selected:y.selected??!1,selectable:N,draggable:E,deletable:y.deletable??!0,isConnectable:I,sourcePosition:y.sourcePosition,targetPosition:y.targetPosition,dragging:V,dragHandle:y.dragHandle,zIndex:x.z,parentId:y.parentId,...R})})})}var u3=b.memo(c3);const f3=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function CM(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=he(f3,Me),o=s3(t.onlyRenderVisibleElements),l=l3();return M.jsx("div",{className:"react-flow__nodes",style:Hd,children:o.map(a=>M.jsx(u3,{id:a,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:l,nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:t.nodeClickDistance,onError:s},a))})}CM.displayName="NodeRenderer";const d3=b.memo(CM);function h3(t){return he(b.useCallback(n=>{if(!t)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&Jz({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[t]),Me)}const p3=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t}};return M.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},m3=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t,fill:t}};return M.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},y1={[Mf.Arrow]:p3,[Mf.ArrowClosed]:m3};function g3(t){const e=Ne();return b.useMemo(()=>{var i,s;return Object.prototype.hasOwnProperty.call(y1,t)?y1[t]:((s=(i=e.getState()).onError)==null||s.call(i,"009",Zn.error009(t)),null)},[t])}const y3=({id:t,type:e,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const a=g3(e);return a?M.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:M.jsx(a,{color:n,strokeWidth:o})}):null},EM=({defaultColor:t,rfId:e})=>{const n=he(s=>s.edges),r=he(s=>s.defaultEdgeOptions),i=b.useMemo(()=>s$(n,{id:e,defaultColor:t,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,e,t]);return i.length?M.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:M.jsx("defs",{children:i.map(s=>M.jsx(y3,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};EM.displayName="MarkerDefinitions";var v3=b.memo(EM);function bM({x:t,y:e,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:s,labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:a,className:c,...u}){const[f,d]=b.useState({x:1,y:0,width:0,height:0}),h=je(["react-flow__edge-textwrapper",c]),p=b.useRef(null);return b.useEffect(()=>{if(p.current){const m=p.current.getBBox();d({x:m.x,y:m.y,width:m.width,height:m.height})}},[n]),n?M.jsxs("g",{transform:`translate(${t-f.width/2} ${e-f.height/2})`,className:h,visibility:f.width?"visible":"hidden",...u,children:[i&&M.jsx("rect",{width:f.width+2*o[0],x:-o[0],y:-o[1],height:f.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),M.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:p,style:r,children:n}),a]}):null}bM.displayName="EdgeText";const w3=b.memo(bM);function Ud({path:t,labelX:e,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:a,interactionWidth:c=20,...u}){return M.jsxs(M.Fragment,{children:[M.jsx("path",{...u,d:t,fill:"none",className:je(["react-flow__edge-path",u.className])}),c?M.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:c,className:"react-flow__edge-interaction"}):null,r&&An(e)&&An(n)?M.jsx(w3,{x:e,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:a}):null]})}function v1({pos:t,x1:e,y1:n,x2:r,y2:i}){return t===J.Left||t===J.Right?[.5*(e+r),n]:[e,.5*(n+i)]}function TM({sourceX:t,sourceY:e,sourcePosition:n=J.Bottom,targetX:r,targetY:i,targetPosition:s=J.Top}){const[o,l]=v1({pos:n,x1:t,y1:e,x2:r,y2:i}),[a,c]=v1({pos:s,x1:r,y1:i,x2:t,y2:e}),[u,f,d,h]=UT({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:a,targetControlY:c});return[`M${t},${e} C${o},${l} ${a},${c} ${r},${i}`,u,f,d,h]}function MM(t){return b.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o,targetPosition:l,label:a,labelStyle:c,labelShowBg:u,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:v,interactionWidth:g})=>{const[w,y,x]=TM({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l}),S=t.isInternal?void 0:e;return M.jsx(Ud,{id:S,path:w,labelX:y,labelY:x,label:a,labelStyle:c,labelShowBg:u,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:v,interactionWidth:g})})}const x3=MM({isInternal:!1}),NM=MM({isInternal:!0});x3.displayName="SimpleBezierEdge";NM.displayName="SimpleBezierEdgeInternal";function _M(t){return b.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:a,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:f,style:d,sourcePosition:h=J.Bottom,targetPosition:p=J.Top,markerEnd:m,markerStart:v,pathOptions:g,interactionWidth:w})=>{const[y,x,S]=mg({sourceX:n,sourceY:r,sourcePosition:h,targetX:i,targetY:s,targetPosition:p,borderRadius:g==null?void 0:g.borderRadius,offset:g==null?void 0:g.offset,stepPosition:g==null?void 0:g.stepPosition}),C=t.isInternal?void 0:e;return M.jsx(Ud,{id:C,path:y,labelX:x,labelY:S,label:o,labelStyle:l,labelShowBg:a,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:m,markerStart:v,interactionWidth:w})})}const AM=_M({isInternal:!1}),DM=_M({isInternal:!0});AM.displayName="SmoothStepEdge";DM.displayName="SmoothStepEdgeInternal";function OM(t){return b.memo(({id:e,...n})=>{var i;const r=t.isInternal?void 0:e;return M.jsx(AM,{...n,id:r,pathOptions:b.useMemo(()=>{var s;return{borderRadius:0,offset:(s=n.pathOptions)==null?void 0:s.offset}},[(i=n.pathOptions)==null?void 0:i.offset])})})}const S3=OM({isInternal:!1}),PM=OM({isInternal:!0});S3.displayName="StepEdge";PM.displayName="StepEdgeInternal";function RM(t){return b.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:a,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:h,markerStart:p,interactionWidth:m})=>{const[v,g,w]=qT({sourceX:n,sourceY:r,targetX:i,targetY:s}),y=t.isInternal?void 0:e;return M.jsx(Ud,{id:y,path:v,labelX:g,labelY:w,label:o,labelStyle:l,labelShowBg:a,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:h,markerStart:p,interactionWidth:m})})}const k3=RM({isInternal:!1}),IM=RM({isInternal:!0});k3.displayName="StraightEdge";IM.displayName="StraightEdgeInternal";function LM(t){return b.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=J.Bottom,targetPosition:l=J.Top,label:a,labelStyle:c,labelShowBg:u,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:v,pathOptions:g,interactionWidth:w})=>{const[y,x,S]=WT({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l,curvature:g==null?void 0:g.curvature}),C=t.isInternal?void 0:e;return M.jsx(Ud,{id:C,path:y,labelX:x,labelY:S,label:a,labelStyle:c,labelShowBg:u,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:v,interactionWidth:w})})}const C3=LM({isInternal:!1}),VM=LM({isInternal:!0});C3.displayName="BezierEdge";VM.displayName="BezierEdgeInternal";const w1={default:VM,straight:IM,step:PM,smoothstep:DM,simplebezier:NM},x1={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},E3=(t,e,n)=>n===J.Left?t-e:n===J.Right?t+e:t,b3=(t,e,n)=>n===J.Top?t-e:n===J.Bottom?t+e:t,S1="react-flow__edgeupdater";function k1({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:l}){return M.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:je([S1,`${S1}-${l}`]),cx:E3(e,r,t),cy:b3(n,r,t),r,stroke:"transparent",fill:"transparent"})}function T3({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:l,targetPosition:a,onReconnect:c,onReconnectStart:u,onReconnectEnd:f,setReconnecting:d,setUpdateHover:h}){const p=Ne(),m=(x,S)=>{if(x.button!==0)return;const{autoPanOnConnect:C,domNode:k,isValidConnection:E,connectionMode:N,connectionRadius:I,lib:O,onConnectStart:L,onConnectEnd:$,cancelConnection:_,nodeLookup:V,rfId:P,panBy:R,updateConnection:T}=p.getState(),A=S.type==="target",D=(U,H)=>{d(!1),f==null||f(U,n,S.type,H)},B=U=>c==null?void 0:c(n,U),z=(U,H)=>{d(!0),u==null||u(x,n,S.type),L==null||L(U,H)};vg.onPointerDown(x.nativeEvent,{autoPanOnConnect:C,connectionMode:N,connectionRadius:I,domNode:k,handleId:S.id,nodeId:S.nodeId,nodeLookup:V,isTarget:A,edgeUpdaterType:S.type,lib:O,flowId:P,cancelConnection:_,panBy:R,isValidConnection:E,onConnect:B,onConnectStart:z,onConnectEnd:$,onReconnectEnd:D,updateConnection:T,getTransform:()=>p.getState().transform,getFromHandle:()=>p.getState().connection.fromHandle,dragThreshold:p.getState().connectionDragThreshold,handleDomNode:x.currentTarget})},v=x=>m(x,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),g=x=>m(x,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),w=()=>h(!0),y=()=>h(!1);return M.jsxs(M.Fragment,{children:[(t===!0||t==="source")&&M.jsx(k1,{position:l,centerX:r,centerY:i,radius:e,onMouseDown:v,onMouseEnter:w,onMouseOut:y,type:"source"}),(t===!0||t==="target")&&M.jsx(k1,{position:a,centerX:s,centerY:o,radius:e,onMouseDown:g,onMouseEnter:w,onMouseOut:y,type:"target"})]})}function M3({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:l,onMouseMove:a,onMouseLeave:c,reconnectRadius:u,onReconnect:f,onReconnectStart:d,onReconnectEnd:h,rfId:p,edgeTypes:m,noPanClassName:v,onError:g,disableKeyboardA11y:w}){let y=he(re=>re.edgeLookup.get(t));const x=he(re=>re.defaultEdgeOptions);y=x?{...x,...y}:y;let S=y.type||"default",C=(m==null?void 0:m[S])||w1[S];C===void 0&&(g==null||g("011",Zn.error011(S)),S="default",C=(m==null?void 0:m.default)||w1.default);const k=!!(y.focusable||e&&typeof y.focusable>"u"),E=typeof f<"u"&&(y.reconnectable||n&&typeof y.reconnectable>"u"),N=!!(y.selectable||r&&typeof y.selectable>"u"),I=b.useRef(null),[O,L]=b.useState(!1),[$,_]=b.useState(!1),V=Ne(),{zIndex:P,sourceX:R,sourceY:T,targetX:A,targetY:D,sourcePosition:B,targetPosition:z}=he(b.useCallback(re=>{const te=re.nodeLookup.get(y.source),ye=re.nodeLookup.get(y.target);if(!te||!ye)return{zIndex:y.zIndex,...x1};const ke=i$({id:t,sourceNode:te,targetNode:ye,sourceHandle:y.sourceHandle||null,targetHandle:y.targetHandle||null,connectionMode:re.connectionMode,onError:g});return{zIndex:Gz({selected:y.selected,zIndex:y.zIndex,sourceNode:te,targetNode:ye,elevateOnSelect:re.elevateEdgesOnSelect,zIndexMode:re.zIndexMode}),...ke||x1}},[y.source,y.target,y.sourceHandle,y.targetHandle,y.selected,y.zIndex]),Me),U=b.useMemo(()=>y.markerStart?`url('#${gg(y.markerStart,p)}')`:void 0,[y.markerStart,p]),H=b.useMemo(()=>y.markerEnd?`url('#${gg(y.markerEnd,p)}')`:void 0,[y.markerEnd,p]);if(y.hidden||R===null||T===null||A===null||D===null)return null;const X=re=>{var ge;const{addSelectedEdges:te,unselectNodesAndEdges:ye,multiSelectionActive:ke}=V.getState();N&&(V.setState({nodesSelectionActive:!1}),y.selected&&ke?(ye({nodes:[],edges:[y]}),(ge=I.current)==null||ge.blur()):te([t])),i&&i(re,y)},G=s?re=>{s(re,{...y})}:void 0,Q=o?re=>{o(re,{...y})}:void 0,W=l?re=>{l(re,{...y})}:void 0,ee=a?re=>{a(re,{...y})}:void 0,ce=c?re=>{c(re,{...y})}:void 0,se=re=>{var te;if(!w&&AT.includes(re.key)&&N){const{unselectNodesAndEdges:ye,addSelectedEdges:ke}=V.getState();re.key==="Escape"?((te=I.current)==null||te.blur(),ye({edges:[y]})):ke([t])}};return M.jsx("svg",{style:{zIndex:P},children:M.jsxs("g",{className:je(["react-flow__edge",`react-flow__edge-${S}`,y.className,v,{selected:y.selected,animated:y.animated,inactive:!N&&!i,updating:O,selectable:N}]),onClick:X,onDoubleClick:G,onContextMenu:Q,onMouseEnter:W,onMouseMove:ee,onMouseLeave:ce,onKeyDown:k?se:void 0,tabIndex:k?0:void 0,role:y.ariaRole??(k?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":y.ariaLabel===null?void 0:y.ariaLabel||`Edge from ${y.source} to ${y.target}`,"aria-describedby":k?`${dM}-${p}`:void 0,ref:I,...y.domAttributes,children:[!$&&M.jsx(C,{id:t,source:y.source,target:y.target,type:y.type,selected:y.selected,animated:y.animated,selectable:N,deletable:y.deletable??!0,label:y.label,labelStyle:y.labelStyle,labelShowBg:y.labelShowBg,labelBgStyle:y.labelBgStyle,labelBgPadding:y.labelBgPadding,labelBgBorderRadius:y.labelBgBorderRadius,sourceX:R,sourceY:T,targetX:A,targetY:D,sourcePosition:B,targetPosition:z,data:y.data,style:y.style,sourceHandleId:y.sourceHandle,targetHandleId:y.targetHandle,markerStart:U,markerEnd:H,pathOptions:"pathOptions"in y?y.pathOptions:void 0,interactionWidth:y.interactionWidth}),E&&M.jsx(T3,{edge:y,isReconnectable:E,reconnectRadius:u,onReconnect:f,onReconnectStart:d,onReconnectEnd:h,sourceX:R,sourceY:T,targetX:A,targetY:D,sourcePosition:B,targetPosition:z,setUpdateHover:L,setReconnecting:_})]})})}var N3=b.memo(M3);const _3=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function BM({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:a,onEdgeMouseLeave:c,onEdgeClick:u,reconnectRadius:f,onEdgeDoubleClick:d,onReconnectStart:h,onReconnectEnd:p,disableKeyboardA11y:m}){const{edgesFocusable:v,edgesReconnectable:g,elementsSelectable:w,onError:y}=he(_3,Me),x=h3(e);return M.jsxs("div",{className:"react-flow__edges",children:[M.jsx(v3,{defaultColor:t,rfId:n}),x.map(S=>M.jsx(N3,{id:S,edgesFocusable:v,edgesReconnectable:g,elementsSelectable:w,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:l,onMouseMove:a,onMouseLeave:c,onClick:u,reconnectRadius:f,onDoubleClick:d,onReconnectStart:h,onReconnectEnd:p,rfId:n,onError:y,edgeTypes:r,disableKeyboardA11y:m},S))]})}BM.displayName="EdgeRenderer";const A3=b.memo(BM),D3=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function O3({children:t}){const e=he(D3);return M.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function P3(t){const e=jd(),n=b.useRef(!1);b.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const R3=t=>{var e;return(e=t.panZoom)==null?void 0:e.syncViewport};function I3(t){const e=he(R3),n=Ne();return b.useEffect(()=>{t&&(e==null||e(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function L3(t){return t.connection.inProgress?{...t.connection,to:fc(t.connection.to,t.transform)}:{...t.connection}}function V3(t){return L3}function B3(t){const e=V3();return he(e,Me)}const z3=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function $3({containerStyle:t,style:e,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:l,inProgress:a}=he(z3,Me);return!(s&&i&&a)?null:M.jsx("svg",{style:t,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:M.jsx("g",{className:je(["react-flow__connection",PT(l)]),children:M.jsx(zM,{style:e,type:n,CustomComponent:r,isValid:l})})})}const zM=({style:t,type:e=qr.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:l,fromPosition:a,to:c,toNode:u,toHandle:f,toPosition:d,pointer:h}=B3();if(!i)return;if(n)return M.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:o,fromHandle:l,fromX:s.x,fromY:s.y,toX:c.x,toY:c.y,fromPosition:a,toPosition:d,connectionStatus:PT(r),toNode:u,toHandle:f,pointer:h});let p="";const m={sourceX:s.x,sourceY:s.y,sourcePosition:a,targetX:c.x,targetY:c.y,targetPosition:d};switch(e){case qr.Bezier:[p]=WT(m);break;case qr.SimpleBezier:[p]=TM(m);break;case qr.Step:[p]=mg({...m,borderRadius:0});break;case qr.SmoothStep:[p]=mg(m);break;default:[p]=qT(m)}return M.jsx("path",{d:p,fill:"none",className:"react-flow__connection-path",style:t})};zM.displayName="ConnectionLine";const F3={};function C1(t=F3){b.useRef(t),Ne(),b.useEffect(()=>{},[t])}function j3(){Ne(),b.useRef(!1),b.useEffect(()=>{},[])}function $M({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:a,onNodeMouseLeave:c,onNodeContextMenu:u,onSelectionContextMenu:f,onSelectionStart:d,onSelectionEnd:h,connectionLineType:p,connectionLineStyle:m,connectionLineComponent:v,connectionLineContainerStyle:g,selectionKeyCode:w,selectionOnDrag:y,selectionMode:x,multiSelectionKeyCode:S,panActivationKeyCode:C,zoomActivationKeyCode:k,deleteKeyCode:E,onlyRenderVisibleElements:N,elementsSelectable:I,defaultViewport:O,translateExtent:L,minZoom:$,maxZoom:_,preventScrolling:V,defaultMarkerColor:P,zoomOnScroll:R,zoomOnPinch:T,panOnScroll:A,panOnScrollSpeed:D,panOnScrollMode:B,zoomOnDoubleClick:z,panOnDrag:U,onPaneClick:H,onPaneMouseEnter:X,onPaneMouseMove:G,onPaneMouseLeave:Q,onPaneScroll:W,onPaneContextMenu:ee,paneClickDistance:ce,nodeClickDistance:se,onEdgeContextMenu:re,onEdgeMouseEnter:te,onEdgeMouseMove:ye,onEdgeMouseLeave:ke,reconnectRadius:ge,onReconnect:ht,onReconnectStart:Rr,onReconnectEnd:lr,noDragClassName:Ai,noWheelClassName:ol,noPanClassName:ll,disableKeyboardA11y:al,nodeExtent:Mh,rfId:Cc,viewport:Ts,onViewportChange:cl}){return C1(t),C1(e),j3(),P3(n),I3(Ts),M.jsx(r3,{onPaneClick:H,onPaneMouseEnter:X,onPaneMouseMove:G,onPaneMouseLeave:Q,onPaneContextMenu:ee,onPaneScroll:W,paneClickDistance:ce,deleteKeyCode:E,selectionKeyCode:w,selectionOnDrag:y,selectionMode:x,onSelectionStart:d,onSelectionEnd:h,multiSelectionKeyCode:S,panActivationKeyCode:C,zoomActivationKeyCode:k,elementsSelectable:I,zoomOnScroll:R,zoomOnPinch:T,zoomOnDoubleClick:z,panOnScroll:A,panOnScrollSpeed:D,panOnScrollMode:B,panOnDrag:U,defaultViewport:O,translateExtent:L,minZoom:$,maxZoom:_,onSelectionContextMenu:f,preventScrolling:V,noDragClassName:Ai,noWheelClassName:ol,noPanClassName:ll,disableKeyboardA11y:al,onViewportChange:cl,isControlledViewport:!!Ts,children:M.jsxs(O3,{children:[M.jsx(A3,{edgeTypes:e,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:ht,onReconnectStart:Rr,onReconnectEnd:lr,onlyRenderVisibleElements:N,onEdgeContextMenu:re,onEdgeMouseEnter:te,onEdgeMouseMove:ye,onEdgeMouseLeave:ke,reconnectRadius:ge,defaultMarkerColor:P,noPanClassName:ll,disableKeyboardA11y:al,rfId:Cc}),M.jsx($3,{style:m,type:p,component:v,containerStyle:g}),M.jsx("div",{className:"react-flow__edgelabel-renderer"}),M.jsx(d3,{nodeTypes:t,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:a,onNodeMouseLeave:c,onNodeContextMenu:u,nodeClickDistance:se,onlyRenderVisibleElements:N,noPanClassName:ll,noDragClassName:Ai,disableKeyboardA11y:al,nodeExtent:Mh,rfId:Cc}),M.jsx("div",{className:"react-flow__viewport-portal"})]})})}$M.displayName="GraphView";const H3=b.memo($M),E1=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:a=.5,maxZoom:c=2,nodeOrigin:u,nodeExtent:f,zIndexMode:d="basic"}={})=>{const h=new Map,p=new Map,m=new Map,v=new Map,g=r??e??[],w=n??t??[],y=u??[0,0],x=f??ba;GT(m,v,g);const S=yg(w,h,p,{nodeOrigin:y,nodeExtent:x,zIndexMode:d});let C=[0,0,1];if(o&&i&&s){const k=cc(h,{filter:O=>!!((O.width||O.initialWidth)&&(O.height||O.initialHeight))}),{x:E,y:N,zoom:I}=S0(k,i,s,a,c,(l==null?void 0:l.padding)??.1);C=[E,N,I]}return{rfId:"1",width:i??0,height:s??0,transform:C,nodes:w,nodesInitialized:S,nodeLookup:h,parentLookup:p,edges:g,edgeLookup:v,connectionLookup:m,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:a,maxZoom:c,translateExtent:ba,nodeExtent:x,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Mo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:y,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:o??!1,fitViewOptions:l,fitViewResolver:null,connection:{...OT},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:Uz,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:DT,zIndexMode:d,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},U3=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:a,maxZoom:c,nodeOrigin:u,nodeExtent:f,zIndexMode:d})=>aF((h,p)=>{async function m(){const{nodeLookup:v,panZoom:g,fitViewOptions:w,fitViewResolver:y,width:x,height:S,minZoom:C,maxZoom:k}=p();g&&(await jz({nodes:v,width:x,height:S,panZoom:g,minZoom:C,maxZoom:k},w),y==null||y.resolve(!0),h({fitViewResolver:null}))}return{...E1({nodes:t,edges:e,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:a,maxZoom:c,nodeOrigin:u,nodeExtent:f,defaultNodes:n,defaultEdges:r,zIndexMode:d}),setNodes:v=>{const{nodeLookup:g,parentLookup:w,nodeOrigin:y,elevateNodesOnSelect:x,fitViewQueued:S,zIndexMode:C}=p(),k=yg(v,g,w,{nodeOrigin:y,nodeExtent:f,elevateNodesOnSelect:x,checkEquality:!0,zIndexMode:C});S&&k?(m(),h({nodes:v,nodesInitialized:k,fitViewQueued:!1,fitViewOptions:void 0})):h({nodes:v,nodesInitialized:k})},setEdges:v=>{const{connectionLookup:g,edgeLookup:w}=p();GT(g,w,v),h({edges:v})},setDefaultNodesAndEdges:(v,g)=>{if(v){const{setNodes:w}=p();w(v),h({hasDefaultNodes:!0})}if(g){const{setEdges:w}=p();w(g),h({hasDefaultEdges:!0})}},updateNodeInternals:v=>{const{triggerNodeChanges:g,nodeLookup:w,parentLookup:y,domNode:x,nodeOrigin:S,nodeExtent:C,debug:k,fitViewQueued:E,zIndexMode:N}=p(),{changes:I,updatedInternals:O}=d$(v,w,y,x,S,C,N);O&&(a$(w,y,{nodeOrigin:S,nodeExtent:C,zIndexMode:N}),E?(m(),h({fitViewQueued:!1,fitViewOptions:void 0})):h({}),(I==null?void 0:I.length)>0&&(k&&console.log("React Flow: trigger node changes",I),g==null||g(I)))},updateNodePositions:(v,g=!1)=>{const w=[];let y=[];const{nodeLookup:x,triggerNodeChanges:S,connection:C,updateConnection:k,onNodesChangeMiddlewareMap:E}=p();for(const[N,I]of v){const O=x.get(N),L=!!(O!=null&&O.expandParent&&(O!=null&&O.parentId)&&(I!=null&&I.position)),$={id:N,type:"position",position:L?{x:Math.max(0,I.position.x),y:Math.max(0,I.position.y)}:I.position,dragging:g};if(O&&C.inProgress&&C.fromNode.id===O.id){const _=hs(O,C.fromHandle,J.Left,!0);k({...C,from:_})}L&&O.parentId&&w.push({id:N,parentId:O.parentId,rect:{...I.internals.positionAbsolute,width:I.measured.width??0,height:I.measured.height??0}}),y.push($)}if(w.length>0){const{parentLookup:N,nodeOrigin:I}=p(),O=M0(w,x,N,I);y.push(...O)}for(const N of E.values())y=N(y);S(y)},triggerNodeChanges:v=>{const{onNodesChange:g,setNodes:w,nodes:y,hasDefaultNodes:x,debug:S}=p();if(v!=null&&v.length){if(x){const C=mM(v,y);w(C)}S&&console.log("React Flow: trigger node changes",v),g==null||g(v)}},triggerEdgeChanges:v=>{const{onEdgesChange:g,setEdges:w,edges:y,hasDefaultEdges:x,debug:S}=p();if(v!=null&&v.length){if(x){const C=gM(v,y);w(C)}S&&console.log("React Flow: trigger edge changes",v),g==null||g(v)}},addSelectedNodes:v=>{const{multiSelectionActive:g,edgeLookup:w,nodeLookup:y,triggerNodeChanges:x,triggerEdgeChanges:S}=p();if(g){const C=v.map(k=>Ri(k,!0));x(C);return}x(Ys(y,new Set([...v]),!0)),S(Ys(w))},addSelectedEdges:v=>{const{multiSelectionActive:g,edgeLookup:w,nodeLookup:y,triggerNodeChanges:x,triggerEdgeChanges:S}=p();if(g){const C=v.map(k=>Ri(k,!0));S(C);return}S(Ys(w,new Set([...v]))),x(Ys(y,new Set,!0))},unselectNodesAndEdges:({nodes:v,edges:g}={})=>{const{edges:w,nodes:y,nodeLookup:x,triggerNodeChanges:S,triggerEdgeChanges:C}=p(),k=v||y,E=g||w,N=k.map(O=>{const L=x.get(O.id);return L&&(L.selected=!1),Ri(O.id,!1)}),I=E.map(O=>Ri(O.id,!1));S(N),C(I)},setMinZoom:v=>{const{panZoom:g,maxZoom:w}=p();g==null||g.setScaleExtent([v,w]),h({minZoom:v})},setMaxZoom:v=>{const{panZoom:g,minZoom:w}=p();g==null||g.setScaleExtent([w,v]),h({maxZoom:v})},setTranslateExtent:v=>{var g;(g=p().panZoom)==null||g.setTranslateExtent(v),h({translateExtent:v})},resetSelectedElements:()=>{const{edges:v,nodes:g,triggerNodeChanges:w,triggerEdgeChanges:y,elementsSelectable:x}=p();if(!x)return;const S=g.reduce((k,E)=>E.selected?[...k,Ri(E.id,!1)]:k,[]),C=v.reduce((k,E)=>E.selected?[...k,Ri(E.id,!1)]:k,[]);w(S),y(C)},setNodeExtent:v=>{const{nodes:g,nodeLookup:w,parentLookup:y,nodeOrigin:x,elevateNodesOnSelect:S,nodeExtent:C,zIndexMode:k}=p();v[0][0]===C[0][0]&&v[0][1]===C[0][1]&&v[1][0]===C[1][0]&&v[1][1]===C[1][1]||(yg(g,w,y,{nodeOrigin:x,nodeExtent:v,elevateNodesOnSelect:S,checkEquality:!1,zIndexMode:k}),h({nodeExtent:v}))},panBy:v=>{const{transform:g,width:w,height:y,panZoom:x,translateExtent:S}=p();return h$({delta:v,panZoom:x,transform:g,translateExtent:S,width:w,height:y})},setCenter:async(v,g,w)=>{const{width:y,height:x,maxZoom:S,panZoom:C}=p();if(!C)return Promise.resolve(!1);const k=typeof(w==null?void 0:w.zoom)<"u"?w.zoom:S;return await C.setViewport({x:y/2-v*k,y:x/2-g*k,zoom:k},{duration:w==null?void 0:w.duration,ease:w==null?void 0:w.ease,interpolate:w==null?void 0:w.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{h({connection:{...OT}})},updateConnection:v=>{h({connection:v})},reset:()=>h({...E1()})}},Object.is);function FM({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,initialMinZoom:o,initialMaxZoom:l,initialFitViewOptions:a,fitView:c,nodeOrigin:u,nodeExtent:f,zIndexMode:d,children:h}){const[p]=b.useState(()=>U3({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:c,minZoom:o,maxZoom:l,fitViewOptions:a,nodeOrigin:u,nodeExtent:f,zIndexMode:d}));return M.jsx(cF,{value:p,children:M.jsx(OF,{children:h})})}function W3({children:t,nodes:e,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:l,fitViewOptions:a,minZoom:c,maxZoom:u,nodeOrigin:f,nodeExtent:d,zIndexMode:h}){return b.useContext($d)?M.jsx(M.Fragment,{children:t}):M.jsx(FM,{initialNodes:e,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:l,initialFitViewOptions:a,initialMinZoom:c,initialMaxZoom:u,nodeOrigin:f,nodeExtent:d,zIndexMode:h,children:t})}const K3={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function q3({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:l,onEdgeClick:a,onInit:c,onMove:u,onMoveStart:f,onMoveEnd:d,onConnect:h,onConnectStart:p,onConnectEnd:m,onClickConnectStart:v,onClickConnectEnd:g,onNodeMouseEnter:w,onNodeMouseMove:y,onNodeMouseLeave:x,onNodeContextMenu:S,onNodeDoubleClick:C,onNodeDragStart:k,onNodeDrag:E,onNodeDragStop:N,onNodesDelete:I,onEdgesDelete:O,onDelete:L,onSelectionChange:$,onSelectionDragStart:_,onSelectionDrag:V,onSelectionDragStop:P,onSelectionContextMenu:R,onSelectionStart:T,onSelectionEnd:A,onBeforeDelete:D,connectionMode:B,connectionLineType:z=qr.Bezier,connectionLineStyle:U,connectionLineComponent:H,connectionLineContainerStyle:X,deleteKeyCode:G="Backspace",selectionKeyCode:Q="Shift",selectionOnDrag:W=!1,selectionMode:ee=Ta.Full,panActivationKeyCode:ce="Space",multiSelectionKeyCode:se=Na()?"Meta":"Control",zoomActivationKeyCode:re=Na()?"Meta":"Control",snapToGrid:te,snapGrid:ye,onlyRenderVisibleElements:ke=!1,selectNodesOnDrag:ge,nodesDraggable:ht,autoPanOnNodeFocus:Rr,nodesConnectable:lr,nodesFocusable:Ai,nodeOrigin:ol=hM,edgesFocusable:ll,edgesReconnectable:al,elementsSelectable:Mh=!0,defaultViewport:Cc=kF,minZoom:Ts=.5,maxZoom:cl=2,translateExtent:nw=ba,preventScrolling:AO=!0,nodeExtent:Nh,defaultMarkerColor:DO="#b1b1b7",zoomOnScroll:OO=!0,zoomOnPinch:PO=!0,panOnScroll:RO=!1,panOnScrollSpeed:IO=.5,panOnScrollMode:LO=Gi.Free,zoomOnDoubleClick:VO=!0,panOnDrag:BO=!0,onPaneClick:zO,onPaneMouseEnter:$O,onPaneMouseMove:FO,onPaneMouseLeave:jO,onPaneScroll:HO,onPaneContextMenu:UO,paneClickDistance:WO=1,nodeClickDistance:KO=0,children:qO,onReconnect:YO,onReconnectStart:XO,onReconnectEnd:GO,onEdgeContextMenu:JO,onEdgeDoubleClick:QO,onEdgeMouseEnter:ZO,onEdgeMouseMove:eP,onEdgeMouseLeave:tP,reconnectRadius:nP=10,onNodesChange:rP,onEdgesChange:iP,noDragClassName:sP="nodrag",noWheelClassName:oP="nowheel",noPanClassName:rw="nopan",fitView:iw,fitViewOptions:sw,connectOnClick:lP,attributionPosition:aP,proOptions:cP,defaultEdgeOptions:uP,elevateNodesOnSelect:fP=!0,elevateEdgesOnSelect:dP=!1,disableKeyboardA11y:ow=!1,autoPanOnConnect:hP,autoPanOnNodeDrag:pP,autoPanSpeed:mP,connectionRadius:gP,isValidConnection:yP,onError:vP,style:wP,id:lw,nodeDragThreshold:xP,connectionDragThreshold:SP,viewport:kP,onViewportChange:CP,width:EP,height:bP,colorMode:TP="light",debug:MP,onScroll:Ec,ariaLabelConfig:NP,zIndexMode:aw="basic",..._P},AP){const _h=lw||"1",DP=TF(TP),OP=b.useCallback(cw=>{cw.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Ec==null||Ec(cw)},[Ec]);return M.jsx("div",{"data-testid":"rf__wrapper",..._P,onScroll:OP,style:{...wP,...K3},ref:AP,className:je(["react-flow",i,DP]),id:lw,role:"application",children:M.jsxs(W3,{nodes:t,edges:e,width:EP,height:bP,fitView:iw,fitViewOptions:sw,minZoom:Ts,maxZoom:cl,nodeOrigin:ol,nodeExtent:Nh,zIndexMode:aw,children:[M.jsx(H3,{onInit:c,onNodeClick:l,onEdgeClick:a,onNodeMouseEnter:w,onNodeMouseMove:y,onNodeMouseLeave:x,onNodeContextMenu:S,onNodeDoubleClick:C,nodeTypes:s,edgeTypes:o,connectionLineType:z,connectionLineStyle:U,connectionLineComponent:H,connectionLineContainerStyle:X,selectionKeyCode:Q,selectionOnDrag:W,selectionMode:ee,deleteKeyCode:G,multiSelectionKeyCode:se,panActivationKeyCode:ce,zoomActivationKeyCode:re,onlyRenderVisibleElements:ke,defaultViewport:Cc,translateExtent:nw,minZoom:Ts,maxZoom:cl,preventScrolling:AO,zoomOnScroll:OO,zoomOnPinch:PO,zoomOnDoubleClick:VO,panOnScroll:RO,panOnScrollSpeed:IO,panOnScrollMode:LO,panOnDrag:BO,onPaneClick:zO,onPaneMouseEnter:$O,onPaneMouseMove:FO,onPaneMouseLeave:jO,onPaneScroll:HO,onPaneContextMenu:UO,paneClickDistance:WO,nodeClickDistance:KO,onSelectionContextMenu:R,onSelectionStart:T,onSelectionEnd:A,onReconnect:YO,onReconnectStart:XO,onReconnectEnd:GO,onEdgeContextMenu:JO,onEdgeDoubleClick:QO,onEdgeMouseEnter:ZO,onEdgeMouseMove:eP,onEdgeMouseLeave:tP,reconnectRadius:nP,defaultMarkerColor:DO,noDragClassName:sP,noWheelClassName:oP,noPanClassName:rw,rfId:_h,disableKeyboardA11y:ow,nodeExtent:Nh,viewport:kP,onViewportChange:CP}),M.jsx(bF,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:p,onConnectEnd:m,onClickConnectStart:v,onClickConnectEnd:g,nodesDraggable:ht,autoPanOnNodeFocus:Rr,nodesConnectable:lr,nodesFocusable:Ai,edgesFocusable:ll,edgesReconnectable:al,elementsSelectable:Mh,elevateNodesOnSelect:fP,elevateEdgesOnSelect:dP,minZoom:Ts,maxZoom:cl,nodeExtent:Nh,onNodesChange:rP,onEdgesChange:iP,snapToGrid:te,snapGrid:ye,connectionMode:B,translateExtent:nw,connectOnClick:lP,defaultEdgeOptions:uP,fitView:iw,fitViewOptions:sw,onNodesDelete:I,onEdgesDelete:O,onDelete:L,onNodeDragStart:k,onNodeDrag:E,onNodeDragStop:N,onSelectionDrag:V,onSelectionDragStart:_,onSelectionDragStop:P,onMove:u,onMoveStart:f,onMoveEnd:d,noPanClassName:rw,nodeOrigin:ol,rfId:_h,autoPanOnConnect:hP,autoPanOnNodeDrag:pP,autoPanSpeed:mP,onError:vP,connectionRadius:gP,isValidConnection:yP,selectNodesOnDrag:ge,nodeDragThreshold:xP,connectionDragThreshold:SP,onBeforeDelete:D,debug:MP,ariaLabelConfig:NP,zIndexMode:aw}),M.jsx(SF,{onSelectionChange:$}),qO,M.jsx(gF,{proOptions:cP,position:aP}),M.jsx(mF,{rfId:_h,disableKeyboardA11y:ow})]})})}var Y3=yM(q3);function X3(t){const[e,n]=b.useState(t),r=b.useCallback(i=>n(s=>mM(i,s)),[]);return[e,n,r]}function G3(t){const[e,n]=b.useState(t),r=b.useCallback(i=>n(s=>gM(i,s)),[]);return[e,n,r]}function J3({dimensions:t,lineWidth:e,variant:n,className:r}){return M.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:je(["react-flow__background-pattern",n,r])})}function Q3({radius:t,className:e}){return M.jsx("circle",{cx:t,cy:t,r:t,className:je(["react-flow__background-pattern","dots",e])})}var ui;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(ui||(ui={}));const Z3={[ui.Dots]:1,[ui.Lines]:1,[ui.Cross]:6},ej=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function jM({id:t,variant:e=ui.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:l,style:a,className:c,patternClassName:u}){const f=b.useRef(null),{transform:d,patternId:h}=he(ej,Me),p=r||Z3[e],m=e===ui.Dots,v=e===ui.Cross,g=Array.isArray(n)?n:[n,n],w=[g[0]*d[2]||1,g[1]*d[2]||1],y=p*d[2],x=Array.isArray(s)?s:[s,s],S=v?[y,y]:w,C=[x[0]*d[2]||1+S[0]/2,x[1]*d[2]||1+S[1]/2],k=`${h}${t||""}`;return M.jsxs("svg",{className:je(["react-flow__background",c]),style:{...a,...Hd,"--xy-background-color-props":l,"--xy-background-pattern-color-props":o},ref:f,"data-testid":"rf__background",children:[M.jsx("pattern",{id:k,x:d[0]%w[0],y:d[1]%w[1],width:w[0],height:w[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${C[0]},-${C[1]})`,children:m?M.jsx(Q3,{radius:y/2,className:u}):M.jsx(J3,{dimensions:S,lineWidth:i,variant:e,className:u})}),M.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${k})`})]})}jM.displayName="Background";const tj=b.memo(jM);function nj(){return M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:M.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function rj(){return M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:M.jsx("path",{d:"M0 0h32v4.2H0z"})})}function ij(){return M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:M.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function sj(){return M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:M.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function oj(){return M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:M.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Zc({children:t,className:e,...n}){return M.jsx("button",{type:"button",className:je(["react-flow__controls-button",e]),...n,children:t})}const lj=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function HM({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:a,className:c,children:u,position:f="bottom-left",orientation:d="vertical","aria-label":h}){const p=Ne(),{isInteractive:m,minZoomReached:v,maxZoomReached:g,ariaLabelConfig:w}=he(lj,Me),{zoomIn:y,zoomOut:x,fitView:S}=jd(),C=()=>{y(),s==null||s()},k=()=>{x(),o==null||o()},E=()=>{S(i),l==null||l()},N=()=>{p.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),a==null||a(!m)},I=d==="horizontal"?"horizontal":"vertical";return M.jsxs(Fd,{className:je(["react-flow__controls",I,c]),position:f,style:t,"data-testid":"rf__controls","aria-label":h??w["controls.ariaLabel"],children:[e&&M.jsxs(M.Fragment,{children:[M.jsx(Zc,{onClick:C,className:"react-flow__controls-zoomin",title:w["controls.zoomIn.ariaLabel"],"aria-label":w["controls.zoomIn.ariaLabel"],disabled:g,children:M.jsx(nj,{})}),M.jsx(Zc,{onClick:k,className:"react-flow__controls-zoomout",title:w["controls.zoomOut.ariaLabel"],"aria-label":w["controls.zoomOut.ariaLabel"],disabled:v,children:M.jsx(rj,{})})]}),n&&M.jsx(Zc,{className:"react-flow__controls-fitview",onClick:E,title:w["controls.fitView.ariaLabel"],"aria-label":w["controls.fitView.ariaLabel"],children:M.jsx(ij,{})}),r&&M.jsx(Zc,{className:"react-flow__controls-interactive",onClick:N,title:w["controls.interactive.ariaLabel"],"aria-label":w["controls.interactive.ariaLabel"],children:m?M.jsx(oj,{}):M.jsx(sj,{})}),u]})}HM.displayName="Controls";const aj=b.memo(HM);function cj({id:t,x:e,y:n,width:r,height:i,style:s,color:o,strokeColor:l,strokeWidth:a,className:c,borderRadius:u,shapeRendering:f,selected:d,onClick:h}){const{background:p,backgroundColor:m}=s||{},v=o||p||m;return M.jsx("rect",{className:je(["react-flow__minimap-node",{selected:d},c]),x:e,y:n,rx:u,ry:u,width:r,height:i,style:{fill:v,stroke:l,strokeWidth:a},shapeRendering:f,onClick:h?g=>h(g,t):void 0})}const uj=b.memo(cj),fj=t=>t.nodes.map(e=>e.id),pp=t=>t instanceof Function?t:()=>t;function dj({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=uj,onClick:o}){const l=he(fj,Me),a=pp(e),c=pp(t),u=pp(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return M.jsx(M.Fragment,{children:l.map(d=>M.jsx(pj,{id:d,nodeColorFunc:a,nodeStrokeColorFunc:c,nodeClassNameFunc:u,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:f},d))})}function hj({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:l,onClick:a}){const{node:c,x:u,y:f,width:d,height:h}=he(p=>{const{internals:m}=p.nodeLookup.get(t),v=m.userNode,{x:g,y:w}=m.positionAbsolute,{width:y,height:x}=Dr(v);return{node:v,x:g,y:w,width:y,height:x}},Me);return!c||c.hidden||!zT(c)?null:M.jsx(l,{x:u,y:f,width:d,height:h,style:c.style,selected:!!c.selected,className:r(c),color:e(c),borderRadius:i,strokeColor:n(c),strokeWidth:s,shapeRendering:o,onClick:a,id:c.id})}const pj=b.memo(hj);var mj=b.memo(dj);const gj=200,yj=150,vj=t=>!t.hidden,wj=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?BT(cc(t.nodeLookup,{filter:vj}),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},xj="react-flow__minimap-desc";function UM({style:t,className:e,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:l,bgColor:a,maskColor:c,maskStrokeColor:u,maskStrokeWidth:f,position:d="bottom-right",onClick:h,onNodeClick:p,pannable:m=!1,zoomable:v=!1,ariaLabel:g,inversePan:w,zoomStep:y=1,offsetScale:x=5}){const S=Ne(),C=b.useRef(null),{boundingRect:k,viewBB:E,rfId:N,panZoom:I,translateExtent:O,flowWidth:L,flowHeight:$,ariaLabelConfig:_}=he(wj,Me),V=(t==null?void 0:t.width)??gj,P=(t==null?void 0:t.height)??yj,R=k.width/V,T=k.height/P,A=Math.max(R,T),D=A*V,B=A*P,z=x*A,U=k.x-(D-k.width)/2-z,H=k.y-(B-k.height)/2-z,X=D+z*2,G=B+z*2,Q=`${xj}-${N}`,W=b.useRef(0),ee=b.useRef();W.current=A,b.useEffect(()=>{if(C.current&&I)return ee.current=k$({domNode:C.current,panZoom:I,getTransform:()=>S.getState().transform,getViewScale:()=>W.current}),()=>{var te;(te=ee.current)==null||te.destroy()}},[I]),b.useEffect(()=>{var te;(te=ee.current)==null||te.update({translateExtent:O,width:L,height:$,inversePan:w,pannable:m,zoomStep:y,zoomable:v})},[m,v,w,y,O,L,$]);const ce=h?te=>{var ge;const[ye,ke]=((ge=ee.current)==null?void 0:ge.pointer(te))||[0,0];h(te,{x:ye,y:ke})}:void 0,se=p?b.useCallback((te,ye)=>{const ke=S.getState().nodeLookup.get(ye).internals.userNode;p(te,ke)},[]):void 0,re=g??_["minimap.ariaLabel"];return M.jsx(Fd,{position:d,style:{...t,"--xy-minimap-background-color-props":typeof a=="string"?a:void 0,"--xy-minimap-mask-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*A:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="number"?o:void 0},className:je(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:M.jsxs("svg",{width:V,height:P,viewBox:`${U} ${H} ${X} ${G}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":Q,ref:C,onClick:ce,children:[re&&M.jsx("title",{id:Q,children:re}),M.jsx(mj,{onClick:se,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:l}),M.jsx("path",{className:"react-flow__minimap-mask",d:`M${U-z},${H-z}h${X+z*2}v${G+z*2}h${-X-z*2}z
        M${E.x},${E.y}h${E.width}v${E.height}h${-E.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}UM.displayName="MiniMap";const Sj=b.memo(UM),kj=t=>e=>t?`${Math.max(1/e.transform[2],1)}`:void 0,Cj={[Do.Line]:"right",[Do.Handle]:"bottom-right"};function Ej({nodeId:t,position:e,variant:n=Do.Handle,className:r,style:i=void 0,children:s,color:o,minWidth:l=10,minHeight:a=10,maxWidth:c=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:f=!1,resizeDirection:d,autoScale:h=!0,shouldResize:p,onResizeStart:m,onResize:v,onResizeEnd:g}){const w=SM(),y=typeof t=="string"?t:w,x=Ne(),S=b.useRef(null),C=n===Do.Handle,k=he(b.useCallback(kj(C&&h),[C,h]),Me),E=b.useRef(null),N=e??Cj[n];b.useEffect(()=>{if(!(!S.current||!y))return E.current||(E.current=L$({domNode:S.current,nodeId:y,getStoreItems:()=>{const{nodeLookup:O,transform:L,snapGrid:$,snapToGrid:_,nodeOrigin:V,domNode:P}=x.getState();return{nodeLookup:O,transform:L,snapGrid:$,snapToGrid:_,nodeOrigin:V,paneDomNode:P}},onChange:(O,L)=>{const{triggerNodeChanges:$,nodeLookup:_,parentLookup:V,nodeOrigin:P}=x.getState(),R=[],T={x:O.x,y:O.y},A=_.get(y);if(A&&A.expandParent&&A.parentId){const D=A.origin??P,B=O.width??A.measured.width??0,z=O.height??A.measured.height??0,U={id:A.id,parentId:A.parentId,rect:{width:B,height:z,...$T({x:O.x??A.position.x,y:O.y??A.position.y},{width:B,height:z},A.parentId,_,D)}},H=M0([U],_,V,P);R.push(...H),T.x=O.x?Math.max(D[0]*B,O.x):void 0,T.y=O.y?Math.max(D[1]*z,O.y):void 0}if(T.x!==void 0&&T.y!==void 0){const D={id:y,type:"position",position:{...T}};R.push(D)}if(O.width!==void 0&&O.height!==void 0){const B={id:y,type:"dimensions",resizing:!0,setAttributes:d?d==="horizontal"?"width":"height":!0,dimensions:{width:O.width,height:O.height}};R.push(B)}for(const D of L){const B={...D,type:"position"};R.push(B)}$(R)},onEnd:({width:O,height:L})=>{const $={id:y,type:"dimensions",resizing:!1,dimensions:{width:O,height:L}};x.getState().triggerNodeChanges([$])}})),E.current.update({controlPosition:N,boundaries:{minWidth:l,minHeight:a,maxWidth:c,maxHeight:u},keepAspectRatio:f,resizeDirection:d,onResizeStart:m,onResize:v,onResizeEnd:g,shouldResize:p}),()=>{var O;(O=E.current)==null||O.destroy()}},[N,l,a,c,u,f,m,v,g,p]);const I=N.split("-");return M.jsx("div",{className:je(["react-flow__resize-control","nodrag",...I,n,r]),ref:S,style:{...i,scale:k,...o&&{[C?"backgroundColor":"borderColor"]:o}},children:s})}b.memo(Ej);const _0=b.createContext({});function A0(t){const e=b.useRef(null);return e.current===null&&(e.current=t()),e.current}const Wd=b.createContext(null),D0=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class bj extends b.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Tj({children:t,isPresent:e}){const n=b.useId(),r=b.useRef(null),i=b.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=b.useContext(D0);return b.useInsertionEffect(()=>{const{width:o,height:l,top:a,left:c}=i.current;if(e||!r.current||!o||!l)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${a}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),M.jsx(bj,{isPresent:e,childRef:r,sizeRef:i,children:b.cloneElement(t,{ref:r})})}const Mj=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const l=A0(Nj),a=b.useId(),c=b.useCallback(f=>{l.set(f,!0);for(const d of l.values())if(!d)return;r&&r()},[l,r]),u=b.useMemo(()=>({id:a,initial:e,isPresent:n,custom:i,onExitComplete:c,register:f=>(l.set(f,!1),()=>l.delete(f))}),s?[Math.random(),c]:[n,c]);return b.useMemo(()=>{l.forEach((f,d)=>l.set(d,!1))},[n]),b.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),o==="popLayout"&&(t=M.jsx(Tj,{isPresent:n,children:t})),M.jsx(Wd.Provider,{value:u,children:t})};function Nj(){return new Map}function WM(t=!0){const e=b.useContext(Wd);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=b.useId();b.useEffect(()=>{t&&i(s)},[t]);const o=b.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const eu=t=>t.key||"";function b1(t){const e=[];return b.Children.forEach(t,n=>{b.isValidElement(n)&&e.push(n)}),e}const O0=typeof window<"u",KM=O0?b.useLayoutEffect:b.useEffect,_j=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[l,a]=WM(o),c=b.useMemo(()=>b1(t),[t]),u=o&&!l?[]:c.map(eu),f=b.useRef(!0),d=b.useRef(c),h=A0(()=>new Map),[p,m]=b.useState(c),[v,g]=b.useState(c);KM(()=>{f.current=!1,d.current=c;for(let x=0;x<v.length;x++){const S=eu(v[x]);u.includes(S)?h.delete(S):h.get(S)!==!0&&h.set(S,!1)}},[v,u.length,u.join("-")]);const w=[];if(c!==p){let x=[...c];for(let S=0;S<v.length;S++){const C=v[S],k=eu(C);u.includes(k)||(x.splice(S,0,C),w.push(C))}s==="wait"&&w.length&&(x=w),g(b1(x)),m(c);return}const{forceRender:y}=b.useContext(_0);return M.jsx(M.Fragment,{children:v.map(x=>{const S=eu(x),C=o&&!l?!1:c===v||u.includes(S),k=()=>{if(h.has(S))h.set(S,!0);else return;let E=!0;h.forEach(N=>{N||(E=!1)}),E&&(y==null||y(),g(d.current),o&&(a==null||a()),r&&r())};return M.jsx(Mj,{isPresent:C,initial:!f.current||n?void 0:!1,custom:C?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:C?void 0:k,children:x},S)})})},Gt=t=>t;let qM=Gt;function P0(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ro=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},wr=t=>t*1e3,xr=t=>t/1e3,Aj={useManualTiming:!1};function Dj(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(c){s.has(c)&&(a.schedule(c),t()),c(o)}const a={schedule:(c,u=!1,f=!1)=>{const h=f&&r?e:n;return u&&s.add(c),h.has(c)||h.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(l),e.clear(),r=!1,i&&(i=!1,a.process(c))}};return a}const tu=["read","resolveKeyframes","update","preRender","render","postRender"],Oj=40;function YM(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=tu.reduce((g,w)=>(g[w]=Dj(s),g),{}),{read:l,resolveKeyframes:a,update:c,preRender:u,render:f,postRender:d}=o,h=()=>{const g=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(g-i.timestamp,Oj),1),i.timestamp=g,i.isProcessing=!0,l.process(i),a.process(i),c.process(i),u.process(i),f.process(i),d.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(h))},p=()=>{n=!0,r=!0,i.isProcessing||t(h)};return{schedule:tu.reduce((g,w)=>{const y=o[w];return g[w]=(x,S=!1,C=!1)=>(n||p(),y.schedule(x,S,C)),g},{}),cancel:g=>{for(let w=0;w<tu.length;w++)o[tu[w]].cancel(g)},state:i,steps:o}}const{schedule:be,cancel:yi,state:ot,steps:mp}=YM(typeof requestAnimationFrame<"u"?requestAnimationFrame:Gt,!0),XM=b.createContext({strict:!1}),T1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Io={};for(const t in T1)Io[t]={isEnabled:e=>T1[t].some(n=>!!e[n])};function Pj(t){for(const e in t)Io[e]={...Io[e],...t[e]}}const Rj=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Df(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Rj.has(t)}let GM=t=>!Df(t);function Ij(t){t&&(GM=e=>e.startsWith("on")?!Df(e):t(e))}try{Ij(require("@emotion/is-prop-valid").default)}catch{}function Lj(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(GM(i)||n===!0&&Df(i)||!e&&!Df(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function Vj(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Kd=b.createContext({});function Aa(t){return typeof t=="string"||Array.isArray(t)}function qd(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const R0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],I0=["initial",...R0];function Yd(t){return qd(t.animate)||I0.some(e=>Aa(t[e]))}function JM(t){return!!(Yd(t)||t.variants)}function Bj(t,e){if(Yd(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Aa(n)?n:void 0,animate:Aa(r)?r:void 0}}return t.inherit!==!1?e:{}}function zj(t){const{initial:e,animate:n}=Bj(t,b.useContext(Kd));return b.useMemo(()=>({initial:e,animate:n}),[M1(e),M1(n)])}function M1(t){return Array.isArray(t)?t.join(" "):t}const $j=Symbol.for("motionComponentSymbol");function Xs(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Fj(t,e,n){return b.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Xs(n)&&(n.current=r))},[e])}const L0=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),jj="framerAppearId",QM="data-"+L0(jj),{schedule:V0}=YM(queueMicrotask,!1),ZM=b.createContext({});function Hj(t,e,n,r,i){var s,o;const{visualElement:l}=b.useContext(Kd),a=b.useContext(XM),c=b.useContext(Wd),u=b.useContext(D0).reducedMotion,f=b.useRef(null);r=r||a.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:l,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const d=f.current,h=b.useContext(ZM);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&Uj(f.current,n,i,h);const p=b.useRef(!1);b.useInsertionEffect(()=>{d&&p.current&&d.update(n,c)});const m=n[QM],v=b.useRef(!!m&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,m))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,m)));return KM(()=>{d&&(p.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),V0.render(d.render),v.current&&d.animationState&&d.animationState.animateChanges())}),b.useEffect(()=>{d&&(!v.current&&d.animationState&&d.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)===null||g===void 0||g.call(window,m)}),v.current=!1))}),d}function Uj(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:l,layoutScroll:a,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:eN(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||l&&Xs(l),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:a,layoutRoot:c})}function eN(t){if(t)return t.options.allowProjection!==!1?t.projection:eN(t.parent)}function Wj({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&Pj(t);function l(c,u){let f;const d={...b.useContext(D0),...c,layoutId:Kj(c)},{isStatic:h}=d,p=zj(c),m=r(c,h);if(!h&&O0){qj();const v=Yj(d);f=v.MeasureLayout,p.visualElement=Hj(i,m,d,e,v.ProjectionNode)}return M.jsxs(Kd.Provider,{value:p,children:[f&&p.visualElement?M.jsx(f,{visualElement:p.visualElement,...d}):null,n(i,c,Fj(m,p.visualElement,u),m,h,p.visualElement)]})}l.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const a=b.forwardRef(l);return a[$j]=i,a}function Kj({layoutId:t}){const e=b.useContext(_0).id;return e&&t!==void 0?e+"-"+t:t}function qj(t,e){b.useContext(XM).strict}function Yj(t){const{drag:e,layout:n}=Io;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Xj=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function B0(t){return typeof t!="string"||t.includes("-")?!1:!!(Xj.indexOf(t)>-1||/[A-Z]/u.test(t))}function N1(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function z0(t,e,n,r){if(typeof e=="function"){const[i,s]=N1(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=N1(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const xg=t=>Array.isArray(t),Gj=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Jj=t=>xg(t)?t[t.length-1]||0:t,wt=t=>!!(t&&t.getVelocity);function Lu(t){const e=wt(t)?t.get():t;return Gj(e)?e.toValue():e}function Qj({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:Zj(r,i,s,t),renderState:e()};return n&&(o.onMount=l=>n({props:r,current:l,...o}),o.onUpdate=l=>n(l)),o}const tN=t=>(e,n)=>{const r=b.useContext(Kd),i=b.useContext(Wd),s=()=>Qj(t,e,r,i);return n?s():A0(s)};function Zj(t,e,n,r){const i={},s=r(t,{});for(const d in s)i[d]=Lu(s[d]);let{initial:o,animate:l}=t;const a=Yd(t),c=JM(t);e&&c&&!a&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const f=u?l:o;if(f&&typeof f!="boolean"&&!qd(f)){const d=Array.isArray(f)?f:[f];for(let h=0;h<d.length;h++){const p=z0(t,d[h]);if(p){const{transitionEnd:m,transition:v,...g}=p;for(const w in g){let y=g[w];if(Array.isArray(y)){const x=u?y.length-1:0;y=y[x]}y!==null&&(i[w]=y)}for(const w in m)i[w]=m[w]}}}return i}const Zo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Cs=new Set(Zo),nN=t=>e=>typeof e=="string"&&e.startsWith(t),rN=nN("--"),e4=nN("var(--"),$0=t=>e4(t)?t4.test(t.split("/*")[0].trim()):!1,t4=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,iN=(t,e)=>e&&typeof t=="number"?e.transform(t):t,_r=(t,e,n)=>n>e?e:n<t?t:n,el={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Da={...el,transform:t=>_r(0,1,t)},nu={...el,default:1},dc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),zr=dc("deg"),Gn=dc("%"),ne=dc("px"),n4=dc("vh"),r4=dc("vw"),_1={...Gn,parse:t=>Gn.parse(t)/100,transform:t=>Gn.transform(t*100)},i4={borderWidth:ne,borderTopWidth:ne,borderRightWidth:ne,borderBottomWidth:ne,borderLeftWidth:ne,borderRadius:ne,radius:ne,borderTopLeftRadius:ne,borderTopRightRadius:ne,borderBottomRightRadius:ne,borderBottomLeftRadius:ne,width:ne,maxWidth:ne,height:ne,maxHeight:ne,top:ne,right:ne,bottom:ne,left:ne,padding:ne,paddingTop:ne,paddingRight:ne,paddingBottom:ne,paddingLeft:ne,margin:ne,marginTop:ne,marginRight:ne,marginBottom:ne,marginLeft:ne,backgroundPositionX:ne,backgroundPositionY:ne},s4={rotate:zr,rotateX:zr,rotateY:zr,rotateZ:zr,scale:nu,scaleX:nu,scaleY:nu,scaleZ:nu,skew:zr,skewX:zr,skewY:zr,distance:ne,translateX:ne,translateY:ne,translateZ:ne,x:ne,y:ne,z:ne,perspective:ne,transformPerspective:ne,opacity:Da,originX:_1,originY:_1,originZ:ne},A1={...el,transform:Math.round},F0={...i4,...s4,zIndex:A1,size:ne,fillOpacity:Da,strokeOpacity:Da,numOctaves:A1},o4={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},l4=Zo.length;function a4(t,e,n){let r="",i=!0;for(let s=0;s<l4;s++){const o=Zo[s],l=t[o];if(l===void 0)continue;let a=!0;if(typeof l=="number"?a=l===(o.startsWith("scale")?1:0):a=parseFloat(l)===0,!a||n){const c=iN(l,F0[o]);if(!a){i=!1;const u=o4[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function j0(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,l=!1;for(const a in e){const c=e[a];if(Cs.has(a)){o=!0;continue}else if(rN(a)){i[a]=c;continue}else{const u=iN(c,F0[a]);a.startsWith("origin")?(l=!0,s[a]=u):r[a]=u}}if(e.transform||(o||n?r.transform=a4(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:a="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${a} ${c} ${u}`}}const c4={offset:"stroke-dashoffset",array:"stroke-dasharray"},u4={offset:"strokeDashoffset",array:"strokeDasharray"};function f4(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?c4:u4;t[s.offset]=ne.transform(-r);const o=ne.transform(e),l=ne.transform(n);t[s.array]=`${o} ${l}`}function D1(t,e,n){return typeof t=="string"?t:ne.transform(e+n*t)}function d4(t,e,n){const r=D1(e,t.x,t.width),i=D1(n,t.y,t.height);return`${r} ${i}`}function H0(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:l=1,pathOffset:a=0,...c},u,f){if(j0(t,c,f),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:h,dimensions:p}=t;d.transform&&(p&&(h.transform=d.transform),delete d.transform),p&&(i!==void 0||s!==void 0||h.transform)&&(h.transformOrigin=d4(p,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),o!==void 0&&f4(d,o,l,a,!1)}const U0=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),sN=()=>({...U0(),attrs:{}}),W0=t=>typeof t=="string"&&t.toLowerCase()==="svg";function oN(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const lN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function aN(t,e,n,r){oN(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(lN.has(i)?i:L0(i),e.attrs[i])}const Of={};function h4(t){Object.assign(Of,t)}function cN(t,{layout:e,layoutId:n}){return Cs.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Of[t]||t==="opacity")}function K0(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(wt(i[o])||e.style&&wt(e.style[o])||cN(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function uN(t,e,n){const r=K0(t,e,n);for(const i in t)if(wt(t[i])||wt(e[i])){const s=Zo.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function p4(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const O1=["x","y","width","height","cx","cy","r"],m4={useVisualState:tN({scrapeMotionValuesFromProps:uN,createRenderState:sN,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const l in i)if(Cs.has(l)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let l=0;l<O1.length;l++){const a=O1[l];t[a]!==e[a]&&(o=!0)}o&&be.read(()=>{p4(n,r),be.render(()=>{H0(r,i,W0(n.tagName),t.transformTemplate),aN(n,r)})})}})},g4={useVisualState:tN({scrapeMotionValuesFromProps:K0,createRenderState:U0})};function fN(t,e,n){for(const r in e)!wt(e[r])&&!cN(r,n)&&(t[r]=e[r])}function y4({transformTemplate:t},e){return b.useMemo(()=>{const n=U0();return j0(n,e,t),Object.assign({},n.vars,n.style)},[e])}function v4(t,e){const n=t.style||{},r={};return fN(r,n,t),Object.assign(r,y4(t,e)),r}function w4(t,e){const n={},r=v4(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function x4(t,e,n,r){const i=b.useMemo(()=>{const s=sN();return H0(s,e,W0(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};fN(s,t.style,t),i.style={...s,...i.style}}return i}function S4(t=!1){return(n,r,i,{latestValues:s},o)=>{const a=(B0(n)?x4:w4)(r,s,o,n),c=Lj(r,typeof n=="string",t),u=n!==b.Fragment?{...c,...a,ref:i}:{},{children:f}=r,d=b.useMemo(()=>wt(f)?f.get():f,[f]);return b.createElement(n,{...u,children:d})}}function k4(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...B0(r)?m4:g4,preloadedFeatures:t,useRender:S4(i),createVisualElement:e,Component:r};return Wj(o)}}function dN(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Xd(t,e,n){const r=t.getProps();return z0(r,e,n!==void 0?n:r.custom,t)}const C4=P0(()=>window.ScrollTimeline!==void 0);class E4{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(C4()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class b4 extends E4{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function q0(t,e){return t?t[e]||t.default||t:void 0}const Sg=2e4;function hN(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Sg;)e+=n,r=t.next(e);return e>=Sg?1/0:e}function Y0(t){return typeof t=="function"}function P1(t,e){t.timeline=e,t.onfinish=null}const X0=t=>Array.isArray(t)&&typeof t[0]=="number",T4={linearEasing:void 0};function M4(t,e){const n=P0(t);return()=>{var r;return(r=T4[e])!==null&&r!==void 0?r:n()}}const Pf=M4(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),pN=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(Ro(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function mN(t){return!!(typeof t=="function"&&Pf()||!t||typeof t=="string"&&(t in kg||Pf())||X0(t)||Array.isArray(t)&&t.every(mN))}const Dl=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,kg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Dl([0,.65,.55,1]),circOut:Dl([.55,0,1,.45]),backIn:Dl([.31,.01,.66,-.59]),backOut:Dl([.33,1.53,.69,.99])};function gN(t,e){if(t)return typeof t=="function"&&Pf()?pN(t,e):X0(t)?Dl(t):Array.isArray(t)?t.map(n=>gN(n,e)||kg.easeOut):kg[t]}const Sn={x:!1,y:!1};function yN(){return Sn.x||Sn.y}function N4(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function vN(t,e){const n=N4(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function R1(t){return e=>{e.pointerType==="touch"||yN()||t(e)}}function _4(t,e,n={}){const[r,i,s]=vN(t,n),o=R1(l=>{const{target:a}=l,c=e(l);if(typeof c!="function"||!a)return;const u=R1(f=>{c(f),a.removeEventListener("pointerleave",u)});a.addEventListener("pointerleave",u,i)});return r.forEach(l=>{l.addEventListener("pointerenter",o,i)}),s}const wN=(t,e)=>e?t===e?!0:wN(t,e.parentElement):!1,G0=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,A4=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function D4(t){return A4.has(t.tagName)||t.tabIndex!==-1}const Ol=new WeakSet;function I1(t){return e=>{e.key==="Enter"&&t(e)}}function gp(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const O4=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=I1(()=>{if(Ol.has(n))return;gp(n,"down");const i=I1(()=>{gp(n,"up")}),s=()=>gp(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function L1(t){return G0(t)&&!yN()}function P4(t,e,n={}){const[r,i,s]=vN(t,n),o=l=>{const a=l.currentTarget;if(!L1(l)||Ol.has(a))return;Ol.add(a);const c=e(l),u=(h,p)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",d),!(!L1(h)||!Ol.has(a))&&(Ol.delete(a),typeof c=="function"&&c(h,{success:p}))},f=h=>{u(h,n.useGlobalTarget||wN(a,h.target))},d=h=>{u(h,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",d,i)};return r.forEach(l=>{!D4(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),l.addEventListener("focus",c=>O4(c,i),i)}),s}function R4(t){return t==="x"||t==="y"?Sn[t]?null:(Sn[t]=!0,()=>{Sn[t]=!1}):Sn.x||Sn.y?null:(Sn.x=Sn.y=!0,()=>{Sn.x=Sn.y=!1})}const xN=new Set(["width","height","top","left","right","bottom",...Zo]);let Vu;function I4(){Vu=void 0}const Jn={now:()=>(Vu===void 0&&Jn.set(ot.isProcessing||Aj.useManualTiming?ot.timestamp:performance.now()),Vu),set:t=>{Vu=t,queueMicrotask(I4)}};function J0(t,e){t.indexOf(e)===-1&&t.push(e)}function Q0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Z0{constructor(){this.subscriptions=[]}add(e){return J0(this.subscriptions,e),()=>Q0(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function SN(t,e){return e?t*(1e3/e):0}const V1=30,L4=t=>!isNaN(parseFloat(t));class V4{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Jn.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Jn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=L4(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Z0);const r=this.events[e].add(n);return e==="change"?()=>{r(),be.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Jn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>V1)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,V1);return SN(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Oa(t,e){return new V4(t,e)}function B4(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Oa(n))}function z4(t,e){const n=Xd(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const l=Jj(s[o]);B4(t,o,l)}}function $4(t){return!!(wt(t)&&t.add)}function Cg(t,e){const n=t.getValue("willChange");if($4(n))return n.add(e)}function kN(t){return t.props[QM]}const CN=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,F4=1e-7,j4=12;function H4(t,e,n,r,i){let s,o,l=0;do o=e+(n-e)/2,s=CN(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>F4&&++l<j4);return o}function hc(t,e,n,r){if(t===e&&n===r)return Gt;const i=s=>H4(s,0,1,t,n);return s=>s===0||s===1?s:CN(i(s),e,r)}const EN=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,bN=t=>e=>1-t(1-e),TN=hc(.33,1.53,.69,.99),ev=bN(TN),MN=EN(ev),NN=t=>(t*=2)<1?.5*ev(t):.5*(2-Math.pow(2,-10*(t-1))),tv=t=>1-Math.sin(Math.acos(t)),_N=bN(tv),AN=EN(tv),DN=t=>/^0[^.\s]+$/u.test(t);function U4(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||DN(t):!0}const Yl=t=>Math.round(t*1e5)/1e5,nv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function W4(t){return t==null}const K4=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,rv=(t,e)=>n=>!!(typeof n=="string"&&K4.test(n)&&n.startsWith(t)||e&&!W4(n)&&Object.prototype.hasOwnProperty.call(n,e)),ON=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,l]=r.match(nv);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},q4=t=>_r(0,255,t),yp={...el,transform:t=>Math.round(q4(t))},Hi={test:rv("rgb","red"),parse:ON("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+yp.transform(t)+", "+yp.transform(e)+", "+yp.transform(n)+", "+Yl(Da.transform(r))+")"};function Y4(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Eg={test:rv("#"),parse:Y4,transform:Hi.transform},Gs={test:rv("hsl","hue"),parse:ON("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Gn.transform(Yl(e))+", "+Gn.transform(Yl(n))+", "+Yl(Da.transform(r))+")"},gt={test:t=>Hi.test(t)||Eg.test(t)||Gs.test(t),parse:t=>Hi.test(t)?Hi.parse(t):Gs.test(t)?Gs.parse(t):Eg.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Hi.transform(t):Gs.transform(t)},X4=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function G4(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(nv))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(X4))===null||n===void 0?void 0:n.length)||0)>0}const PN="number",RN="color",J4="var",Q4="var(",B1="${}",Z4=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Pa(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const l=e.replace(Z4,a=>(gt.test(a)?(r.color.push(s),i.push(RN),n.push(gt.parse(a))):a.startsWith(Q4)?(r.var.push(s),i.push(J4),n.push(a)):(r.number.push(s),i.push(PN),n.push(parseFloat(a))),++s,B1)).split(B1);return{values:n,split:l,indexes:r,types:i}}function IN(t){return Pa(t).values}function LN(t){const{split:e,types:n}=Pa(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const l=n[o];l===PN?s+=Yl(i[o]):l===RN?s+=gt.transform(i[o]):s+=i[o]}return s}}const e5=t=>typeof t=="number"?0:t;function t5(t){const e=IN(t);return LN(t)(e.map(e5))}const vi={test:G4,parse:IN,createTransformer:LN,getAnimatableNone:t5},n5=new Set(["brightness","contrast","saturate","opacity"]);function r5(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(nv)||[];if(!r)return t;const i=n.replace(r,"");let s=n5.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const i5=/\b([a-z-]*)\(.*?\)/gu,bg={...vi,getAnimatableNone:t=>{const e=t.match(i5);return e?e.map(r5).join(" "):t}},s5={...F0,color:gt,backgroundColor:gt,outlineColor:gt,fill:gt,stroke:gt,borderColor:gt,borderTopColor:gt,borderRightColor:gt,borderBottomColor:gt,borderLeftColor:gt,filter:bg,WebkitFilter:bg},iv=t=>s5[t];function VN(t,e){let n=iv(t);return n!==bg&&(n=vi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const o5=new Set(["auto","none","0"]);function l5(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!o5.has(s)&&Pa(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=VN(n,i)}const z1=t=>t===el||t===ne,$1=(t,e)=>parseFloat(t.split(", ")[e]),F1=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return $1(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?$1(s[1],t):0}},a5=new Set(["x","y","z"]),c5=Zo.filter(t=>!a5.has(t));function u5(t){const e=[];return c5.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Lo={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:F1(4,13),y:F1(5,14)};Lo.translateX=Lo.x;Lo.translateY=Lo.y;const Ji=new Set;let Tg=!1,Mg=!1;function BN(){if(Mg){const t=Array.from(Ji).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=u5(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var l;(l=r.getValue(s))===null||l===void 0||l.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Mg=!1,Tg=!1,Ji.forEach(t=>t.complete()),Ji.clear()}function zN(){Ji.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Mg=!0)})}function f5(){zN(),BN()}class sv{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ji.add(this),Tg||(Tg=!0,be.read(zN),be.resolveKeyframes(BN))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const a=r.readValue(n,l);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=l),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ji.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ji.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const $N=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),d5=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function h5(t){const e=d5.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function FN(t,e,n=1){const[r,i]=h5(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return $N(o)?parseFloat(o):o}return $0(i)?FN(i,e,n+1):i}const jN=t=>e=>e.test(t),p5={test:t=>t==="auto",parse:t=>t},HN=[el,ne,Gn,zr,r4,n4,p5],j1=t=>HN.find(jN(t));class UN extends sv{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="string"&&(c=c.trim(),$0(c))){const u=FN(c,n.current);u!==void 0&&(e[a]=u),a===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!xN.has(r)||e.length!==2)return;const[i,s]=e,o=j1(i),l=j1(s);if(o!==l)if(z1(o)&&z1(l))for(let a=0;a<e.length;a++){const c=e[a];typeof c=="string"&&(e[a]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)U4(e[i])&&r.push(i);r.length&&l5(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Lo[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,l=i[o];i[o]=Lo[r](n.measureViewportBox(),window.getComputedStyle(n.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([a,c])=>{n.getValue(a).set(c)}),this.resolveNoneKeyframes()}}const H1=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(vi.test(t)||t==="0")&&!t.startsWith("url("));function m5(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function g5(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=H1(i,e),l=H1(s,e);return!o||!l?!1:m5(t)||(n==="spring"||Y0(n))&&r}const y5=t=>t!==null;function Gd(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(y5),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const v5=40;class WN{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Jn.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>v5?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&f5(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Jn.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:l,onUpdate:a,isGenerator:c}=this.options;if(!c&&!g5(e,r,i,s))if(o)this.options.duration=0;else{a&&a(Gd(e,this.options,n)),l&&l(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Ae=(t,e,n)=>t+(e-t)*n;function vp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function w5({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const l=n<.5?n*(1+e):n+e-n*e,a=2*n-l;i=vp(a,l,t+1/3),s=vp(a,l,t),o=vp(a,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Rf(t,e){return n=>n>0?e:t}const wp=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},x5=[Eg,Hi,Gs],S5=t=>x5.find(e=>e.test(t));function U1(t){const e=S5(t);if(!e)return!1;let n=e.parse(t);return e===Gs&&(n=w5(n)),n}const W1=(t,e)=>{const n=U1(t),r=U1(e);if(!n||!r)return Rf(t,e);const i={...n};return s=>(i.red=wp(n.red,r.red,s),i.green=wp(n.green,r.green,s),i.blue=wp(n.blue,r.blue,s),i.alpha=Ae(n.alpha,r.alpha,s),Hi.transform(i))},k5=(t,e)=>n=>e(t(n)),pc=(...t)=>t.reduce(k5),Ng=new Set(["none","hidden"]);function C5(t,e){return Ng.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function E5(t,e){return n=>Ae(t,e,n)}function ov(t){return typeof t=="number"?E5:typeof t=="string"?$0(t)?Rf:gt.test(t)?W1:M5:Array.isArray(t)?KN:typeof t=="object"?gt.test(t)?W1:b5:Rf}function KN(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>ov(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function b5(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=ov(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function T5(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=t.indexes[o][i[o]],a=(n=t.values[l])!==null&&n!==void 0?n:0;r[s]=a,i[o]++}return r}const M5=(t,e)=>{const n=vi.createTransformer(e),r=Pa(t),i=Pa(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Ng.has(t)&&!i.values.length||Ng.has(e)&&!r.values.length?C5(t,e):pc(KN(T5(r,i),i.values),n):Rf(t,e)};function qN(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ae(t,e,n):ov(t)(t,e)}const N5=5;function YN(t,e,n){const r=Math.max(e-N5,0);return SN(n-t(r),e-r)}const Pe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},xp=.001;function _5({duration:t=Pe.duration,bounce:e=Pe.bounce,velocity:n=Pe.velocity,mass:r=Pe.mass}){let i,s,o=1-e;o=_r(Pe.minDamping,Pe.maxDamping,o),t=_r(Pe.minDuration,Pe.maxDuration,xr(t)),o<1?(i=c=>{const u=c*o,f=u*t,d=u-n,h=_g(c,o),p=Math.exp(-f);return xp-d/h*p},s=c=>{const f=c*o*t,d=f*n+n,h=Math.pow(o,2)*Math.pow(c,2)*t,p=Math.exp(-f),m=_g(Math.pow(c,2),o);return(-i(c)+xp>0?-1:1)*((d-h)*p)/m}):(i=c=>{const u=Math.exp(-c*t),f=(c-n)*t+1;return-xp+u*f},s=c=>{const u=Math.exp(-c*t),f=(n-c)*(t*t);return u*f});const l=5/t,a=D5(i,s,l);if(t=wr(t),isNaN(a))return{stiffness:Pe.stiffness,damping:Pe.damping,duration:t};{const c=Math.pow(a,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const A5=12;function D5(t,e,n){let r=n;for(let i=1;i<A5;i++)r=r-t(r)/e(r);return r}function _g(t,e){return t*Math.sqrt(1-e*e)}const O5=["duration","bounce"],P5=["stiffness","damping","mass"];function K1(t,e){return e.some(n=>t[n]!==void 0)}function R5(t){let e={velocity:Pe.velocity,stiffness:Pe.stiffness,damping:Pe.damping,mass:Pe.mass,isResolvedFromDuration:!1,...t};if(!K1(t,P5)&&K1(t,O5))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*_r(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Pe.mass,stiffness:i,damping:s}}else{const n=_5(t);e={...e,...n,mass:Pe.mass},e.isResolvedFromDuration=!0}return e}function XN(t=Pe.visualDuration,e=Pe.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:s},{stiffness:a,damping:c,mass:u,duration:f,velocity:d,isResolvedFromDuration:h}=R5({...n,velocity:-xr(n.velocity||0)}),p=d||0,m=c/(2*Math.sqrt(a*u)),v=o-s,g=xr(Math.sqrt(a/u)),w=Math.abs(v)<5;r||(r=w?Pe.restSpeed.granular:Pe.restSpeed.default),i||(i=w?Pe.restDelta.granular:Pe.restDelta.default);let y;if(m<1){const S=_g(g,m);y=C=>{const k=Math.exp(-m*g*C);return o-k*((p+m*g*v)/S*Math.sin(S*C)+v*Math.cos(S*C))}}else if(m===1)y=S=>o-Math.exp(-g*S)*(v+(p+g*v)*S);else{const S=g*Math.sqrt(m*m-1);y=C=>{const k=Math.exp(-m*g*C),E=Math.min(S*C,300);return o-k*((p+m*g*v)*Math.sinh(E)+S*v*Math.cosh(E))/S}}const x={calculatedDuration:h&&f||null,next:S=>{const C=y(S);if(h)l.done=S>=f;else{let k=0;m<1&&(k=S===0?wr(p):YN(y,S,C));const E=Math.abs(k)<=r,N=Math.abs(o-C)<=i;l.done=E&&N}return l.value=l.done?o:C,l},toString:()=>{const S=Math.min(hN(x),Sg),C=pN(k=>x.next(S*k).value,S,30);return S+"ms "+C}};return x}function q1({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:a,restDelta:c=.5,restSpeed:u}){const f=t[0],d={done:!1,value:f},h=E=>l!==void 0&&E<l||a!==void 0&&E>a,p=E=>l===void 0?a:a===void 0||Math.abs(l-E)<Math.abs(a-E)?l:a;let m=n*e;const v=f+m,g=o===void 0?v:o(v);g!==v&&(m=g-f);const w=E=>-m*Math.exp(-E/r),y=E=>g+w(E),x=E=>{const N=w(E),I=y(E);d.done=Math.abs(N)<=c,d.value=d.done?g:I};let S,C;const k=E=>{h(d.value)&&(S=E,C=XN({keyframes:[d.value,p(d.value)],velocity:YN(y,E,d.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return k(0),{calculatedDuration:null,next:E=>{let N=!1;return!C&&S===void 0&&(N=!0,x(E),k(E)),S!==void 0&&E>=S?C.next(E-S):(!N&&x(E),d)}}}const I5=hc(.42,0,1,1),L5=hc(0,0,.58,1),GN=hc(.42,0,.58,1),V5=t=>Array.isArray(t)&&typeof t[0]!="number",B5={linear:Gt,easeIn:I5,easeInOut:GN,easeOut:L5,circIn:tv,circInOut:AN,circOut:_N,backIn:ev,backInOut:MN,backOut:TN,anticipate:NN},Y1=t=>{if(X0(t)){qM(t.length===4);const[e,n,r,i]=t;return hc(e,n,r,i)}else if(typeof t=="string")return B5[t];return t};function z5(t,e,n){const r=[],i=n||qN,s=t.length-1;for(let o=0;o<s;o++){let l=i(t[o],t[o+1]);if(e){const a=Array.isArray(e)?e[o]||Gt:e;l=pc(a,l)}r.push(l)}return r}function $5(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(qM(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=z5(e,r,i),a=l.length,c=u=>{if(o&&u<t[0])return e[0];let f=0;if(a>1)for(;f<t.length-2&&!(u<t[f+1]);f++);const d=Ro(t[f],t[f+1],u);return l[f](d)};return n?u=>c(_r(t[0],t[s-1],u)):c}function F5(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Ro(0,e,r);t.push(Ae(n,1,i))}}function j5(t){const e=[0];return F5(e,t.length-1),e}function H5(t,e){return t.map(n=>n*e)}function U5(t,e){return t.map(()=>e||GN).splice(0,t.length-1)}function If({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=V5(r)?r.map(Y1):Y1(r),s={done:!1,value:e[0]},o=H5(n&&n.length===e.length?n:j5(e),t),l=$5(o,e,{ease:Array.isArray(i)?i:U5(e,i)});return{calculatedDuration:t,next:a=>(s.value=l(a),s.done=a>=t,s)}}const W5=t=>{const e=({timestamp:n})=>t(n);return{start:()=>be.update(e,!0),stop:()=>yi(e),now:()=>ot.isProcessing?ot.timestamp:Jn.now()}},K5={decay:q1,inertia:q1,tween:If,keyframes:If,spring:XN},q5=t=>t/100;class lv extends WN{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:a}=this.options;a&&a()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||sv,l=(a,c)=>this.onKeyframesResolved(a,c);this.resolver=new o(s,l,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,l=Y0(n)?n:K5[n]||If;let a,c;l!==If&&typeof e[0]!="number"&&(a=pc(q5,qN(e[0],e[1])),e=[0,100]);const u=l({...this.options,keyframes:e});s==="mirror"&&(c=l({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=hN(u));const{calculatedDuration:f}=u,d=f+i,h=d*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:a,calculatedDuration:f,resolvedDuration:d,totalDuration:h}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:E}=this.options;return{done:!0,value:E[E.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:a,calculatedDuration:c,totalDuration:u,resolvedDuration:f}=r;if(this.startTime===null)return s.next(0);const{delay:d,repeat:h,repeatType:p,repeatDelay:m,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-d*(this.speed>=0?1:-1),w=this.speed>=0?g<0:g>u;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let y=this.currentTime,x=s;if(h){const E=Math.min(this.currentTime,u)/f;let N=Math.floor(E),I=E%1;!I&&E>=1&&(I=1),I===1&&N--,N=Math.min(N,h+1),!!(N%2)&&(p==="reverse"?(I=1-I,m&&(I-=m/f)):p==="mirror"&&(x=o)),y=_r(0,1,I)*f}const S=w?{done:!1,value:a[0]}:x.next(y);l&&(S.value=l(S.value));let{done:C}=S;!w&&c!==null&&(C=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return k&&i!==void 0&&(S.value=Gd(a,this.options,i)),v&&v(S.value),k&&this.finish(),S}get duration(){const{resolved:e}=this;return e?xr(e.calculatedDuration):0}get time(){return xr(this.currentTime)}set time(e){e=wr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=xr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=W5,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Y5=new Set(["opacity","clipPath","filter","transform"]);function X5(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:l="easeInOut",times:a}={}){const c={[e]:n};a&&(c.offset=a);const u=gN(l,i);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const G5=P0(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Lf=10,J5=2e4;function Q5(t){return Y0(t.type)||t.type==="spring"||!mN(t.ease)}function Z5(t,e){const n=new lv({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<J5;)r=n.sample(s),i.push(r.value),s+=Lf;return{times:void 0,keyframes:i,duration:s-Lf,ease:"linear"}}const JN={anticipate:NN,backInOut:MN,circInOut:AN};function e8(t){return t in JN}class X1 extends WN{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new UN(s,(o,l)=>this.onKeyframesResolved(o,l),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:l,name:a,startTime:c}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof s=="string"&&Pf()&&e8(s)&&(s=JN[s]),Q5(this.options)){const{onComplete:f,onUpdate:d,motionValue:h,element:p,...m}=this.options,v=Z5(e,m);e=v.keyframes,e.length===1&&(e[1]=e[0]),r=v.duration,i=v.times,s=v.ease,o="keyframes"}const u=X5(l.owner.current,a,e,{...this.options,duration:r,times:i,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(P1(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:f}=this.options;l.set(Gd(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return xr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return xr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=wr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Gt;const{animation:r}=n;P1(r,e)}return Gt}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:l}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:f,element:d,...h}=this.options,p=new lv({...h,keyframes:r,duration:i,type:s,ease:o,times:l,isGenerator:!0}),m=wr(this.time);c.setWithVelocity(p.sample(m-Lf).value,p.sample(m).value,Lf)}const{onStop:a}=this.options;a&&a(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:l}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:a,transformTemplate:c}=n.owner.getProps();return G5()&&r&&Y5.has(r)&&!a&&!c&&!i&&s!=="mirror"&&o!==0&&l!=="inertia"}}const t8={type:"spring",stiffness:500,damping:25,restSpeed:10},n8=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),r8={type:"keyframes",duration:.8},i8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},s8=(t,{keyframes:e})=>e.length>2?r8:Cs.has(t)?t.startsWith("scale")?n8(e[1]):t8:i8;function o8({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:a,elapsed:c,...u}){return!!Object.keys(u).length}const av=(t,e,n,r={},i,s)=>o=>{const l=q0(r,t)||{},a=l.delay||r.delay||0;let{elapsed:c=0}=r;c=c-wr(a);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-c,onUpdate:d=>{e.set(d),l.onUpdate&&l.onUpdate(d)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:s?void 0:i};o8(l)||(u={...u,...s8(t,u)}),u.duration&&(u.duration=wr(u.duration)),u.repeatDelay&&(u.repeatDelay=wr(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const d=Gd(u.keyframes,l);if(d!==void 0)return be.update(()=>{u.onUpdate(d),u.onComplete()}),new b4([])}return!s&&X1.supports(u)?new X1(u):new lv(u)};function l8({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function QN(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:l,...a}=e;r&&(o=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const f in a){const d=t.getValue(f,(s=t.latestValues[f])!==null&&s!==void 0?s:null),h=a[f];if(h===void 0||u&&l8(u,f))continue;const p={delay:n,...q0(o||{},f)};let m=!1;if(window.MotionHandoffAnimation){const g=kN(t);if(g){const w=window.MotionHandoffAnimation(g,f,be);w!==null&&(p.startTime=w,m=!0)}}Cg(t,f),d.start(av(f,d,h,t.shouldReduceMotion&&xN.has(f)?{type:!1}:p,t,m));const v=d.animation;v&&c.push(v)}return l&&Promise.all(c).then(()=>{be.update(()=>{l&&z4(t,l)})}),c}function Ag(t,e,n={}){var r;const i=Xd(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(QN(t,i,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:d}=s;return a8(t,e,u+c,f,d,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[c,u]=a==="beforeChildren"?[o,l]:[l,o];return c().then(()=>u())}else return Promise.all([o(),l(n.delay)])}function a8(t,e,n=0,r=0,i=1,s){const o=[],l=(t.variantChildren.size-1)*r,a=i===1?(c=0)=>c*r:(c=0)=>l-c*r;return Array.from(t.variantChildren).sort(c8).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(Ag(c,e,{...s,delay:n+a(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function c8(t,e){return t.sortNodePosition(e)}function u8(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Ag(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Ag(t,e,n);else{const i=typeof e=="function"?Xd(t,e,n.custom):e;r=Promise.all(QN(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const f8=I0.length;function ZN(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?ZN(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<f8;n++){const r=I0[n],i=t.props[r];(Aa(i)||i===!1)&&(e[r]=i)}return e}const d8=[...R0].reverse(),h8=R0.length;function p8(t){return e=>Promise.all(e.map(({animation:n,options:r})=>u8(t,n,r)))}function m8(t){let e=p8(t),n=G1(),r=!0;const i=a=>(c,u)=>{var f;const d=Xd(t,u,a==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(d){const{transition:h,transitionEnd:p,...m}=d;c={...c,...m,...p}}return c};function s(a){e=a(t)}function o(a){const{props:c}=t,u=ZN(t.parent)||{},f=[],d=new Set;let h={},p=1/0;for(let v=0;v<h8;v++){const g=d8[v],w=n[g],y=c[g]!==void 0?c[g]:u[g],x=Aa(y),S=g===a?w.isActive:null;S===!1&&(p=v);let C=y===u[g]&&y!==c[g]&&x;if(C&&r&&t.manuallyAnimateOnMount&&(C=!1),w.protectedKeys={...h},!w.isActive&&S===null||!y&&!w.prevProp||qd(y)||typeof y=="boolean")continue;const k=g8(w.prevProp,y);let E=k||g===a&&w.isActive&&!C&&x||v>p&&x,N=!1;const I=Array.isArray(y)?y:[y];let O=I.reduce(i(g),{});S===!1&&(O={});const{prevResolvedValues:L={}}=w,$={...L,...O},_=R=>{E=!0,d.has(R)&&(N=!0,d.delete(R)),w.needsAnimating[R]=!0;const T=t.getValue(R);T&&(T.liveStyle=!1)};for(const R in $){const T=O[R],A=L[R];if(h.hasOwnProperty(R))continue;let D=!1;xg(T)&&xg(A)?D=!dN(T,A):D=T!==A,D?T!=null?_(R):d.add(R):T!==void 0&&d.has(R)?_(R):w.protectedKeys[R]=!0}w.prevProp=y,w.prevResolvedValues=O,w.isActive&&(h={...h,...O}),r&&t.blockInitialAnimation&&(E=!1),E&&(!(C&&k)||N)&&f.push(...I.map(R=>({animation:R,options:{type:g}})))}if(d.size){const v={};d.forEach(g=>{const w=t.getBaseTarget(g),y=t.getValue(g);y&&(y.liveStyle=!0),v[g]=w??null}),f.push({animation:v})}let m=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(m=!1),r=!1,m?e(f):Promise.resolve()}function l(a,c){var u;if(n[a].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(d=>{var h;return(h=d.animationState)===null||h===void 0?void 0:h.setActive(a,c)}),n[a].isActive=c;const f=o(a);for(const d in n)n[d].protectedKeys={};return f}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>n,reset:()=>{n=G1(),r=!0}}}function g8(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!dN(e,t):!1}function Di(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function G1(){return{animate:Di(!0),whileInView:Di(),whileHover:Di(),whileTap:Di(),whileDrag:Di(),whileFocus:Di(),exit:Di()}}class bi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class y8 extends bi{constructor(e){super(e),e.animationState||(e.animationState=m8(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();qd(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let v8=0;class w8 extends bi{constructor(){super(...arguments),this.id=v8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const x8={animation:{Feature:y8},exit:{Feature:w8}};function Ra(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function mc(t){return{point:{x:t.pageX,y:t.pageY}}}const S8=t=>e=>G0(e)&&t(e,mc(e));function Xl(t,e,n,r){return Ra(t,e,S8(n),r)}const J1=(t,e)=>Math.abs(t-e);function k8(t,e){const n=J1(t.x,e.x),r=J1(t.y,e.y);return Math.sqrt(n**2+r**2)}class e_{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=kp(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,h=k8(f.offset,{x:0,y:0})>=3;if(!d&&!h)return;const{point:p}=f,{timestamp:m}=ot;this.history.push({...p,timestamp:m});const{onStart:v,onMove:g}=this.handlers;d||(v&&v(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,f)},this.handlePointerMove=(f,d)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Sp(d,this.transformPagePoint),be.update(this.updatePoint,!0)},this.handlePointerUp=(f,d)=>{this.end();const{onEnd:h,onSessionEnd:p,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=kp(f.type==="pointercancel"?this.lastMoveEventInfo:Sp(d,this.transformPagePoint),this.history);this.startEvent&&h&&h(f,v),p&&p(f,v)},!G0(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=mc(e),l=Sp(o,this.transformPagePoint),{point:a}=l,{timestamp:c}=ot;this.history=[{...a,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,kp(l,this.history)),this.removeListeners=pc(Xl(this.contextWindow,"pointermove",this.handlePointerMove),Xl(this.contextWindow,"pointerup",this.handlePointerUp),Xl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),yi(this.updatePoint)}}function Sp(t,e){return e?{point:e(t.point)}:t}function Q1(t,e){return{x:t.x-e.x,y:t.y-e.y}}function kp({point:t},e){return{point:t,delta:Q1(t,t_(e)),offset:Q1(t,C8(e)),velocity:E8(e,.1)}}function C8(t){return t[0]}function t_(t){return t[t.length-1]}function E8(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=t_(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>wr(e)));)n--;if(!r)return{x:0,y:0};const s=xr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const n_=1e-4,b8=1-n_,T8=1+n_,r_=.01,M8=0-r_,N8=0+r_;function tn(t){return t.max-t.min}function _8(t,e,n){return Math.abs(t-e)<=n}function Z1(t,e,n,r=.5){t.origin=r,t.originPoint=Ae(e.min,e.max,t.origin),t.scale=tn(n)/tn(e),t.translate=Ae(n.min,n.max,t.origin)-t.originPoint,(t.scale>=b8&&t.scale<=T8||isNaN(t.scale))&&(t.scale=1),(t.translate>=M8&&t.translate<=N8||isNaN(t.translate))&&(t.translate=0)}function Gl(t,e,n,r){Z1(t.x,e.x,n.x,r?r.originX:void 0),Z1(t.y,e.y,n.y,r?r.originY:void 0)}function eS(t,e,n){t.min=n.min+e.min,t.max=t.min+tn(e)}function A8(t,e,n){eS(t.x,e.x,n.x),eS(t.y,e.y,n.y)}function tS(t,e,n){t.min=e.min-n.min,t.max=t.min+tn(e)}function Jl(t,e,n){tS(t.x,e.x,n.x),tS(t.y,e.y,n.y)}function D8(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ae(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ae(n,t,r.max):Math.min(t,n)),t}function nS(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function O8(t,{top:e,left:n,bottom:r,right:i}){return{x:nS(t.x,n,i),y:nS(t.y,e,r)}}function rS(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function P8(t,e){return{x:rS(t.x,e.x),y:rS(t.y,e.y)}}function R8(t,e){let n=.5;const r=tn(t),i=tn(e);return i>r?n=Ro(e.min,e.max-r,t.min):r>i&&(n=Ro(t.min,t.max-i,e.min)),_r(0,1,n)}function I8(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Dg=.35;function L8(t=Dg){return t===!1?t=0:t===!0&&(t=Dg),{x:iS(t,"left","right"),y:iS(t,"top","bottom")}}function iS(t,e,n){return{min:sS(t,e),max:sS(t,n)}}function sS(t,e){return typeof t=="number"?t:t[e]||0}const oS=()=>({translate:0,scale:1,origin:0,originPoint:0}),Js=()=>({x:oS(),y:oS()}),lS=()=>({min:0,max:0}),Le=()=>({x:lS(),y:lS()});function on(t){return[t("x"),t("y")]}function i_({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function V8({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function B8(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Cp(t){return t===void 0||t===1}function Og({scale:t,scaleX:e,scaleY:n}){return!Cp(t)||!Cp(e)||!Cp(n)}function Ii(t){return Og(t)||s_(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function s_(t){return aS(t.x)||aS(t.y)}function aS(t){return t&&t!=="0%"}function Vf(t,e,n){const r=t-n,i=e*r;return n+i}function cS(t,e,n,r,i){return i!==void 0&&(t=Vf(t,i,r)),Vf(t,n,r)+e}function Pg(t,e=0,n=1,r,i){t.min=cS(t.min,e,n,r,i),t.max=cS(t.max,e,n,r,i)}function o_(t,{x:e,y:n}){Pg(t.x,e.translate,e.scale,e.originPoint),Pg(t.y,n.translate,n.scale,n.originPoint)}const uS=.999999999999,fS=1.0000000000001;function z8(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let l=0;l<i;l++){s=n[l],o=s.projectionDelta;const{visualElement:a}=s.options;a&&a.props.style&&a.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Zs(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,o_(t,o)),r&&Ii(s.latestValues)&&Zs(t,s.latestValues))}e.x<fS&&e.x>uS&&(e.x=1),e.y<fS&&e.y>uS&&(e.y=1)}function Qs(t,e){t.min=t.min+e,t.max=t.max+e}function dS(t,e,n,r,i=.5){const s=Ae(t.min,t.max,i);Pg(t,e,n,s,r)}function Zs(t,e){dS(t.x,e.x,e.scaleX,e.scale,e.originX),dS(t.y,e.y,e.scaleY,e.scale,e.originY)}function l_(t,e){return i_(B8(t.getBoundingClientRect(),e))}function $8(t,e,n){const r=l_(t,n),{scroll:i}=e;return i&&(Qs(r.x,i.offset.x),Qs(r.y,i.offset.y)),r}const a_=({current:t})=>t?t.ownerDocument.defaultView:null,F8=new WeakMap;class j8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Le(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(mc(u).point)},s=(u,f)=>{const{drag:d,dragPropagation:h,onDragStart:p}=this.getProps();if(d&&!h&&(this.openDragLock&&this.openDragLock(),this.openDragLock=R4(d),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),on(v=>{let g=this.getAxisMotionValue(v).get()||0;if(Gn.test(g)){const{projection:w}=this.visualElement;if(w&&w.layout){const y=w.layout.layoutBox[v];y&&(g=tn(y)*(parseFloat(g)/100))}}this.originPoint[v]=g}),p&&be.postRender(()=>p(u,f)),Cg(this.visualElement,"transform");const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},o=(u,f)=>{const{dragPropagation:d,dragDirectionLock:h,onDirectionLock:p,onDrag:m}=this.getProps();if(!d&&!this.openDragLock)return;const{offset:v}=f;if(h&&this.currentDirection===null){this.currentDirection=H8(v),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",f.point,v),this.updateAxis("y",f.point,v),this.visualElement.render(),m&&m(u,f)},l=(u,f)=>this.stop(u,f),a=()=>on(u=>{var f;return this.getAnimationState(u)==="paused"&&((f=this.getAxisMotionValue(u).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new e_(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:l,resumeAnimation:a},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:a_(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&be.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!ru(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=D8(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Xs(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=O8(i.layoutBox,n):this.constraints=!1,this.elastic=L8(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&on(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=I8(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Xs(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=$8(r,i.root,this.visualElement.getTransformPagePoint());let o=P8(i.layout.layoutBox,s);if(n){const l=n(V8(o));this.hasMutatedConstraints=!!l,l&&(o=i_(l))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),a=this.constraints||{},c=on(u=>{if(!ru(u,n,this.currentDirection))return;let f=a&&a[u]||{};o&&(f={min:0,max:0});const d=i?200:1e6,h=i?40:1e7,p={type:"inertia",velocity:r?e[u]:0,bounceStiffness:d,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(u,p)});return Promise.all(c).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Cg(this.visualElement,e),r.start(av(e,r,0,n,this.visualElement,!1))}stopAnimation(){on(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){on(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){on(n=>{const{drag:r}=this.getProps();if(!ru(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];s.set(e[n]-Ae(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Xs(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};on(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const a=l.get();i[o]=R8({min:a,max:a},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),on(o=>{if(!ru(o,e,null))return;const l=this.getAxisMotionValue(o),{min:a,max:c}=this.constraints[o];l.set(Ae(a,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;F8.set(this.visualElement,this);const e=this.visualElement.current,n=Xl(e,"pointerdown",a=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(a)}),r=()=>{const{dragConstraints:a}=this.getProps();Xs(a)&&a.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),be.read(r);const o=Ra(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:a,hasLayoutChanged:c})=>{this.isDragging&&c&&(on(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=a[u].translate,f.set(f.get()+a[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Dg,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function ru(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function H8(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class U8 extends bi{constructor(e){super(e),this.removeGroupControls=Gt,this.removeListeners=Gt,this.controls=new j8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Gt}unmount(){this.removeGroupControls(),this.removeListeners()}}const hS=t=>(e,n)=>{t&&be.postRender(()=>t(e,n))};class W8 extends bi{constructor(){super(...arguments),this.removePointerDownListener=Gt}onPointerDown(e){this.session=new e_(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:a_(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:hS(e),onStart:hS(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&be.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Xl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Bu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pS(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Sl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ne.test(t))t=parseFloat(t);else return t;const n=pS(t,e.target.x),r=pS(t,e.target.y);return`${n}% ${r}%`}},K8={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=vi.parse(t);if(i.length>5)return r;const s=vi.createTransformer(t),o=typeof i[0]!="number"?1:0,l=n.x.scale*e.x,a=n.y.scale*e.y;i[0+o]/=l,i[1+o]/=a;const c=Ae(l,a,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class q8 extends b.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;h4(Y8),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Bu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||be.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),V0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function c_(t){const[e,n]=WM(),r=b.useContext(_0);return M.jsx(q8,{...t,layoutGroup:r,switchLayoutGroup:b.useContext(ZM),isPresent:e,safeToRemove:n})}const Y8={borderRadius:{...Sl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Sl,borderTopRightRadius:Sl,borderBottomLeftRadius:Sl,borderBottomRightRadius:Sl,boxShadow:K8};function X8(t,e,n){const r=wt(t)?t:Oa(t);return r.start(av("",r,e,n)),r.animation}function G8(t){return t instanceof SVGElement&&t.tagName!=="svg"}const J8=(t,e)=>t.depth-e.depth;class Q8{constructor(){this.children=[],this.isDirty=!1}add(e){J0(this.children,e),this.isDirty=!0}remove(e){Q0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(J8),this.isDirty=!1,this.children.forEach(e)}}function Z8(t,e){const n=Jn.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(yi(r),t(s-e))};return be.read(r,!0),()=>yi(r)}const u_=["TopLeft","TopRight","BottomLeft","BottomRight"],eH=u_.length,mS=t=>typeof t=="string"?parseFloat(t):t,gS=t=>typeof t=="number"||ne.test(t);function tH(t,e,n,r,i,s){i?(t.opacity=Ae(0,n.opacity!==void 0?n.opacity:1,nH(r)),t.opacityExit=Ae(e.opacity!==void 0?e.opacity:1,0,rH(r))):s&&(t.opacity=Ae(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<eH;o++){const l=`border${u_[o]}Radius`;let a=yS(e,l),c=yS(n,l);if(a===void 0&&c===void 0)continue;a||(a=0),c||(c=0),a===0||c===0||gS(a)===gS(c)?(t[l]=Math.max(Ae(mS(a),mS(c),r),0),(Gn.test(c)||Gn.test(a))&&(t[l]+="%")):t[l]=c}(e.rotate||n.rotate)&&(t.rotate=Ae(e.rotate||0,n.rotate||0,r))}function yS(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const nH=f_(0,.5,_N),rH=f_(.5,.95,Gt);function f_(t,e,n){return r=>r<t?0:r>e?1:n(Ro(t,e,r))}function vS(t,e){t.min=e.min,t.max=e.max}function sn(t,e){vS(t.x,e.x),vS(t.y,e.y)}function wS(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function xS(t,e,n,r,i){return t-=e,t=Vf(t,1/n,r),i!==void 0&&(t=Vf(t,1/i,r)),t}function iH(t,e=0,n=1,r=.5,i,s=t,o=t){if(Gn.test(e)&&(e=parseFloat(e),e=Ae(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=Ae(s.min,s.max,r);t===s&&(l-=e),t.min=xS(t.min,e,n,l,i),t.max=xS(t.max,e,n,l,i)}function SS(t,e,[n,r,i],s,o){iH(t,e[n],e[r],e[i],e.scale,s,o)}const sH=["x","scaleX","originX"],oH=["y","scaleY","originY"];function kS(t,e,n,r){SS(t.x,e,sH,n?n.x:void 0,r?r.x:void 0),SS(t.y,e,oH,n?n.y:void 0,r?r.y:void 0)}function CS(t){return t.translate===0&&t.scale===1}function d_(t){return CS(t.x)&&CS(t.y)}function ES(t,e){return t.min===e.min&&t.max===e.max}function lH(t,e){return ES(t.x,e.x)&&ES(t.y,e.y)}function bS(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function h_(t,e){return bS(t.x,e.x)&&bS(t.y,e.y)}function TS(t){return tn(t.x)/tn(t.y)}function MS(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class aH{constructor(){this.members=[]}add(e){J0(this.members,e),e.scheduleRender()}remove(e){if(Q0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function cH(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:f,rotateY:d,skewX:h,skewY:p}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),f&&(r+=`rotateX(${f}deg) `),d&&(r+=`rotateY(${d}deg) `),h&&(r+=`skewX(${h}deg) `),p&&(r+=`skewY(${p}deg) `)}const l=t.x.scale*e.x,a=t.y.scale*e.y;return(l!==1||a!==1)&&(r+=`scale(${l}, ${a})`),r||"none"}const Li={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Pl=typeof window<"u"&&window.MotionDebug!==void 0,Ep=["","X","Y","Z"],uH={visibility:"hidden"},NS=1e3;let fH=0;function bp(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function p_(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=kN(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",be,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&p_(r)}function m_({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=e==null?void 0:e()){this.id=fH++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Pl&&(Li.totalNodes=Li.resolvedTargetDeltas=Li.recalculatedProjection=0),this.nodes.forEach(pH),this.nodes.forEach(wH),this.nodes.forEach(xH),this.nodes.forEach(mH),Pl&&window.MotionDebug.record(Li)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new Q8)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Z0),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const a=this.eventHandlers.get(o);a&&a.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=G8(o),this.instance=o;const{layoutId:a,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(c||a)&&(this.isLayoutDirty=!0),t){let f;const d=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Z8(d,250),Bu.hasAnimatedSinceResize&&(Bu.hasAnimatedSinceResize=!1,this.nodes.forEach(AS))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:d,hasRelativeTargetChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||bH,{onLayoutAnimationStart:v,onLayoutAnimationComplete:g}=u.getProps(),w=!this.targetLayout||!h_(this.targetLayout,p)||h,y=!d&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||y||d&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,y);const x={...q0(m,"layout"),onPlay:v,onComplete:g};(u.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x)}else d||AS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,yi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(SH),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&p_(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:a}=this.options;if(l===void 0&&!a)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(_S);return}this.isUpdating||this.nodes.forEach(yH),this.isUpdating=!1,this.nodes.forEach(vH),this.nodes.forEach(dH),this.nodes.forEach(hH),this.clearAllSnapshots();const l=Jn.now();ot.delta=_r(0,1e3/60,l-ot.timestamp),ot.timestamp=l,ot.isProcessing=!0,mp.update.process(ot),mp.preRender.process(ot),mp.render.process(ot),ot.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,V0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(gH),this.sharedNodes.forEach(kH)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,be.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){be.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let a=0;a<this.path.length;a++)this.path[a].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Le(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const a=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:a,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:a}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!d_(this.projectionDelta),a=this.getTransformTemplate(),c=a?a(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(l||Ii(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let a=this.removeElementScroll(l);return o&&(a=this.removeTransform(a)),TH(a),{animationId:this.root.animationId,measuredBox:l,layoutBox:a,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return Le();const a=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(MH))){const{scroll:u}=this.root;u&&(Qs(a.x,u.offset.x),Qs(a.y,u.offset.y))}return a}removeElementScroll(o){var l;const a=Le();if(sn(a,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:d}=u;u!==this.root&&f&&d.layoutScroll&&(f.wasRoot&&sn(a,o),Qs(a.x,f.offset.x),Qs(a.y,f.offset.y))}return a}applyTransform(o,l=!1){const a=Le();sn(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Zs(a,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Ii(u.latestValues)&&Zs(a,u.latestValues)}return Ii(this.latestValues)&&Zs(a,this.latestValues),a}removeTransform(o){const l=Le();sn(l,o);for(let a=0;a<this.path.length;a++){const c=this.path[a];if(!c.instance||!Ii(c.latestValues))continue;Og(c.latestValues)&&c.updateSnapshot();const u=Le(),f=c.measurePageBox();sn(u,f),kS(l,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Ii(this.latestValues)&&kS(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ot.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==a;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:d}=this.options;if(!(!this.layout||!(f||d))){if(this.resolvedRelativeTargetAt=ot.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Le(),this.relativeTargetOrigin=Le(),Jl(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),sn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Le(),this.targetWithTransforms=Le()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),A8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):sn(this.target,this.layout.layoutBox),o_(this.target,this.targetDelta)):sn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Le(),this.relativeTargetOrigin=Le(),Jl(this.relativeTargetOrigin,this.target,h.target),sn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Pl&&Li.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Og(this.parent.latestValues)||s_(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),a=!!this.resumingFrom||this!==l;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ot.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;sn(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;z8(this.layoutCorrected,this.treeScale,this.path,a),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Le());const{target:p}=l;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(wS(this.prevProjectionDelta.x,this.projectionDelta.x),wS(this.prevProjectionDelta.y,this.projectionDelta.y)),Gl(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==h||!MS(this.projectionDelta.x,this.prevProjectionDelta.x)||!MS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),Pl&&Li.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Js(),this.projectionDelta=Js(),this.projectionDeltaWithTransform=Js()}setAnimationOrigin(o,l=!1){const a=this.snapshot,c=a?a.latestValues:{},u={...this.latestValues},f=Js();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const d=Le(),h=a?a.source:void 0,p=this.layout?this.layout.source:void 0,m=h!==p,v=this.getStack(),g=!v||v.members.length<=1,w=!!(m&&!g&&this.options.crossfade===!0&&!this.path.some(EH));this.animationProgress=0;let y;this.mixTargetDelta=x=>{const S=x/1e3;DS(f.x,o.x,S),DS(f.y,o.y,S),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jl(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),CH(this.relativeTarget,this.relativeTargetOrigin,d,S),y&&lH(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=Le()),sn(y,this.relativeTarget)),m&&(this.animationValues=u,tH(u,c,this.latestValues,S,w,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(yi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=be.update(()=>{Bu.hasAnimatedSinceResize=!0,this.currentAnimation=X8(0,NS,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(NS),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:a,layout:c,latestValues:u}=o;if(!(!l||!a||!c)){if(this!==o&&this.layout&&c&&g_(this.options.animationType,this.layout.layoutBox,c.layoutBox)){a=this.target||Le();const f=tn(this.layout.layoutBox.x);a.x.min=o.target.x.min,a.x.max=a.x.min+f;const d=tn(this.layout.layoutBox.y);a.y.min=o.target.y.min,a.y.max=a.y.min+d}sn(l,a),Zs(l,u),Gl(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new aH),this.sharedNodes.get(o).add(l);const c=l.options.initialPromotionConfig;l.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:a}={}){const c=this.getStack();c&&c.promote(this,a),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:a}=o;if((a.z||a.rotate||a.rotateX||a.rotateY||a.rotateZ||a.skewX||a.skewY)&&(l=!0),!l)return;const c={};a.z&&bp("z",o,c,this.animationValues);for(let u=0;u<Ep.length;u++)bp(`rotate${Ep[u]}`,o,c,this.animationValues),bp(`skew${Ep[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var l,a;if(!this.instance||this.isSVG)return;if(!this.isVisible)return uH;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Lu(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=Lu(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ii(this.latestValues)&&(m.transform=u?u({},""):"none",this.hasProjected=!1),m}const d=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=cH(this.projectionDeltaWithTransform,this.treeScale,d),u&&(c.transform=u(d,c.transform));const{x:h,y:p}=this.projectionDelta;c.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,f.animationValues?c.opacity=f===this?(a=(l=d.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&a!==void 0?a:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:c.opacity=f===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in Of){if(d[m]===void 0)continue;const{correct:v,applyTo:g}=Of[m],w=c.transform==="none"?d[m]:v(d[m],f);if(g){const y=g.length;for(let x=0;x<y;x++)c[g[x]]=w}else c[m]=w}return this.options.layoutId&&(c.pointerEvents=f===this?Lu(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(_S),this.root.sharedNodes.clear()}}}function dH(t){t.updateLayout()}function hH(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?on(f=>{const d=o?n.measuredBox[f]:n.layoutBox[f],h=tn(d);d.min=r[f].min,d.max=d.min+h}):g_(s,n.layoutBox,r)&&on(f=>{const d=o?n.measuredBox[f]:n.layoutBox[f],h=tn(r[f]);d.max=d.min+h,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+h)});const l=Js();Gl(l,r,n.layoutBox);const a=Js();o?Gl(a,t.applyTransform(i,!0),n.measuredBox):Gl(a,r,n.layoutBox);const c=!d_(l);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:d,layout:h}=f;if(d&&h){const p=Le();Jl(p,n.layoutBox,d.layoutBox);const m=Le();Jl(m,r,h.layoutBox),h_(p,m)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=p,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:a,layoutDelta:l,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function pH(t){Pl&&Li.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function mH(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function gH(t){t.clearSnapshot()}function _S(t){t.clearMeasurements()}function yH(t){t.isLayoutDirty=!1}function vH(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function AS(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function wH(t){t.resolveTargetDelta()}function xH(t){t.calcProjection()}function SH(t){t.resetSkewAndRotation()}function kH(t){t.removeLeadSnapshot()}function DS(t,e,n){t.translate=Ae(e.translate,0,n),t.scale=Ae(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function OS(t,e,n,r){t.min=Ae(e.min,n.min,r),t.max=Ae(e.max,n.max,r)}function CH(t,e,n,r){OS(t.x,e.x,n.x,r),OS(t.y,e.y,n.y,r)}function EH(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const bH={duration:.45,ease:[.4,0,.1,1]},PS=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),RS=PS("applewebkit/")&&!PS("chrome/")?Math.round:Gt;function IS(t){t.min=RS(t.min),t.max=RS(t.max)}function TH(t){IS(t.x),IS(t.y)}function g_(t,e,n){return t==="position"||t==="preserve-aspect"&&!_8(TS(e),TS(n),.2)}function MH(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const NH=m_({attachResizeListener:(t,e)=>Ra(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Tp={current:void 0},y_=m_({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Tp.current){const t=new NH({});t.mount(window),t.setOptions({layoutScroll:!0}),Tp.current=t}return Tp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),_H={pan:{Feature:W8},drag:{Feature:U8,ProjectionNode:y_,MeasureLayout:c_}};function LS(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&be.postRender(()=>s(e,mc(e)))}class AH extends bi{mount(){const{current:e}=this.node;e&&(this.unmount=_4(e,n=>(LS(this.node,n,"Start"),r=>LS(this.node,r,"End"))))}unmount(){}}class DH extends bi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pc(Ra(this.node.current,"focus",()=>this.onFocus()),Ra(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function VS(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&be.postRender(()=>s(e,mc(e)))}class OH extends bi{mount(){const{current:e}=this.node;e&&(this.unmount=P4(e,n=>(VS(this.node,n,"Start"),(r,{success:i})=>VS(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Rg=new WeakMap,Mp=new WeakMap,PH=t=>{const e=Rg.get(t.target);e&&e(t)},RH=t=>{t.forEach(PH)};function IH({root:t,...e}){const n=t||document;Mp.has(n)||Mp.set(n,{});const r=Mp.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(RH,{root:t,...e})),r[i]}function LH(t,e,n){const r=IH(e);return Rg.set(t,n),r.observe(t),()=>{Rg.delete(t),r.unobserve(t)}}const VH={some:0,all:1};class BH extends bi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:VH[i]},l=a=>{const{isIntersecting:c}=a;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),d=c?u:f;d&&d(a)};return LH(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(zH(e,n))&&this.startObserver()}unmount(){}}function zH({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const $H={inView:{Feature:BH},tap:{Feature:OH},focus:{Feature:DH},hover:{Feature:AH}},FH={layout:{ProjectionNode:y_,MeasureLayout:c_}},Ig={current:null},v_={current:!1};function jH(){if(v_.current=!0,!!O0)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ig.current=t.matches;t.addListener(e),e()}else Ig.current=!1}const HH=[...HN,gt,vi],UH=t=>HH.find(jN(t)),BS=new WeakMap;function WH(t,e,n){for(const r in e){const i=e[r],s=n[r];if(wt(i))t.addValue(r,i);else if(wt(s))t.addValue(r,Oa(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Oa(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const zS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class KH{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=sv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Jn.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,be.render(this.render,!1,!0))};const{latestValues:a,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=Yd(n),this.isVariantNode=JM(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in d){const p=d[h];a[h]!==void 0&&wt(p)&&p.set(a[h],!1)}}mount(e){this.current=e,BS.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),v_.current||jH(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ig.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){BS.delete(this.current),this.projection&&this.projection.unmount(),yi(this.notifyUpdate),yi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Cs.has(e),i=n.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&be.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Io){const n=Io[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Le()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<zS.length;r++){const i=zS[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=WH(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Oa(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&($N(i)||DN(i))?i=parseFloat(i):!UH(i)&&vi.test(n)&&(i=VN(e,n)),this.setBaseTarget(e,wt(i)?i.get():i)),wt(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=z0(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!wt(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Z0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class w_ extends KH{constructor(){super(...arguments),this.KeyframeResolver=UN}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;wt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function qH(t){return window.getComputedStyle(t)}class YH extends w_{constructor(){super(...arguments),this.type="html",this.renderInstance=oN}readValueFromInstance(e,n){if(Cs.has(n)){const r=iv(n);return r&&r.default||0}else{const r=qH(e),i=(rN(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return l_(e,n)}build(e,n,r){j0(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return K0(e,n,r)}}class XH extends w_{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Le}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Cs.has(n)){const r=iv(n);return r&&r.default||0}return n=lN.has(n)?n:L0(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return uN(e,n,r)}build(e,n,r){H0(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){aN(e,n,r,i)}mount(e){this.isSVGTag=W0(e.tagName),super.mount(e)}}const GH=(t,e)=>B0(t)?new XH(e):new YH(e,{allowProjection:t!==b.Fragment}),JH=k4({...x8,...$H,..._H,...FH},GH),Bf=Vj(JH),x_=b.memo(({data:t,selected:e})=>{const{createNode:n,deleteNode:r}=tw(),[i,s]=b.useState(!1),[o,l]=b.useState(!1),a=async u=>{u.stopPropagation(),await n(t.id)},c=async u=>{u.stopPropagation(),!t.isRoot&&window.confirm("     ?")&&await r(t.id)};return M.jsxs(Bf.div,{className:`holo-node ${t.isRoot?"root":""} ${e?"selected":""} ${t.isHighlighted?"highlighted":""}`,initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.3,type:"spring"},onMouseEnter:()=>{l(!0),s(!0)},onMouseLeave:()=>{l(!1),s(!1)},children:[!t.isRoot&&M.jsx(Po,{type:"target",position:J.Top,className:"holo-handle"}),M.jsxs("div",{className:"holo-node-content",children:[M.jsx("div",{className:"holo-node-icon",children:t.isRoot?"":""}),M.jsx("div",{className:"holo-node-title",children:t.title||" "}),t.tags&&t.tags.length>0&&M.jsx("div",{className:"holo-node-tags",children:t.tags.slice(0,3).map((u,f)=>M.jsx("span",{className:"holo-tag",children:u},f))})]}),i&&M.jsxs(Bf.div,{className:"holo-node-actions",initial:{opacity:0,y:-5},animate:{opacity:1,y:0},children:[M.jsx("button",{className:"holo-action-btn add",onClick:a,title:"  ",children:"+"}),!t.isRoot&&M.jsx("button",{className:"holo-action-btn delete",onClick:c,title:" ",children:""})]}),M.jsx(Po,{type:"source",position:J.Bottom,className:"holo-handle"}),M.jsx("div",{className:`holo-glow ${o?"active":""}`})]})});x_.displayName="HoloNode";const QH={holoNode:x_};function ZH({onNodeClick:t,highlightedNodeId:e,onHighlightClear:n}){const{nodes:r,createNode:i}=tw(),{fitView:s,setCenter:o}=jd(),[l,a,c]=X3([]),[u,f,d]=G3([]),h=b.useRef(!1);b.useEffect(()=>{if(r.length===0)return;const v=new Map,g=[];r.forEach(S=>{v.set(S.id,{...S,children:[]})}),r.forEach(S=>{S.parent_id&&v.has(S.parent_id)?v.get(S.parent_id).children.push(v.get(S.id)):S.parent_id||g.push(v.get(S.id))});const w=[],y=[],x=(S,C=0,k=0,E=Math.PI*2,N=null)=>{const I=C*250,O=S.position_x||(N?N.x+Math.cos(k)*I:0),L=S.position_y||(N?N.y+Math.sin(k)*I:0);if(w.push({id:S.id,type:"holoNode",position:{x:O,y:L},data:{...S,isRoot:C===0,isHighlighted:S.id===e}}),S.parent_id&&y.push({id:`${S.parent_id}-${S.id}`,source:S.parent_id,target:S.id,type:"default",animated:S.id===e,style:{stroke:S.id===e?"#00ffff":"rgba(0, 255, 255, 0.4)",strokeWidth:S.id===e?3:2}}),S.children.length>0){const $=E/S.children.length;S.children.forEach((_,V)=>{const P=k-E/2+$*(V+.5);x(_,C+1,P,$*.8,{x:O,y:L})})}};g.forEach((S,C)=>{x(S,0,Math.PI*2/g.length*C)}),a(w),f(y),!h.current&&w.length>0&&setTimeout(()=>{s({padding:.2,duration:500}),h.current=!0},100)},[r,a,f,s,e]),b.useEffect(()=>{if(e){const v=l.find(g=>g.id===e);v&&(o(v.position.x,v.position.y,{zoom:1.5,duration:800}),setTimeout(()=>{n==null||n()},2e3))}},[e,l,o,n]);const p=b.useCallback((v,g)=>{const w=r.find(y=>y.id===g.id);w&&t(w)},[r,t]);b.useCallback(async(v,g)=>{await i(v,g)},[i]);const m=b.useCallback((v,g)=>{},[]);return M.jsxs(Y3,{nodes:l,edges:u,onNodesChange:c,onEdgesChange:d,onNodeClick:p,onNodeDragStop:m,nodeTypes:QH,fitView:!0,minZoom:.1,maxZoom:2,defaultEdgeOptions:{type:"default",style:{stroke:"rgba(0, 255, 255, 0.4)",strokeWidth:2}},proOptions:{hideAttribution:!0},children:[M.jsx(tj,{color:"rgba(0, 255, 255, 0.05)",gap:50,size:1}),M.jsx(aj,{showInteractive:!1,position:"bottom-left"}),M.jsx(Sj,{nodeColor:v=>{var g;return(g=v.data)!=null&&g.isRoot?"#00ffff":"#a855f7"},maskColor:"rgba(0, 0, 0, 0.8)",position:"bottom-right"})]})}function eU(t){return M.jsx("div",{className:"knowledge-tree",children:M.jsx(FM,{children:M.jsx(ZH,{...t})})})}function st(t){this.content=t}st.prototype={constructor:st,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new st(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new st(n)},addToStart:function(t,e){return new st([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new st(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new st(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=st.from(t),t.size?new st(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=st.from(t),t.size?new st(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=st.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};st.from=function(t){if(t instanceof st)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new st(e)};function S_(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=S_(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function k_(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),l=e.child(--s),a=o.nodeSize;if(o==l){n-=a,r-=a;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let c=0,u=Math.min(o.text.length,l.text.length);for(;c<u&&o.text[o.text.length-c-1]==l.text[l.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let c=k_(o.content,l.content,n-1,r-1);if(c)return c}n-=a,r-=a}}class F{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,l=0;l<n;o++){let a=this.content[o],c=l+a.nodeSize;if(c>e&&r(a,i+l,s||null,o)!==!1&&a.content.size){let u=l+1;a.nodesBetween(Math.max(0,e-u),Math.min(a.content.size,n-u),r,i+u)}l=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(l,a)=>{let c=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&c||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new F(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let l=this.content[s],a=o+l.nodeSize;a>e&&((o<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,n-o-1))),r.push(l),i+=l.nodeSize),o=a}return new F(r,i)}cutByIndex(e,n){return e==n?F.empty:e==0&&n==this.content.length?this:new F(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new F(i,s)}addToStart(e){return new F([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new F(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return S_(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return k_(this,e,n,r)}findIndex(e){if(e==0)return iu(0,e);if(e==this.size)return iu(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=e)return s==e?iu(n+1,s):iu(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return F.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new F(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return F.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new F(n||e,r)}static from(e){if(!e)return F.empty;if(e instanceof F)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new F([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}F.empty=new F([],0);const Np={index:0,offset:0};function iu(t,e){return Np.index=t,Np.offset=e,Np}function zf(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!zf(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!zf(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let we=class Lg{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&zf(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Lg.none;if(e instanceof Lg)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};we.none=[];class $f extends Error{}class K{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=E_(this.content,e+this.openStart,n);return r&&new K(r,this.openStart,this.openEnd)}removeBetween(e,n){return new K(C_(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return K.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new K(F.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new K(e,r,i)}}K.empty=new K(F.empty,0,0);function C_(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:l}=t.findIndex(n);if(i==e||s.isText){if(l!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(C_(s.content,e-i-1,n-i-1)))}function E_(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let l=E_(o.content,e-s-1,n,o);return l&&t.replaceChild(i,o.copy(l))}function tU(t,e,n){if(n.openStart>t.depth)throw new $f("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new $f("Inconsistent open depths");return b_(t,e,n,0)}function b_(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=b_(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,l=o.content;return Zi(o,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:o,end:l}=nU(n,t);return Zi(s,M_(t,o,l,e,r))}else return Zi(s,Ff(t,e,r))}function T_(t,e){if(!e.type.compatibleContent(t.type))throw new $f("Cannot join "+e.type.name+" onto "+t.type.name)}function Vg(t,e,n){let r=t.node(n);return T_(r,e.node(n)),r}function Qi(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Ql(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Qi(t.nodeAfter,r),s++));for(let l=s;l<o;l++)Qi(i.child(l),r);e&&e.depth==n&&e.textOffset&&Qi(e.nodeBefore,r)}function Zi(t,e){return t.type.checkContent(e),t.copy(e)}function M_(t,e,n,r,i){let s=t.depth>i&&Vg(t,e,i+1),o=r.depth>i&&Vg(n,r,i+1),l=[];return Ql(null,t,i,l),s&&o&&e.index(i)==n.index(i)?(T_(s,o),Qi(Zi(s,M_(t,e,n,r,i+1)),l)):(s&&Qi(Zi(s,Ff(t,e,i+1)),l),Ql(e,n,i,l),o&&Qi(Zi(o,Ff(n,r,i+1)),l)),Ql(r,null,i,l),new F(l)}function Ff(t,e,n){let r=[];if(Ql(null,t,n,r),t.depth>n){let i=Vg(t,e,n+1);Qi(Zi(i,Ff(t,e,n+1)),r)}return Ql(e,null,n,r),new F(r)}function nU(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(F.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Ia{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return we.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new jf(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:l,offset:a}=o.content.findIndex(s),c=s-a;if(r.push(o,l,i+a),!c||(o=o.child(l),o.isText))break;s=c-1,i+=a+1}return new Ia(n,r,s)}static resolveCached(e,n){let r=$S.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else $S.set(e,r=new rU);let i=r.elts[r.i]=Ia.resolve(e,n);return r.i=(r.i+1)%iU,i}}class rU{constructor(){this.elts=[],this.i=0}}const iU=12,$S=new WeakMap;class jf{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const sU=Object.create(null);let fi=class Bg{constructor(e,n,r,i=we.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||F.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&zf(this.attrs,n||e.defaultAttrs||sU)&&we.sameSet(this.marks,r||we.none)}copy(e=null){return e==this.content?this:new Bg(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Bg(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return K.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),l=i.start(o),c=i.node(o).content.cut(i.pos-l,s.pos-l);return new K(c,i.depth-o,s.depth-o)}replace(e,n,r){return tU(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Ia.resolveCached(this,e)}resolveNoCache(e){return Ia.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),N_(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=F.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=i;a<s;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=we.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!we.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=F.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};fi.prototype.text=void 0;class Hf extends fi{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):N_(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Hf(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Hf(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function N_(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class ps{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new oU(e,n);if(r.next==null)return ps.empty;let i=__(r);r.next&&r.err("Unexpected trailing text");let s=hU(dU(i));return pU(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,l){let a=o.matchFragment(e,r);if(a&&(!n||a.validEnd))return F.from(l.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:f}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(f)==-1){i.push(f);let d=s(f,l.concat(u));if(d)return d}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:a}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}ps.empty=new ps(!0);class oU{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function __(t){let e=[];do e.push(lU(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function lU(t){let e=[];do e.push(aU(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function aU(t){let e=fU(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=cU(t,e);else break;return e}function FS(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function cU(t,e){let n=FS(t),r=n;return t.eat(",")&&(t.next!="}"?r=FS(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function uU(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function fU(t){if(t.eat("(")){let e=__(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=uU(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function dU(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,l,a){let c={term:a,to:l};return e[o].push(c),c}function i(o,l){o.forEach(a=>a.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((a,c)=>a.concat(s(c,l)),[]);if(o.type=="seq")for(let a=0;;a++){let c=s(o.exprs[a],l);if(a==o.exprs.length-1)return c;i(c,l=n())}else if(o.type=="star"){let a=n();return r(l,a),i(s(o.expr,a),a),[r(a)]}else if(o.type=="plus"){let a=n();return i(s(o.expr,l),a),i(s(o.expr,a),a),[r(a)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let a=l;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,a),u),a=u}if(o.max==-1)i(s(o.expr,a),a);else for(let c=o.min;c<o.max;c++){let u=n();r(a,u),i(s(o.expr,a),u),a=u}return[r(a)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function A_(t,e){return e-t}function jS(t,e){let n=[];return r(e),n.sort(A_);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:l,to:a}=s[o];!l&&n.indexOf(a)==-1&&r(a)}}}function hU(t){let e=Object.create(null);return n(jS(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:l,to:a})=>{if(!l)return;let c;for(let u=0;u<i.length;u++)i[u][0]==l&&(c=i[u][1]);jS(t,a).forEach(u=>{c||i.push([l,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new ps(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(A_);s.next.push({type:i[o][0],next:e[l.join(",")]||n(l)})}return s}}function pU(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:a,next:c}=i.next[l];o.push(a.name),s&&!(a.isText||a.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function D_(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function O_(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function P_(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function R_(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new gU(t,r,e[r]);return n}let HS=class I_{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=R_(e,r.attrs),this.defaultAttrs=D_(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ps.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:O_(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new fi(this,this.computeAttrs(e),F.from(n),we.setFrom(r))}createChecked(e=null,n,r){return n=F.from(n),this.checkContent(n),new fi(this,this.computeAttrs(e),n,we.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=F.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(F.empty,!0);return s?new fi(this,e,n.append(s),we.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){P_(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:we.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new I_(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function mU(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class gU{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?mU(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Jd{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=R_(e,i.attrs),this.excluded=null;let s=D_(this.attrs);this.instance=s?new we(this,s):null}create(e=null){return!e&&this.instance?this.instance:new we(this,O_(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Jd(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){P_(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}let L_=class{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=st.from(e.nodes),n.marks=st.from(e.marks||{}),this.nodes=HS.compile(this.spec.nodes,this),this.marks=Jd.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=ps.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?US(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:US(this,o.split(" "))}this.nodeFromJSON=i=>fi.fromJSON(this,i),this.markFromJSON=i=>we.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof HS){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Hf(r,r.defaultAttrs,e,we.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}};function US(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let l in t.marks){let a=t.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=a)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function yU(t){return t.tag!=null}function vU(t){return t.style!=null}let Zl=class zg{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(yU(i))this.tags.push(i);else if(vU(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new KS(this,n,!1);return r.addAll(e,we.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new KS(this,n,!0);return r.addAll(e,we.none,n.from,n.to),K.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(SU(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(o.getAttrs){let a=o.getAttrs(n);if(a===!1)continue;o.attrs=a||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=qS(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=qS(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new zg(e,zg.schemaRules(e)))}};const V_={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},wU={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},B_={ol:!0,ul:!0},La=1,$g=2,ea=4;function WS(t,e,n){return e!=null?(e?La:0)|(e==="full"?$g:0):t&&t.whitespace=="pre"?La|$g:n&~ea}class su{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=we.none,this.match=s||(o&ea?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(F.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&La)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=F.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(F.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!V_.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class KS{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=WS(null,n.preserveWhitespace,0)|(r?ea:0);i?s=new su(i.type,i.attrs,we.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new su(null,null,we.none,!0,null,o):s=new su(e.schema.topNodeType,null,we.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&$g?"full":this.localPreserveWS||(i.options&La)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)if(s==="full")r=r.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let l=r.split(/\r?\n|\r/);for(let a=0;a<l.length;a++)a&&this.insertNode(o.linebreakReplacement.create(),n,!0),l[a]&&this.insertNode(o.text(l[a]),n,!/\S/.test(l[a]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let l=i.content[i.content.length-1],a=e.previousSibling;(!l||a&&a.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),l;B_.hasOwnProperty(o)&&this.parser.normalizeLists&&xU(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(a?a.ignore:wU.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let c,u=this.needsBlock;if(V_.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let f=a&&a.skip?n:this.readStyles(e,n);f&&this.addAll(e,f),c&&this.sync(s),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,a,c,a.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let a=this.parser.matchStyle(s,o,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(c=>!a.clearMark(c)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let a=this.enter(o,n.attrs||null,r,n.preserveWhitespace);a&&(s=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r,!1));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}s&&this.sync(l)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n,r){let i,s;for(let o=this.open,l=0;o>=0;o--){let a=this.nodes[o],c=a.findWrapping(e);if(c&&(!i||i.length>c.length+l)&&(i=c,s=a,!c.length))break;if(a.solid){if(r)break;l+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=we.none;for(let l of i.concat(e.marks))(s.type?s.type.allowsMarkType(l.type):YS(l.type,e.type))&&(o=l.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let l=WS(e,s,o.options);o.options&ea&&o.content.length==0&&(l|=ea);let a=we.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):YS(c.type,e))?(a=c.addToSet(a),!1):!0),this.nodes.push(new su(e,n,a,i,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=La)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,a)=>{for(;l>=0;l--){let c=n[l];if(c==""){if(l==n.length-1||l==0)continue;for(;a>=s;a--)if(o(l-1,a))return!0;return!1}else{let u=a>0||a==0&&i?this.nodes[a].type:r&&a>=s?r.node(a-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;a--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function xU(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&B_.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function SU(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function qS(t){let e={};for(let n in t)e[n]=t[n];return e}function YS(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=l=>{s.push(l);for(let a=0;a<l.edgeCount;a++){let{type:c,next:u}=l.edge(a);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}class Es{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=_p(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let l=0,a=0;for(;l<s.length&&a<o.marks.length;){let c=o.marks[a];if(!this.marks[c.type.name]){a++;continue}if(!c.eq(s[l][0])||c.type.spec.spanning===!1)break;l++,a++}for(;l<s.length;)i=s.pop()[1];for(;a<o.marks.length;){let c=o.marks[a++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=zu(_p(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&zu(_p(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return zu(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Es(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=XS(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return XS(e.marks)}}function XS(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function _p(t){return t.document||window.document}const GS=new WeakMap;function kU(t){let e=GS.get(t);return e===void 0&&GS.set(t,e=CU(t)),e}function CU(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function zu(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=kU(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let l,a=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let f in c)if(c[f]!=null){let d=f.indexOf(" ");d>0?a.setAttributeNS(f.slice(0,d),f.slice(d+1),c[f]):f=="style"&&a.style?a.style.cssText=c[f]:a.setAttribute(f,c[f])}}for(let f=u;f<e.length;f++){let d=e[f];if(d===0){if(f<e.length-1||f>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:h,contentDOM:p}=zu(t,d,n,r);if(a.appendChild(h),p){if(l)throw new RangeError("Multiple content holes");l=p}}}return{dom:a,contentDOM:l}}const z_=65535,$_=Math.pow(2,16);function EU(t,e){return t+e*$_}function JS(t){return t&z_}function bU(t){return(t-(t&z_))/$_}const F_=1,j_=2,$u=4,H_=8;class Fg{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&H_)>0}get deletedBefore(){return(this.delInfo&(F_|$u))>0}get deletedAfter(){return(this.delInfo&(j_|$u))>0}get deletedAcross(){return(this.delInfo&$u)>0}}class Kt{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Kt.empty)return Kt.empty}recover(e){let n=0,r=JS(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+bU(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let c=this.ranges[l+s],u=this.ranges[l+o],f=a+c;if(e<=f){let d=c?e==a?-1:e==f?1:n:n,h=a+i+(d<0?0:u);if(r)return h;let p=e==(n<0?a:f)?null:EU(l/3,e-a),m=e==a?j_:e==f?F_:$u;return(n<0?e!=a:e!=f)&&(m|=H_),new Fg(h,m,p)}i+=u-c}return r?e+i:new Fg(e+i,0,null)}touches(e,n){let r=0,i=JS(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let c=this.ranges[l+s],u=a+c;if(e<=u&&l==i*3)return!0;r+=this.ranges[l+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),a=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(l,l+c,a,a+u),s+=u-c}}invert(){return new Kt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Kt.empty:new Kt(e<0?[0,-e,0]:[0,0,e])}}Kt.empty=new Kt([]);class Va{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Va(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Va;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],l=o.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(s);if(a!=null&&a>s&&a<this.to){s=a,e=this._maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new Fg(e,i,null)}}const Ap=Object.create(null);class bt{getMap(){return Kt.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Ap[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Ap)throw new RangeError("Duplicate use of step JSON ID "+e);return Ap[e]=n,n.prototype.jsonID=e,n}}class Fe{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Fe(e,null)}static fail(e){return new Fe(null,e)}static fromReplace(e,n,r,i){try{return Fe.ok(e.replace(n,r,i))}catch(s){if(s instanceof $f)return Fe.fail(s.message);throw s}}}function cv(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(cv(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return F.fromArray(r)}class Jr extends bt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new K(cv(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Fe.fromReplace(e,this.from,this.to,s)}invert(){return new Un(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Jr(n.pos,r.pos,this.mark)}merge(e){return e instanceof Jr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Jr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Jr(n.from,n.to,e.markFromJSON(n.mark))}}bt.jsonID("addMark",Jr);class Un extends bt{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new K(cv(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Fe.fromReplace(e,this.from,this.to,r)}invert(){return new Jr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Un(n.pos,r.pos,this.mark)}merge(e){return e instanceof Un&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Un(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Un(n.from,n.to,e.markFromJSON(n.mark))}}bt.jsonID("removeMark",Un);class Qr extends bt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Fe.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Fe.fromReplace(e,this.pos,this.pos+1,new K(F.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Qr(this.pos,n.marks[i]);return new Qr(this.pos,this.mark)}}return new ms(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Qr(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Qr(n.pos,e.markFromJSON(n.mark))}}bt.jsonID("addNodeMark",Qr);class ms extends bt{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Fe.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Fe.fromReplace(e,this.pos,this.pos+1,new K(F.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Qr(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ms(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ms(n.pos,e.markFromJSON(n.mark))}}bt.jsonID("removeNodeMark",ms);class Ge extends bt{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&jg(e,this.from,this.to)?Fe.fail("Structure replace would overwrite content"):Fe.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Kt([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ge(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ge(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Ge)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?K.empty:new K(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ge(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?K.empty:new K(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ge(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ge(n.from,n.to,K.fromJSON(e,n.slice),!!n.structure)}}bt.jsonID("replace",Ge);class et extends bt{constructor(e,n,r,i,s,o,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(e){if(this.structure&&(jg(e,this.from,this.gapFrom)||jg(e,this.gapTo,this.to)))return Fe.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Fe.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Fe.fromReplace(e,this.from,this.to,r):Fe.fail("Content does not fit in gap")}getMap(){return new Kt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new et(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new et(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new et(n.from,n.to,n.gapFrom,n.gapTo,K.fromJSON(e,n.slice),n.insert,!!n.structure)}}bt.jsonID("replaceAround",et);function jg(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function TU(t,e,n,r){let i=[],s=[],o,l;t.doc.nodesBetween(e,n,(a,c,u)=>{if(!a.isInline)return;let f=a.marks;if(!r.isInSet(f)&&u.type.allowsMarkType(r.type)){let d=Math.max(c,e),h=Math.min(c+a.nodeSize,n),p=r.addToSet(f);for(let m=0;m<f.length;m++)f[m].isInSet(p)||(o&&o.to==d&&o.mark.eq(f[m])?o.to=h:i.push(o=new Un(d,h,f[m])));l&&l.to==d?l.to=h:s.push(l=new Jr(d,h,r))}}),i.forEach(a=>t.step(a)),s.forEach(a=>t.step(a))}function MU(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,l)=>{if(!o.isInline)return;s++;let a=null;if(r instanceof Jd){let c=o.marks,u;for(;u=r.isInSet(c);)(a||(a=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(a=[r]):a=o.marks;if(a&&a.length){let c=Math.min(l+o.nodeSize,n);for(let u=0;u<a.length;u++){let f=a[u],d;for(let h=0;h<i.length;h++){let p=i[h];p.step==s-1&&f.eq(i[h].style)&&(d=p)}d?(d.to=c,d.step=s):i.push({style:f,from:Math.max(l,e),to:c,step:s})}}}),i.forEach(o=>t.step(new Un(o.from,o.to,o.style)))}function uv(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],l=e+1;for(let a=0;a<s.childCount;a++){let c=s.child(a),u=l+c.nodeSize,f=r.matchType(c.type);if(!f)o.push(new Ge(l,u,K.empty));else{r=f;for(let d=0;d<c.marks.length;d++)n.allowsMarkType(c.marks[d].type)||t.step(new Un(l,u,c.marks[d]));if(i&&c.isText&&n.whitespace!="pre"){let d,h=/\r?\n|\r/g,p;for(;d=h.exec(c.text);)p||(p=new K(F.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),o.push(new Ge(l+d.index,l+d.index+d[0].length,p))}}l=u}if(!r.validEnd){let a=r.fillBefore(F.empty,!0);t.replace(l,l,new K(a,0,0))}for(let a=o.length-1;a>=0;a--)t.step(o[a])}function NU(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function tl(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,s=0;;--r){let o=t.$from.node(r),l=t.$from.index(r)+i,a=t.$to.indexAfter(r)-s;if(r<t.depth&&o.canReplace(l,a,n))return r;if(r==0||o.type.spec.isolating||!NU(o,l,a))break;l&&(i=1),a<o.childCount&&(s=1)}return null}function _U(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),l=i.after(s+1),a=o,c=l,u=F.empty,f=0;for(let p=s,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,u=F.from(r.node(p).copy(u)),f++):a--;let d=F.empty,h=0;for(let p=s,m=!1;p>n;p--)m||i.after(p+1)<i.end(p)?(m=!0,d=F.from(i.node(p).copy(d)),h++):c++;t.step(new et(a,c,o,l,new K(u.append(d),f,h),u.size-f,!0))}function fv(t,e,n=null,r=t){let i=AU(t,e),s=i&&DU(r,e);return s?i.map(QS).concat({type:e,attrs:n}).concat(s.map(QS)):null}function QS(t){return{type:t,attrs:null}}function AU(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function DU(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let a=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;a&&c<i;c++)a=a.matchType(n.child(c).type);return!a||!a.validEnd?null:o}function OU(t,e,n){let r=F.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=F.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new et(i,s,i,s,new K(r,0,0),n.length,!0))}function PU(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,l)=>{let a=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,a)&&RU(t.doc,t.mapping.slice(s).map(l),r)){let c=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!p?c=!1:!h&&p&&(c=!0)}c===!1&&W_(t,o,l,s),uv(t,t.mapping.slice(s).map(l,1),r,void 0,c===null);let u=t.mapping.slice(s),f=u.map(l,1),d=u.map(l+o.nodeSize,1);return t.step(new et(f,d,f+1,d-1,new K(F.from(r.create(a,null,o.marks)),0,0),1,!0)),c===!0&&U_(t,o,l,s),!1}})}function U_(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let a=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function W_(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function RU(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function IU(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new et(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new K(F.from(o),0,0),1,!0))}function Sr(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let f=i.node(c),d=i.index(c);if(f.type.spec.isolating)return!1;let h=f.content.cutByIndex(d,f.childCount),p=r&&r[u+1];p&&(h=h.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[u]||f;if(!f.canReplace(d+1,f.childCount)||!m.type.validContent(h))return!1}let l=i.indexAfter(s),a=r&&r[0];return i.node(s).canReplaceWith(l,l,a?a.type:i.node(s+1).type)}function LU(t,e,n=1,r){let i=t.doc.resolve(e),s=F.empty,o=F.empty;for(let l=i.depth,a=i.depth-n,c=n-1;l>a;l--,c--){s=F.from(i.node(l).copy(s));let u=r&&r[c];o=F.from(u?u.type.create(u.attrs,o):i.node(l).copy(o))}t.step(new Ge(e,e,new K(s.append(o),n,n),!0))}function Ti(t,e){let n=t.resolve(e),r=n.index();return K_(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function VU(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function K_(t,e){return!!(t&&e&&!t.isLeaf&&VU(t,e))}function Qd(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&K_(s,o)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function BU(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let u=o.whitespace=="pre",f=!!o.contentMatch.matchType(i);u&&!f?r=!1:!u&&f&&(r=!0)}let l=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);W_(t,u.node(),u.before(),l)}o.inlineContent&&uv(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let a=t.mapping.slice(l),c=a.map(e-n);if(t.step(new Ge(c,a.map(e+n,-1),K.empty,!0)),r===!0){let u=t.doc.resolve(c);U_(t,u.node(),u.before(),t.steps.length)}return t}function zU(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function q_(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,a=r.index(o)+(l>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(a,a,i);else{let f=c.contentMatchAt(a).findWrapping(i.firstChild.type);u=f&&c.canReplaceWith(a,a,f[0])}if(u)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function Zd(t,e,n=e,r=K.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return Y_(i,s,r)?new Ge(e,n,r):new $U(i,s,r).fit()}function Y_(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class $U{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=F.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=F.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let a=new K(s,o,l);return e>-1?new et(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new Ge(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Dp(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:c}=this.frontier[l],u,f=null;if(n==1&&(o?c.matchType(o.type)||(f=c.fillBefore(F.from(o),!1)):s&&a.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:f};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Dp(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new K(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Dp(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new K(Rl(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new K(Rl(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,l=r?r.content:o.content,a=o.openStart-e,c=0,u=[],{match:f,type:d}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)u.push(i.child(m));f=f.matchFragment(i)}let h=l.size+e-(o.content.size-o.openEnd);for(;c<l.childCount;){let m=l.child(c),v=f.matchType(m.type);if(!v)break;c++,(c>1||a==0||m.content.size)&&(f=v,u.push(X_(m.mark(d.allowedMarks(m.marks)),c==1?a:0,c==l.childCount?h:-1)))}let p=c==l.childCount;p||(h=-1),this.placed=Il(this.placed,n,F.from(u)),this.frontier[n].match=f,p&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,v=l;m<h;m++){let g=v.lastChild;this.frontier.push({type:g.type,match:g.contentMatchAt(g.childCount)}),v=g.content}this.unplaced=p?e==0?K.empty:new K(Rl(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new K(Rl(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Op(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=Op(e,n,i,r,s);if(o){for(let l=n-1;l>=0;l--){let{match:a,type:c}=this.frontier[l],u=Op(e,l,c,a,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Il(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Il(this.placed,this.depth,F.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(F.empty,!0);n.childCount&&(this.placed=Il(this.placed,this.frontier.length,n))}}function Rl(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Rl(t.firstChild.content,e-1,n)))}function Il(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Il(t.lastChild.content,e-1,n)))}function Dp(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function X_(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,X_(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(F.empty,!0)))),t.copy(r)}function Op(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!FU(n,s.content,o)?l:null}function FU(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function jU(t){return t.spec.defining||t.spec.definingForContent}function HU(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(Y_(i,s,r))return t.step(new Ge(e,n,r));let o=J_(i,s);o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let d=i.depth,h=i.pos-1;d>0;d--,h--){let p=i.node(d).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(d)>-1?l=d:i.before(d)==h&&o.splice(1,0,-d)}let a=o.indexOf(l),c=[],u=r.openStart;for(let d=r.content,h=0;;h++){let p=d.firstChild;if(c.push(p),h==r.openStart)break;d=p.content}for(let d=u-1;d>=0;d--){let h=c[d],p=jU(h.type);if(p&&!h.sameMarkup(i.node(Math.abs(l)-1)))u=d;else if(p||!h.type.isTextblock)break}for(let d=r.openStart;d>=0;d--){let h=(d+u+1)%(r.openStart+1),p=c[h];if(p)for(let m=0;m<o.length;m++){let v=o[(m+a)%o.length],g=!0;v<0&&(g=!1,v=-v);let w=i.node(v-1),y=i.index(v-1);if(w.canReplaceWith(y,y,p.type,p.marks))return t.replace(i.before(v),g?s.after(v):n,new K(G_(r.content,0,r.openStart,h),h,r.openEnd))}}let f=t.steps.length;for(let d=o.length-1;d>=0&&(t.replace(e,n,r),!(t.steps.length>f));d--){let h=o[d];h<0||(e=i.before(h),n=s.after(h))}}function G_(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(G_(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(F.empty,!0))}return t}function UU(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=zU(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new K(F.from(r),0,0))}function WU(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=J_(r,i);for(let o=0;o<s.length;o++){let l=s[o],a=o==s.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function J_(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class uo extends bt{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Fe.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Fe.fromReplace(e,this.pos,this.pos+1,new K(F.from(i),0,n.isLeaf?0:1))}getMap(){return Kt.empty}invert(e){return new uo(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new uo(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new uo(n.pos,n.attr,n.value)}}bt.jsonID("attr",uo);class Ba extends bt{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Fe.ok(r)}getMap(){return Kt.empty}invert(e){return new Ba(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Ba(n.attr,n.value)}}bt.jsonID("docAttr",Ba);let Vo=class extends Error{};Vo=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Vo.prototype=Object.create(Error.prototype);Vo.prototype.constructor=Vo;Vo.prototype.name="TransformError";class KU{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Va}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Vo(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=K.empty){let i=Zd(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new K(F.from(r),0,0))}delete(e,n){return this.replace(e,n,K.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return HU(this,e,n,r),this}replaceRangeWith(e,n,r){return UU(this,e,n,r),this}deleteRange(e,n){return WU(this,e,n),this}lift(e,n){return _U(this,e,n),this}join(e,n=1){return BU(this,e,n),this}wrap(e,n){return OU(this,e,n),this}setBlockType(e,n=e,r,i=null){return PU(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return IU(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new uo(e,n,r)),this}setDocAttribute(e,n){return this.step(new Ba(e,n)),this}addNodeMark(e,n){return this.step(new Qr(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof we)n.isInSet(r.marks)&&this.step(new ms(e,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new ms(e,s)),i=s.removeFromSet(i);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(e,n=1,r){return LU(this,e,n,r),this}addMark(e,n,r){return TU(this,e,n,r),this}removeMark(e,n,r){return MU(this,e,n,r),this}clearIncompatible(e,n,r){return uv(this,e,n,r),this}}const Pp=Object.create(null);class le{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new qU(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=K.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:a,$to:c}=o[l],u=e.mapping.slice(s);e.replaceRange(u.map(a.pos),u.map(c.pos),l?K.empty:n),l==0&&tk(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],a=e.mapping.slice(r),c=a.map(o.pos),u=a.map(l.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),tk(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new ie(e):Os(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?Os(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):Os(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Jt(e.node(0))}static atStart(e){return Os(e,e,0,0,1)||new Jt(e)}static atEnd(e){return Os(e,e,e.content.size,e.childCount,-1)||new Jt(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Pp[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Pp)throw new RangeError("Duplicate use of selection JSON ID "+e);return Pp[e]=n,n.prototype.jsonID=e,n}getBookmark(){return ie.between(this.$anchor,this.$head).getBookmark()}}le.prototype.visible=!0;class qU{constructor(e,n){this.$from=e,this.$to=n}}let ZS=!1;function ek(t){!ZS&&!t.parent.inlineContent&&(ZS=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class ie extends le{constructor(e,n=e){ek(e),ek(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return le.near(r);let i=e.resolve(n.map(this.anchor));return new ie(i.parent.inlineContent?i:r,r)}replace(e,n=K.empty){if(super.replace(e,n),n==K.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ie&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new eh(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ie(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=le.findFrom(n,r,!0)||le.findFrom(n,-r,!0);if(s)n=s.$head;else return le.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(le.findFrom(e,-r,!0)||le.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new ie(e,n)}}le.jsonID("text",ie);class eh{constructor(e,n){this.anchor=e,this.head=n}map(e){return new eh(e.map(this.anchor),e.map(this.head))}resolve(e){return ie.between(e.resolve(this.anchor),e.resolve(this.head))}}class Z extends le{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?le.near(s):new Z(s)}content(){return new K(F.from(this.node),0,0)}eq(e){return e instanceof Z&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new dv(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Z(e.resolve(n.anchor))}static create(e,n){return new Z(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Z.prototype.visible=!1;le.jsonID("node",Z);class dv{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new eh(r,r):new dv(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Z.isSelectable(r)?new Z(n):le.near(n)}}class Jt extends le{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=K.empty){if(n==K.empty){e.delete(0,e.doc.content.size);let r=le.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Jt(e)}map(e){return new Jt(e)}eq(e){return e instanceof Jt}getBookmark(){return YU}}le.jsonID("all",Jt);const YU={map(){return this},resolve(t){return new Jt(t)}};function Os(t,e,n,r,i,s=!1){if(e.inlineContent)return ie.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let l=e.child(o);if(l.isAtom){if(!s&&Z.isSelectable(l))return Z.create(t,n-(i<0?l.nodeSize:0))}else{let a=Os(t,l,n+i,i<0?l.childCount:0,i,s);if(a)return a}n+=l.nodeSize*i}return null}function tk(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Ge||i instanceof et))return;let s=t.mapping.maps[r],o;s.forEach((l,a,c,u)=>{o==null&&(o=u)}),t.setSelection(le.near(t.doc.resolve(o),n))}const nk=1,ou=2,rk=4;let XU=class extends KU{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|nk)&~ou,this.storedMarks=null,this}get selectionSet(){return(this.updated&nk)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=ou,this}ensureMarks(e){return we.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&ou)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~ou,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||we.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(le.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=rk,this}get scrolledIntoView(){return(this.updated&rk)>0}};function ik(t,e){return!e||!t?t:t.bind(e)}class Ll{constructor(e,n,r){this.name=e,this.init=ik(n.init,r),this.apply=ik(n.apply,r)}}const GU=[new Ll("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Ll("selection",{init(t,e){return t.selection||le.atStart(e.doc)},apply(t){return t.selection}}),new Ll("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Ll("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Rp{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=GU.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Ll(r.key,r.spec.state,r))})}}class eo{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let a=i?i[o].n:0,c=i?i[o].state:this,u=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let f=0;f<this.config.plugins.length;f++)i.push(f<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new eo(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new XU(this)}static create(e){let n=new Rp(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new eo(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Rp(this.schema,e.plugins),r=n.fields,i=new eo(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Rp(e.schema,e.plugins),s=new eo(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=fi.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=le.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],c=a.spec.state;if(a.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[o.name]=c.fromJSON.call(a,e,n[l],s);return}}s[o.name]=o.init(e,s)}}),s}}function Q_(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Q_(i,e,{})),n[r]=i}return n}class Rt{constructor(e){this.spec=e,this.props={},e.props&&Q_(e.props,this,this.props),this.key=e.key?e.key.key:Z_("plugin")}getState(e){return e[this.key]}}const Ip=Object.create(null);function Z_(t){return t in Ip?t+"$"+ ++Ip[t]:(Ip[t]=0,t+"$")}class Bn{constructor(e="key"){this.key=Z_(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const at=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Bo=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Hg=null;const dr=function(t,e,n){let r=Hg||(Hg=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},JU=function(){Hg=null},gs=function(t,e,n,r){return n&&(sk(t,e,n,r,-1)||sk(t,e,n,r,1))},QU=/^(img|br|input|textarea|hr)$/i;function sk(t,e,n,r,i){for(var s;;){if(t==n&&e==r)return!0;if(e==(i<0?0:fn(t))){let o=t.parentNode;if(!o||o.nodeType!=1||gc(t)||QU.test(t.nodeName)||t.contentEditable=="false")return!1;e=at(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?fn(t):0}else return!1}}function fn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ZU(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=fn(t)}else if(t.parentNode&&!gc(t))e=at(t),t=t.parentNode;else return null}}function e6(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!gc(t))e=at(t)+1,t=t.parentNode;else return null}}function t6(t,e,n){for(let r=e==0,i=e==fn(t);r||i;){if(t==n)return!0;let s=at(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==fn(t)}}function gc(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const th=function(t){return t.focusNode&&gs(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Vi(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function n6(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function r6(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(fn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(fn(r.startContainer),r.startOffset)}}}const er=typeof navigator<"u"?navigator:null,ok=typeof document<"u"?document:null,Mi=er&&er.userAgent||"",Ug=/Edge\/(\d+)/.exec(Mi),eA=/MSIE \d/.exec(Mi),Wg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Mi),Ft=!!(eA||Wg||Ug),di=eA?document.documentMode:Wg?+Wg[1]:Ug?+Ug[1]:0,mn=!Ft&&/gecko\/(\d+)/i.test(Mi);mn&&+(/Firefox\/(\d+)/.exec(Mi)||[0,0])[1];const Kg=!Ft&&/Chrome\/(\d+)/.exec(Mi),Je=!!Kg,tA=Kg?+Kg[1]:0,kt=!Ft&&!!er&&/Apple Computer/.test(er.vendor),zo=kt&&(/Mobile\/\w+/.test(Mi)||!!er&&er.maxTouchPoints>2),ln=zo||(er?/Mac/.test(er.platform):!1),nA=er?/Win/.test(er.platform):!1,yr=/Android \d/.test(Mi),yc=!!ok&&"webkitFontSmoothing"in ok.documentElement.style,i6=yc?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function s6(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function cr(t,e){return typeof t=="number"?t:t[e]}function o6(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function lk(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=Bo(o);continue}let l=o,a=l==s.body,c=a?s6(s):o6(l),u=0,f=0;if(e.top<c.top+cr(r,"top")?f=-(c.top-e.top+cr(i,"top")):e.bottom>c.bottom-cr(r,"bottom")&&(f=e.bottom-e.top>c.bottom-c.top?e.top+cr(i,"top")-c.top:e.bottom-c.bottom+cr(i,"bottom")),e.left<c.left+cr(r,"left")?u=-(c.left-e.left+cr(i,"left")):e.right>c.right-cr(r,"right")&&(u=e.right-c.right+cr(i,"right")),u||f)if(a)s.defaultView.scrollBy(u,f);else{let h=l.scrollLeft,p=l.scrollTop;f&&(l.scrollTop+=f),u&&(l.scrollLeft+=u);let m=l.scrollLeft-h,v=l.scrollTop-p;e={left:e.left-m,top:e.top-v,right:e.right-m,bottom:e.bottom-v}}let d=a?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(d))break;o=d=="absolute"?o.offsetParent:Bo(o)}}function l6(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let l=t.root.elementFromPoint(s,o);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:rA(t.dom)}}function rA(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Bo(r));return e}function a6({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;iA(n,r==0?0:r-e)}function iA(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let _s=null;function c6(t){if(t.setActive)return t.setActive();if(_s)return t.focus(_s);let e=rA(t);t.focus(_s==null?{get preventScroll(){return _s={preventScroll:!0},!0}}:void 0),_s||(_s=!1,iA(e,0))}function sA(t,e){let n,r=2e8,i,s=0,o=e.top,l=e.top,a,c;for(let u=t.firstChild,f=0;u;u=u.nextSibling,f++){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=dr(u).getClientRects();else continue;for(let h=0;h<d.length;h++){let p=d[h];if(p.top<=o&&p.bottom>=l){o=Math.max(p.bottom,o),l=Math.min(p.top,l);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){n=u,r=m,i=m&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&m&&(s=f+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!a&&p.left<=e.left&&p.right>=e.left&&(a=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=f+1)}}return!n&&a&&(n=a,i=c,r=0),n&&n.nodeType==3?u6(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:sA(n,i)}function u6(t,e){let n=t.nodeValue.length,r=document.createRange(),i;for(let s=0;s<n;s++){r.setEnd(t,s+1),r.setStart(t,s);let o=$r(r,1);if(o.top!=o.bottom&&hv(e,o)){i={node:t,offset:s+(e.left>=(o.left+o.right)/2?1:0)};break}}return r.detach(),i||{node:t,offset:0}}function hv(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function f6(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function d6(t,e,n){let{node:r,offset:i}=sA(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function h6(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let l=t.docView.nearestDesc(s,!0),a;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((a=l.dom.getBoundingClientRect()).width||a.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&a.left>r.left||a.top>r.top?i=l.posBefore:(!o&&a.right<r.left||a.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function oA(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let a=0;a<l.length;a++){let c=l[a];if(hv(e,c))return oA(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function p6(t,e){let n=t.dom.ownerDocument,r,i=0,s=r6(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!hv(e,c)||(o=oA(t.dom,e,c),!o))return null}if(kt)for(let c=o;r&&c;c=Bo(c))c.draggable&&(r=void 0);if(o=f6(o,e),r){if(mn&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],f;u.nodeName=="IMG"&&(f=u.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}let c;yc&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=h6(t,r,i,e))}l==null&&(l=d6(t,o,e));let a=t.docView.nearestDesc(o,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function ak(t){return t.top<t.bottom||t.left<t.right}function $r(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(ak(r))return r}return Array.prototype.find.call(n,ak)||t.getBoundingClientRect()}const m6=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function lA(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=yc||mn;if(r.nodeType==3)if(o&&(m6.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let a=$r(dr(r,i,i),n);if(mn&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=$r(dr(r,i-1,i-1),-1);if(c.top==a.top){let u=$r(dr(r,i,i+1),-1);if(u.top!=a.top)return kl(u,u.left<c.left)}}return a}else{let a=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(a--,u=1):n<0?a--:c++,kl($r(dr(r,a,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==fn(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return Lp(a.getBoundingClientRect(),!1)}if(s==null&&i<fn(r)){let a=r.childNodes[i];if(a.nodeType==1)return Lp(a.getBoundingClientRect(),!0)}return Lp(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==fn(r))){let a=r.childNodes[i-1],c=a.nodeType==3?dr(a,fn(a)-(o?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(c)return kl($r(c,1),!1)}if(s==null&&i<fn(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let c=a?a.nodeType==3?dr(a,0,o?0:1):a.nodeType==1?a:null:null;if(c)return kl($r(c,-1),!0)}return kl($r(r.nodeType==3?dr(r):r,-n),n>=0)}function kl(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Lp(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function aA(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function g6(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return aA(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=lA(t,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=dr(l,0,l.nodeValue.length).getClientRects();else continue;for(let c=0;c<a.length;c++){let u=a[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const y6=/[\u0590-\u08ac]/;function v6(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=t.domSelection();return l?!y6.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:o:aA(t,e,()=>{let{focusNode:a,focusOffset:c,anchorNode:u,anchorOffset:f}=t.domSelectionRange(),d=l.caretBidiLevel;l.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:m}=t.domSelectionRange(),v=p&&!h.contains(p.nodeType==1?p:p.parentNode)||a==p&&c==m;try{l.collapse(u,f),a&&(a!=u||c!=f)&&l.extend&&l.extend(a,c)}catch{}return d!=null&&(l.caretBidiLevel=d),v}):r.pos==r.start()||r.pos==r.end()}let ck=null,uk=null,fk=!1;function w6(t,e,n){return ck==e&&uk==n?fk:(ck=e,uk=n,fk=n=="up"||n=="down"?g6(t,e,n):v6(t,e,n))}const gn=0,dk=1,Ui=2,tr=3;class vc{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=gn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>at(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let l=i.children[o];if(l.size){i=l;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>e||o instanceof uA){i=e-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof cA&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?at(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?at(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let a=this.children[l],c=o+a.size;if(i==-1&&e<=c){let u=o+a.border;if(e>=u&&n<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,u);e=o;for(let f=l;f>0;f--){let d=this.children[f-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=at(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(c>n||l==this.children.length-1)){n=c;for(let u=l+1;u<this.children.length;u++){let f=this.children[u];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){s=at(f.dom);break}n+=f.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let h=0,p=0;h<this.children.length;h++){let m=this.children[h],v=p+m.size;if(s>p&&o<v)return m.setSelection(e-p-m.border,n-p-m.border,r,i);p=v}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),f=!1;if((mn||kt)&&e==n){let{node:h,offset:p}=l;if(h.nodeType==3){if(f=!!(p&&h.nodeValue[p-1]==`
`),f&&p==h.nodeValue.length)for(let m=h,v;m;m=m.parentNode){if(v=m.nextSibling){v.nodeName=="BR"&&(l=a={node:v.parentNode,offset:at(v)+1});break}let g=m.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let m=h.childNodes[p-1];f=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(mn&&u.focusNode&&u.focusNode!=a.node&&u.focusNode.nodeType==1){let h=u.focusNode.childNodes[u.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||f&&kt)&&gs(l.node,l.offset,u.anchorNode,u.anchorOffset)&&gs(a.node,a.offset,u.focusNode,u.focusOffset))return;let d=!1;if((c.extend||e==n)&&!(f&&mn)){c.collapse(l.node,l.offset);try{e!=n&&c.extend(a.node,a.offset),d=!0}catch{}}if(!d){if(e>n){let p=l;l=a,a=p}let h=document.createRange();h.setEnd(a.node,a.offset),h.setStart(l.node,l.offset),c.removeAllRanges(),c.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let l=r+s.border,a=o-s.border;if(e>=l&&n<=a){this.dirty=e==r||n==o?Ui:dk,e==l&&n==a&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=tr:s.markDirty(e-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Ui:tr}r=o}this.dirty=Ui}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Ui:dk;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class cA extends vc{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==gn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class x6 extends vc{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ys extends vc{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=Es.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new ys(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&tr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=tr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=gn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=gn}}slice(e,n,r){let i=ys.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=Yg(s,n,o,r)),e>0&&(s=Yg(s,0,e,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class hi extends vc{constructor(e,n,r,i,s,o,l,a,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,s,o){let l=s.nodeViews[n.type.name],a,c=l&&l(n,s,()=>{if(!a)return o;if(a.parent)return a.parent.posBeforeChild(a)},r,i),u=c&&c.dom,f=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:f}=Es.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let d=u;return u=hA(u,r,n),c?a=new S6(e,n,r,i,u,f||null,d,c,s,o+1):n.isText?new nh(e,n,r,i,u,d,s):new hi(e,n,r,i,u,f||null,d,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>F.empty)}return e}matchesNode(e,n,r){return this.dirty==gn&&e.eq(this.node)&&Uf(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,a=new C6(this,o&&o.node,e);T6(this.node,this.innerDeco,(c,u,f)=>{c.spec.marks?a.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!f&&a.syncToMarks(u==this.node.childCount?we.none:this.node.child(u).marks,r,e),a.placeWidget(c,e,i)},(c,u,f,d)=>{a.syncToMarks(c.marks,r,e);let h;a.findNodeMatch(c,u,f,d)||l&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(h=a.findIndexWithChild(s.node))>-1&&a.updateNodeAt(c,u,f,h,e)||a.updateNextNode(c,u,f,e,d,i)||a.addNode(c,u,f,e,i),i+=c.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Ui)&&(o&&this.protectLocalComposition(e,o),fA(this.contentDOM,this.children,e),zo&&M6(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof ie)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=N6(this.node.content,o,r-n,i-n);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new x6(this,s,n,i);e.input.compositionNodes.push(o),this.children=Yg(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==tr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=gn}updateOuterDeco(e){if(Uf(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=dA(this.dom,this.nodeDOM,qg(this.outerDeco,this.node,n),qg(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function hk(t,e,n,r,i){hA(r,e,t);let s=new hi(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class nh extends hi{constructor(e,n,r,i,s,o,l){super(e,n,r,i,s,null,o,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==tr||this.dirty!=gn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=gn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=gn,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new nh(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=tr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class uA extends vc{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==gn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class S6 extends hi{constructor(e,n,r,i,s,o,l,a,c,u){super(e,n,r,i,s,o,l,c,u),this.spec=a}update(e,n,r,i){if(this.dirty==tr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function fA(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],l=o.dom;if(l.parentNode==t){for(;l!=r;)r=pk(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(o instanceof ys){let a=r?r.previousSibling:t.lastChild;fA(o.contentDOM,o.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=pk(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const ta=function(t){t&&(this.nodeName=t)};ta.prototype=Object.create(null);const Wi=[new ta];function qg(t,e,n){if(t.length==0)return Wi;let r=n?Wi[0]:new ta,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new ta(o.nodeName));for(let l in o){let a=o[l];a!=null&&(n&&i.length==1&&i.push(r=new ta(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function dA(t,e,n,r){if(n==Wi&&r==Wi)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],l=n[s];if(s){let a;l&&l.nodeName==o.nodeName&&i!=t&&(a=i.parentNode)&&a.nodeName.toLowerCase()==o.nodeName||(a=document.createElement(o.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=Wi[0]),i=a}k6(i,l||Wi[0],o)}return i}function k6(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function hA(t,e,n){return dA(t,t,Wi,qg(e,n,t.nodeType!=1))}function Uf(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function pk(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class C6{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=E6(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=gn,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let c=this.top.children[a];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=ys.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let c=this.top.children[l];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==tr&&o.dom==o.contentDOM&&(o.dirty=Ui),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof hi){let c=this.preMatch.matched.get(a);if(c!=null&&c!=s)return!1;let u=a.dom,f,d=this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=tr&&Uf(n,a.outerDeco));if(!d&&a.update(e,n,r,i))return this.destroyBetween(this.index,l),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(f=this.recreateWrapper(a,e,n,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=Ui,f.updateChildren(i,o+1),f.dirty=gn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Uf(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=hi.create(this.top,n,r,i,s,o);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,i,s){let o=hi.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new cA(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof ys;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof nh)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((kt||Je)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new uA(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function E6(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let c=n.children[r-1];if(c instanceof ys)n=c,r=c.children.length;else{l=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function b6(t,e){return t.type.side-e.type.side}function T6(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,l=[],a=null;for(let c=0;;){let u,f;for(;o<i.length&&i[o].to==s;){let v=i[o++];v.widget&&(u?(f||(f=[u])).push(v):u=v)}if(u)if(f){f.sort(b6);for(let v=0;v<f.length;v++)n(f[v],c,!!a)}else n(u,c,!!a);let d,h;if(a)h=-1,d=a,a=null;else if(c<t.childCount)h=c,d=t.child(c++);else break;for(let v=0;v<l.length;v++)l[v].to<=s&&l.splice(v--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let p=s+d.nodeSize;if(d.isText){let v=p;o<i.length&&i[o].from<v&&(v=i[o].from);for(let g=0;g<l.length;g++)l[g].to<v&&(v=l[g].to);v<p&&(a=d.cut(v-s),d=d.cut(0,v-s),p=v,h=-1)}else for(;o<i.length&&i[o].to<p;)o++;let m=d.isInline&&!d.isLeaf?l.filter(v=>!v.inline):l.slice();r(d,m,e.forChild(s,d),h),s=p}}function M6(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function N6(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let a=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;a+=c.text}if(s>=n){if(s>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let c=l<r?a.lastIndexOf(e,r-l-1):-1;if(c>=0&&c+e.length+l>=n)return l+c;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function Yg(t,e,n,r,i){let s=[];for(let o=0,l=0;o<t.length;o++){let a=t[o],c=l,u=l+=a.size;c>=n||u<=e?s.push(a):(c<e&&s.push(a.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(a.slice(n-c,a.size,r)))}return s}function pv(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),a,c;if(th(n)){for(a=o;i&&!i.node;)i=i.parent;let f=i.node;if(i&&f.isAtom&&Z.isSelectable(f)&&i.parent&&!(f.isInline&&t6(n.focusNode,n.focusOffset,i.dom))){let d=i.posBefore;c=new Z(o==d?l:r.resolve(d))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=o,d=o;for(let h=0;h<n.rangeCount;h++){let p=n.getRangeAt(h);f=Math.min(f,t.docView.posFromDOM(p.startContainer,p.startOffset,1)),d=Math.max(d,t.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(f<0)return null;[a,o]=d==t.state.selection.anchor?[d,f]:[f,d],l=r.resolve(o)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let u=r.resolve(a);if(!c){let f=e=="pointer"||t.state.selection.head<l.pos&&!s?1:-1;c=mv(t,u,l,f)}return c}function pA(t){return t.editable?t.hasFocus():gA(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function kr(t,e=!1){let n=t.state.selection;if(mA(t,n),!!pA(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Je){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&gs(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)A6(t);else{let{anchor:r,head:i}=n,s,o;mk&&!(n instanceof ie)&&(n.$from.parent.inlineContent||(s=gk(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=gk(t,n.to))),t.docView.setSelection(r,i,t,e),mk&&(s&&yk(s),o&&yk(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&_6(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const mk=kt||Je&&tA<63;function gk(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(kt&&i&&i.contentEditable=="false")return Vp(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Vp(i);if(s)return Vp(s)}}function Vp(t){return t.contentEditable="true",kt&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function yk(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function _6(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!pA(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function A6(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,at(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Ft&&di<=11&&(n.disabled=!0,n.disabled=!1)}function mA(t,e){if(e instanceof Z){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(vk(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else vk(t)}function vk(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function mv(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||ie.between(e,n,r)}function wk(t){return t.editable&&!t.hasFocus()?!1:gA(t)}function gA(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function D6(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return gs(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Xg(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&le.findFrom(s,e)}function Hr(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function xk(t,e,n){let r=t.state.selection;if(r instanceof ie)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Hr(t,new ie(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Xg(t.state,e);return i&&i instanceof Z?Hr(t,i):!1}else if(!(ln&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(l))&&!o.contentDOM?Z.isSelectable(s)?Hr(t,new Z(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):yc?Hr(t,new ie(t.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Z&&r.node.isInline)return Hr(t,new ie(e>0?r.$to:r.$from));{let i=Xg(t.state,e);return i?Hr(t,i):!1}}}function Wf(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function na(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function As(t,e){return e<0?O6(t):P6(t)}function O6(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(mn&&n.nodeType==1&&r<Wf(n)&&na(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(na(l,-1))i=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(yA(n))break;{let l=n.previousSibling;for(;l&&na(l,-1);)i=n.parentNode,s=at(l),l=l.previousSibling;if(l)n=l,r=Wf(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?Gg(t,n,r):i&&Gg(t,i,s)}function P6(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Wf(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(na(l,1))s=n,o=++r;else break}else{if(yA(n))break;{let l=n.nextSibling;for(;l&&na(l,1);)s=l.parentNode,o=at(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=Wf(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&Gg(t,s,o)}function yA(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function R6(t,e){for(;t&&e==t.childNodes.length&&!gc(t);)e=at(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function I6(t,e){for(;t&&!e&&!gc(t);)e=at(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Gg(t,e,n){if(e.nodeType!=3){let s,o;(o=R6(e,n))?(e=o,n=0):(s=I6(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(th(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&kr(t)},50)}function Sk(t,e){let n=t.state.doc.resolve(e);if(!(Je||nA)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function kk(t,e,n){let r=t.state.selection;if(r instanceof ie&&!r.empty||n.indexOf("s")>-1||ln&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=Xg(t.state,e);if(o&&o instanceof Z)return Hr(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,l=r instanceof Jt?le.near(o,e):le.findFrom(o,e);return l?Hr(t,l):!1}return!1}function Ck(t,e){if(!(t.state.selection instanceof ie))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function Ek(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function L6(t){if(!kt||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Ek(t,r,"true"),setTimeout(()=>Ek(t,r,"false"),20)}return!1}function V6(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function B6(t,e){let n=e.keyCode,r=V6(e);if(n==8||ln&&n==72&&r=="c")return Ck(t,-1)||As(t,-1);if(n==46&&!e.shiftKey||ln&&n==68&&r=="c")return Ck(t,1)||As(t,1);if(n==13||n==27)return!0;if(n==37||ln&&n==66&&r=="c"){let i=n==37?Sk(t,t.state.selection.from)=="ltr"?-1:1:-1;return xk(t,i,r)||As(t,i)}else if(n==39||ln&&n==70&&r=="c"){let i=n==39?Sk(t,t.state.selection.from)=="ltr"?1:-1:1;return xk(t,i,r)||As(t,i)}else{if(n==38||ln&&n==80&&r=="c")return kk(t,-1,r)||As(t,-1);if(n==40||ln&&n==78&&r=="c")return L6(t)||kk(t,1,r)||As(t,1);if(r==(ln?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function gv(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=t.someProp("clipboardSerializer")||Es.fromSchema(t.state.schema),l=CA(),a=l.createElement("div");a.appendChild(o.serializeFragment(r,{document:l}));let c=a.firstChild,u,f=0;for(;c&&c.nodeType==1&&(u=kA[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let p=l.createElement(u[h]);for(;a.firstChild;)p.appendChild(a.firstChild);a.appendChild(p),f++}c=a.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${f?` -${f}`:""} ${JSON.stringify(n)}`);let d=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:d,slice:e}}function vA(t,e,n,r,i){let s=i.parent.type.spec.code,o,l;if(!n&&!e)return null;let a=!!e&&(r||s||!n);if(a){if(t.someProp("transformPastedText",d=>{e=d(e,s||r,t)}),s)return l=new K(F.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",d=>{l=d(l,t,!0)}),l;let f=t.someProp("clipboardTextParser",d=>d(e,i,r,t));if(f)l=f;else{let d=i.marks(),{schema:h}=t.state,p=Es.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let v=o.appendChild(document.createElement("p"));m&&v.appendChild(p.serializeNode(h.text(m,d)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n,t)}),o=j6(n),yc&&H6(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let f=+u[3];f>0;f--){let d=o.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;o=d}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||Zl.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(a||u),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!z6.test(d.parentNode.nodeName)?{ignore:!0}:null}})),u)l=U6(bk(l,+u[1],+u[2]),u[4]);else if(l=K.maxOpen($6(l.content,i),!0),l.openStart||l.openEnd){let f=0,d=0;for(let h=l.content.firstChild;f<l.openStart&&!h.type.spec.isolating;f++,h=h.firstChild);for(let h=l.content.lastChild;d<l.openEnd&&!h.type.spec.isolating;d++,h=h.lastChild);l=bk(l,f,d)}return t.someProp("transformPasted",f=>{l=f(l,t,a)}),l}const z6=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function $6(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(l=>{if(!o)return;let a=i.findWrapping(l.type),c;if(!a)return o=null;if(c=o.length&&s.length&&xA(a,s,l,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=SA(o[o.length-1],s.length));let u=wA(l,a);o.push(u),i=i.matchType(u.type),s=a}}),o)return F.from(o)}return t}function wA(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,F.from(t));return t}function xA(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=xA(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(F.from(wA(n,t,i+1))))}}function SA(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,SA(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(F.empty,!0);return t.copy(n.append(r))}function Jg(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,l=o.content;return t.childCount>1&&(s=0),i<r-1&&(l=Jg(l,e,n,r,i+1,s)),i>=n&&(l=e<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(F.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(l))}function bk(t,e,n){return e<t.openStart&&(t=new K(Jg(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new K(Jg(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const kA={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Tk=null;function CA(){return Tk||(Tk=document.implementation.createHTMLDocument("title"))}let Bp=null;function F6(t){let e=window.trustedTypes;return e?(Bp||(Bp=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Bp.createHTML(t)):t}function j6(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=CA().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&kA[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=F6(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function H6(t){let e=t.querySelectorAll(Je?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function U6(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=F.from(a.create(r[l+1],i)),s++,o++}return new K(i,s,o)}const _t={},At={},W6={touchstart:!0,touchmove:!0};class K6{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function q6(t){for(let e in _t){let n=_t[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{X6(t,r)&&!yv(t,r)&&(t.editable||!(r.type in At))&&n(t,r)},W6[e]?{passive:!0}:void 0)}kt&&t.dom.addEventListener("input",()=>null),Qg(t)}function Zr(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Y6(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Qg(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>yv(t,r))})}function yv(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function X6(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function G6(t,e){!yv(t,e)&&_t[e.type]&&(t.editable||!(e.type in At))&&_t[e.type](t,e)}At.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!bA(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(yr&&Je&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),zo&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Vi(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||B6(t,n)?n.preventDefault():Zr(t,"key")};At.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};At.keypress=(t,e)=>{let n=e;if(bA(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||ln&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof ie)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i,s))&&t.dispatch(s()),n.preventDefault()}};function rh(t){return{left:t.clientX,top:t.clientY}}function J6(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function vv(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,l=>o>s.depth?l(t,n,s.nodeAfter,s.before(o),i,!0):l(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function fo(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function Q6(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Z.isSelectable(r)?(fo(t,new Z(n)),!0):!1}function Z6(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof Z&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(Z.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(fo(t,Z.create(t.state.doc,i)),!0):!1}function eW(t,e,n,r,i){return vv(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?Z6(t,n):Q6(t,n))}function tW(t,e,n,r){return vv(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function nW(t,e,n,r){return vv(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||rW(t,n,r)}function rW(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(fo(t,ie.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)fo(t,ie.create(r,l+1,l+1+o.content.size));else if(Z.isSelectable(o))fo(t,Z.create(r,l));else continue;return!0}}function wv(t){return Kf(t)}const EA=ln?"metaKey":"ctrlKey";_t.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=wv(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&J6(n,t.input.lastClick)&&!n[EA]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=t.posAtCoords(rh(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new iW(t,o,n,!!r)):(s=="doubleClick"?tW:nW)(t,o.pos,o.inside,n)?n.preventDefault():Zr(t,"pointer"))};class iW{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[EA],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.nodeDOM.nodeType==1?a.nodeDOM:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof Z&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&mn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Zr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>kr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(rh(e))),this.updateAllowDefault(e),this.allowDefault||!n?Zr(this.view,"pointer"):eW(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||kt&&this.mightDrag&&!this.mightDrag.node.isAtom||Je&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(fo(this.view,le.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Zr(this.view,"pointer")}move(e){this.updateAllowDefault(e),Zr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}_t.touchstart=t=>{t.input.lastTouch=Date.now(),wv(t),Zr(t,"pointer")};_t.touchmove=t=>{t.input.lastTouch=Date.now(),Zr(t,"pointer")};_t.contextmenu=t=>wv(t);function bA(t,e){return t.composing?!0:kt&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const sW=yr?5e3:-1;At.compositionstart=At.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof ie&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||Je&&nA&&oW(t)))t.markCursor=t.state.storedMarks||n.marks(),Kf(t,!0),t.markCursor=null;else if(Kf(t,!e.selection.empty),mn&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=t.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}TA(t,sW)};function oW(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}At.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,TA(t,20))};function TA(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Kf(t),e))}function MA(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=aW());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function lW(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=ZU(e.focusNode,e.focusOffset),r=e6(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function aW(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Kf(t,e=!1){if(!(yr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),MA(t),e||t.docView&&t.docView.dirty){let n=pv(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function cW(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const za=Ft&&di<15||zo&&i6<604;_t.copy=At.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=za?null:n.clipboardData,o=r.content(),{dom:l,text:a}=gv(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",a)):cW(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function uW(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function fW(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?$a(t,r.value,null,i,e):$a(t,r.textContent,r.innerHTML,i,e)},50)}function $a(t,e,n,r,i){let s=vA(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,i,s||K.empty)))return!0;if(!s)return!1;let o=uW(s),l=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function NA(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}At.paste=(t,e)=>{let n=e;if(t.composing&&!yr)return;let r=za?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&$a(t,NA(r),r.getData("text/html"),i,n)?n.preventDefault():fW(t,n)};class _A{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const dW=ln?"altKey":"ctrlKey";function AA(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[dW]}_t.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(rh(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Z?i.to-1:i.to))){if(r&&r.mightDrag)o=Z.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=t.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(o=Z.create(t.state.doc,f.posBefore))}}let l=(o||t.state.selection).content(),{dom:a,text:c,slice:u}=gv(t,l);(!n.dataTransfer.files.length||!Je||tA>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(za?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",za||n.dataTransfer.setData("text/plain",c),t.dragging=new _A(u,AA(t,n),o)};_t.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};At.dragover=At.dragenter=(t,e)=>e.preventDefault();At.drop=(t,e)=>{try{hW(t,e,t.dragging)}finally{t.dragging=null}};function hW(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(rh(e));if(!r)return;let i=t.state.doc.resolve(r.pos),s=n&&n.slice;s?t.someProp("transformPasted",h=>{s=h(s,t,!1)}):s=vA(t,NA(e.dataTransfer),za?null:e.dataTransfer.getData("text/html"),!1,i);let o=!!(n&&AA(t,e));if(t.someProp("handleDrop",h=>h(t,e,s||K.empty,o))){e.preventDefault();return}if(!s)return;e.preventDefault();let l=s?q_(t.state.doc,i.pos,s):i.pos;l==null&&(l=i.pos);let a=t.state.tr;if(o){let{node:h}=n;h?h.replace(a):a.deleteSelection()}let c=a.mapping.map(l),u=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,f=a.doc;if(u?a.replaceRangeWith(c,c,s.content.firstChild):a.replaceRange(c,c,s),a.doc.eq(f))return;let d=a.doc.resolve(c);if(u&&Z.isSelectable(s.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(s.content.firstChild))a.setSelection(new Z(d));else{let h=a.mapping.map(l);a.mapping.maps[a.mapping.maps.length-1].forEach((p,m,v,g)=>h=g),a.setSelection(mv(t,d,a.doc.resolve(h)))}t.focus(),t.dispatch(a.setMeta("uiEvent","drop"))}_t.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&kr(t)},20))};_t.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};_t.beforeinput=(t,e)=>{if(Je&&yr&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Vi(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in At)_t[t]=At[t];function Fa(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class qf{constructor(e,n){this.toDOM=e,this.spec=n||es,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new Yt(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof qf&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Fa(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class pi{constructor(e,n){this.attrs=e,this.spec=n||es}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new Yt(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof pi&&Fa(this.attrs,e.attrs)&&Fa(this.spec,e.spec)}static is(e){return e.type instanceof pi}destroy(){}}class xv{constructor(e,n){this.attrs=e,this.spec=n||es}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Yt(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof xv&&Fa(this.attrs,e.attrs)&&Fa(this.spec,e.spec)}destroy(){}}class Yt{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Yt(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Yt(e,e,new qf(n,r))}static inline(e,n,r,i){return new Yt(e,n,new pi(r,i))}static node(e,n,r,i){return new Yt(e,n,new xv(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof pi}get widget(){return this.type instanceof qf}}const Ps=[],es={};class Be{constructor(e,n){this.local=e.length?e:Ps,this.children=n.length?n:Ps}static create(e,n){return n.length?Yf(n,e,0,es):yt}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=e&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,n-l,r,i+l,s)}}map(e,n,r){return this==yt||e.maps.length==0?this:this.mapInner(e,n,0,0,r||es)}mapInner(e,n,r,i,s){let o;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(n,a)?(o||(o=[])).push(a):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?pW(this.children,o||[],e,n,r,i,s):o?new Be(o.sort(ts),Ps):yt}add(e,n){return n.length?this==yt?Be.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((l,a)=>{let c=a+r,u;if(u=OA(n,l,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<a;)s+=3;i[s]==a?i[s+2]=i[s+2].addInner(l,u,c+1):i.splice(s,0,a,a+l.nodeSize,Yf(u,l,c+1,es)),s+=3}});let o=DA(s?PA(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new Be(o.length?this.local.concat(o).sort(ts):this.local,i||this.children)}remove(e){return e.length==0||this==yt?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+n,a=r[s+1]+n;for(let u=0,f;u<e.length;u++)(f=e[u])&&f.from>l&&f.to<a&&(e[u]=null,(o||(o=[])).push(f));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,l+1);c!=yt?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let l=0;l<i.length;l++)i[l].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Be(i,r):yt}forChild(e,n){if(this==yt)return this;if(n.isLeaf)return Be.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let s=e+1,o=s+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<o&&a.to>s&&a.type instanceof pi){let c=Math.max(s,a.from)-s,u=Math.min(o,a.to)-s;c<u&&(i||(i=[])).push(a.copy(c,u))}}if(i){let l=new Be(i.sort(ts),Ps);return r?new Yr([l,r]):l}return r||yt}eq(e){if(this==e)return!0;if(!(e instanceof Be)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Sv(this.localsInner(e))}localsInner(e){if(this==yt)return Ps;if(e.inlineContent||!this.local.some(pi.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof pi||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Be.empty=new Be([],[]);Be.removeOverlap=Sv;const yt=Be.empty;class Yr{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,es));return Yr.from(r)}forChild(e,n){if(n.isLeaf)return Be.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=yt&&(s instanceof Yr?r=r.concat(s.members):r.push(s))}return Yr.from(r)}eq(e){if(!(e instanceof Yr)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?Sv(r?n:n.sort(ts)):Ps}static from(e){switch(e.length){case 0:return yt;case 1:return e[0];default:return new Yr(e.every(n=>n instanceof Be)?e:e.reduce((n,r)=>n.concat(r instanceof Be?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function pW(t,e,n,r,i,s,o){let l=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let f=0;n.maps[c].forEach((d,h,p,m)=>{let v=m-p-(h-d);for(let g=0;g<l.length;g+=3){let w=l[g+1];if(w<0||d>w+u-f)continue;let y=l[g]+u-f;h>=y?l[g+1]=d<=y?-2:-1:d>=u&&v&&(l[g]+=v,l[g+1]+=v)}f+=v}),u=n.maps[c].map(u,-1)}let a=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(l[c+1]==-2){a=!0,l[c+1]=-1;continue}let u=n.map(t[c]+s),f=u-i;if(f<0||f>=r.content.size){a=!0;continue}let d=n.map(t[c+1]+s,-1),h=d-i,{index:p,offset:m}=r.content.findIndex(f),v=r.maybeChild(p);if(v&&m==f&&m+v.nodeSize==h){let g=l[c+2].mapInner(n,v,u+1,t[c]+s+1,o);g!=yt?(l[c]=f,l[c+1]=h,l[c+2]=g):(l[c+1]=-2,a=!0)}else a=!0}if(a){let c=mW(l,t,e,n,i,s,o),u=Yf(c,r,0,o);e=u.local;for(let f=0;f<l.length;f+=3)l[f+1]<0&&(l.splice(f,3),f-=3);for(let f=0,d=0;f<u.children.length;f+=3){let h=u.children[f];for(;d<l.length&&l[d]<h;)d+=3;l.splice(d,0,u.children[f],u.children[f+1],u.children[f+2])}}return new Be(e.sort(ts),l)}function DA(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Yt(i.from+e,i.to+e,i.type))}return n}function mW(t,e,n,r,i,s,o){function l(a,c){for(let u=0;u<a.local.length;u++){let f=a.local[u].map(r,i,c);f?n.push(f):o.onRemove&&o.onRemove(a.local[u].spec)}for(let u=0;u<a.children.length;u+=3)l(a.children[u+2],a.children[u]+c+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+s+1);return n}function OA(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function PA(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Yf(t,e,n,r){let i=[],s=!1;e.forEach((l,a)=>{let c=OA(t,l,a+n);if(c){s=!0;let u=Yf(c,l,n+a+1,r);u!=yt&&i.push(a,a+l.nodeSize,u)}});let o=DA(s?PA(t):t,-n).sort(ts);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new Be(o,i):yt}function ts(t,e){return t.from-e.from||t.to-e.to}function Sv(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),Mk(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),Mk(e,i,r.copy(s.from,r.to)));break}}}return e}function Mk(t,e,n){for(;e<t.length&&ts(n,t[e])>0;)e++;t.splice(e,0,n)}function zp(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=yt&&e.push(r)}),t.cursorWrapper&&e.push(Be.create(t.state.doc,[t.cursorWrapper.deco])),Yr.from(e)}const gW={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},yW=Ft&&di<=11;class vW{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class wW{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new vW,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Ft&&di<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),yW&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,gW)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(wk(this.view)){if(this.suppressingSelectionUpdates)return kr(this.view);if(Ft&&di<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&gs(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Bo(s))n.add(s);for(let s=e.anchorNode;s;s=Bo(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&wk(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,a=[];if(e.editable)for(let u=0;u<n.length;u++){let f=this.registerMutation(n[u],a);f&&(s=s<0?f.from:Math.min(f.from,s),o=o<0?f.to:Math.max(f.to,o),f.typeOver&&(l=!0))}if(mn&&a.length){let u=a.filter(f=>f.nodeName=="BR");if(u.length==2){let[f,d]=u;f.parentNode&&f.parentNode.parentNode==d.parentNode?d.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let d of u){let h=d.parentNode;h&&h.nodeName=="LI"&&(!f||kW(e,f)!=h)&&d.remove()}}}else if((Je||kt)&&a.some(u=>u.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let u of a)if(u.nodeName=="BR"&&u.parentNode){let f=u.nextSibling;f&&f.nodeType==1&&f.contentEditable=="false"&&u.parentNode.removeChild(u)}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&th(r)&&(c=pv(e))&&c.eq(le.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,kr(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),xW(e)),this.handleDOMChange(s,o,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||kr(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let f=e.addedNodes[u];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Ft&&di<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:f,nextSibling:d}=e.addedNodes[u];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d)}let o=i&&i.parentNode==e.target?at(i)+1:0,l=r.localPosFromDOM(e.target,o,-1),a=s&&s.parentNode==e.target?at(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,a,1);return{from:l,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Nk=new WeakMap,_k=!1;function xW(t){if(!Nk.has(t)&&(Nk.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=mn,_k)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),_k=!0}}function Ak(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return gs(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function SW(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return Ak(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Ak(t,n):null}function kW(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function CW(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),c,u=a.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:a.anchorOffset}],th(a)||c.push({node:a.focusNode,offset:a.focusOffset})),Je&&t.input.lastKeyCode===8)for(let v=s;v>i;v--){let g=r.childNodes[v-1],w=g.pmViewDesc;if(g.nodeName=="BR"&&!w){s=v;break}if(!w||w.size)break}let f=t.state.doc,d=t.someProp("domParser")||Zl.fromSchema(t.state.schema),h=f.resolve(o),p=null,m=d.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:EW,context:h});if(c&&c[0].pos!=null){let v=c[0].pos,g=c[1]&&c[1].pos;g==null&&(g=v),p={anchor:v+o,head:g+o}}return{doc:m,sel:p,from:o,to:l}}function EW(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(kt&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||kt&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const bW=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function TW(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let k=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,E=pv(t,k);if(E&&!t.state.selection.eq(E)){if(Je&&yr&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",I=>I(t,Vi(13,"Enter"))))return;let N=t.state.tr.setSelection(E);k=="pointer"?N.setMeta("pointer",!0):k=="key"&&N.scrollIntoView(),s&&N.setMeta("composition",s),t.dispatch(N)}return}let o=t.state.doc.resolve(e),l=o.sharedDepth(n);e=o.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,c=CW(t,e,n),u=t.state.doc,f=u.slice(c.from,c.to),d,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(d=t.state.selection.to,h="end"):(d=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let p=_W(f.content,c.doc.content,c.from,d,h);if(p&&t.input.domChangeCount++,(zo&&t.input.lastIOSEnter>Date.now()-225||yr)&&i.some(k=>k.nodeType==1&&!bW.test(k.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",k=>k(t,Vi(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&a instanceof ie&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:a.from,endA:a.to,endB:a.to};else{if(c.sel){let k=Dk(t,t.state.doc,c.sel);if(k&&!k.eq(t.state.selection)){let E=t.state.tr.setSelection(k);s&&E.setMeta("composition",s),t.dispatch(E)}}return}t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof ie&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),Ft&&di<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let m=c.doc.resolveNoCache(p.start-c.from),v=c.doc.resolveNoCache(p.endB-c.from),g=u.resolve(p.start),w=m.sameParent(v)&&m.parent.inlineContent&&g.end()>=p.endA;if((zo&&t.input.lastIOSEnter>Date.now()-225&&(!w||i.some(k=>k.nodeName=="DIV"||k.nodeName=="P"))||!w&&m.pos<c.doc.content.size&&(!m.sameParent(v)||!m.parent.inlineContent)&&m.pos<v.pos&&!/\S/.test(c.doc.textBetween(m.pos,v.pos,"","")))&&t.someProp("handleKeyDown",k=>k(t,Vi(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&NW(u,p.start,p.endA,m,v)&&t.someProp("handleKeyDown",k=>k(t,Vi(8,"Backspace")))){yr&&Je&&t.domObserver.suppressSelectionUpdates();return}Je&&p.endB==p.start&&(t.input.lastChromeDelete=Date.now()),yr&&!w&&m.start()!=v.start()&&v.parentOffset==0&&m.depth==v.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,v=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(k){return k(t,Vi(13,"Enter"))})},20));let y=p.start,x=p.endA,S=k=>{let E=k||t.state.tr.replace(y,x,c.doc.slice(p.start-c.from,p.endB-c.from));if(c.sel){let N=Dk(t,E.doc,c.sel);N&&!(Je&&t.composing&&N.empty&&(p.start!=p.endB||t.input.lastChromeDelete<Date.now()-100)&&(N.head==y||N.head==E.mapping.map(x)-1)||Ft&&N.empty&&N.head==y)&&E.setSelection(N)}return s&&E.setMeta("composition",s),E.scrollIntoView()},C;if(w)if(m.pos==v.pos){Ft&&di<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>kr(t),20));let k=S(t.state.tr.delete(y,x)),E=u.resolve(p.start).marksAcross(u.resolve(p.endA));E&&k.ensureMarks(E),t.dispatch(k)}else if(p.endA==p.endB&&(C=MW(m.parent.content.cut(m.parentOffset,v.parentOffset),g.parent.content.cut(g.parentOffset,p.endA-g.start())))){let k=S(t.state.tr);C.type=="add"?k.addMark(y,x,C.mark):k.removeMark(y,x,C.mark),t.dispatch(k)}else if(m.parent.child(m.index()).isText&&m.index()==v.index()-(v.textOffset?0:1)){let k=m.parent.textBetween(m.parentOffset,v.parentOffset),E=()=>S(t.state.tr.insertText(k,y,x));t.someProp("handleTextInput",N=>N(t,y,x,k,E))||t.dispatch(E())}else t.dispatch(S());else t.dispatch(S())}function Dk(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:mv(t,e.resolve(n.anchor),e.resolve(n.head))}function MW(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,l,a;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",a=u=>u.mark(l.addToSet(u.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",a=u=>u.mark(l.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(a(e.child(u)));if(F.from(c).eq(t))return{mark:l,type:o}}function NW(t,e,n,r,i){if(n-e<=i.pos-r.pos||$p(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==e+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve($p(s,!0,!0));return!o.parent.isTextblock||o.pos>n||$p(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function $p(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function _W(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let a=Math.max(0,s-Math.min(o,l));r-=o+a-s}if(o<s&&t.size<e.size){let a=r<=s&&r>=o?s-r:0;s-=a,s&&s<e.size&&Ok(e.textBetween(s-1,s+1))&&(s+=a?1:-1),l=s+(l-o),o=s}else if(l<s){let a=r<=s&&r>=l?s-r:0;s-=a,s&&s<t.size&&Ok(t.textBetween(s-1,s+1))&&(s+=a?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function Ok(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class RA{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new K6,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Vk),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Ik(this),Rk(this),this.nodeViews=Lk(this),this.docView=hk(this.state.doc,Pk(this),zp(this),this.dom,this),this.domObserver=new wW(this,(r,i,s,o)=>TW(this,r,i,s,o)),this.domObserver.start(),q6(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Qg(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Vk),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(MA(this),o=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=Lk(this);DW(h,this.nodeViews)&&(this.nodeViews=h,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&Qg(this),this.editable=Ik(this),Rk(this);let a=zp(this),c=Pk(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=s||!this.docView.matchesNode(e.doc,c,a);(f||!e.selection.eq(i.selection))&&(o=!0);let d=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&l6(this);if(o){this.domObserver.stop();let h=f&&(Ft||Je)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&AW(i.selection,e.selection);if(f){let p=Je?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=lW(this)),(s||!this.docView.update(e.doc,c,a,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=hk(e.doc,c,a,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&D6(this))?kr(this,h):(mA(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():d&&a6(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Z){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&lk(this,n.getBoundingClientRect(),e)}else lk(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new _A(e.slice,e.move,i<0?void 0:Z.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[e];if(l!=null&&(i=n?n(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(Ft){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&c6(this.dom),kr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return p6(this,e)}coordsAtPos(e,n=1){return lA(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return w6(this,n||this.state,e)}pasteHTML(e,n){return $a(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return $a(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return gv(this,e)}destroy(){this.docView&&(Y6(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],zp(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,JU())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return G6(this,e)}domSelectionRange(){let e=this.domSelection();return e?kt&&this.root.nodeType===11&&n6(this.dom.ownerDocument)==this.dom&&SW(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}RA.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function Pk(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Yt.node(0,t.state.doc.content.size,e)]}function Rk(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Yt.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Ik(t){return!t.someProp("editable",e=>e(t.state)===!1)}function AW(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Lk(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function DW(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function Vk(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var wi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Xf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},OW=typeof navigator<"u"&&/Mac/.test(navigator.platform),PW=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var ct=0;ct<10;ct++)wi[48+ct]=wi[96+ct]=String(ct);for(var ct=1;ct<=24;ct++)wi[ct+111]="F"+ct;for(var ct=65;ct<=90;ct++)wi[ct]=String.fromCharCode(ct+32),Xf[ct]=String.fromCharCode(ct);for(var Fp in wi)Xf.hasOwnProperty(Fp)||(Xf[Fp]=wi[Fp]);function RW(t){var e=OW&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||PW&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Xf:wi)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const IW=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),LW=typeof navigator<"u"&&/Win/.test(navigator.platform);function VW(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))IW?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function BW(t){let e=Object.create(null);for(let n in t)e[VW(n)]=t[n];return e}function jp(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function zW(t){return new Rt({props:{handleKeyDown:IA(t)}})}function IA(t){let e=BW(t);return function(n,r){let i=RW(r),s,o=e[jp(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[jp(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(LW&&r.ctrlKey&&r.altKey)&&(s=wi[r.keyCode])&&s!=i){let l=e[jp(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const kv=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function LA(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const VA=(t,e,n)=>{let r=LA(t,n);if(!r)return!1;let i=Cv(r);if(!i){let o=r.blockRange(),l=o&&tl(o);return l==null?!1:(e&&e(t.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(KA(t,i,e,-1))return!0;if(r.parent.content.size==0&&($o(s,"end")||Z.isSelectable(s)))for(let o=r.depth;;o--){let l=Zd(t.doc,r.before(o),r.after(o),K.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=t.tr.step(l);a.setSelection($o(s,"end")?le.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):Z.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},$W=(t,e,n)=>{let r=LA(t,n);if(!r)return!1;let i=Cv(r);return i?BA(t,i,e):!1},FW=(t,e,n)=>{let r=$A(t,n);if(!r)return!1;let i=Ev(r);return i?BA(t,i,e):!1};function BA(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,l=o,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let u=l.firstChild;if(!u)return!1;l=u}let c=Zd(t.doc,s,a,K.empty);if(!c||c.from!=s||c instanceof Ge&&c.slice.size>=a-s)return!1;if(n){let u=t.tr.step(c);u.setSelection(ie.create(u.doc,s)),n(u.scrollIntoView())}return!0}function $o(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const zA=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=Cv(r)}let o=s&&s.nodeBefore;return!o||!Z.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Z.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function Cv(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function $A(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const FA=(t,e,n)=>{let r=$A(t,n);if(!r)return!1;let i=Ev(r);if(!i)return!1;let s=i.nodeAfter;if(KA(t,i,e,1))return!0;if(r.parent.content.size==0&&($o(s,"start")||Z.isSelectable(s))){let o=Zd(t.doc,r.before(),r.after(),K.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=t.tr.step(o);l.setSelection($o(s,"start")?le.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):Z.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},jA=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=Ev(r)}let o=s&&s.nodeAfter;return!o||!Z.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Z.create(t.doc,s.pos)).scrollIntoView()),!0)};function Ev(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const jW=(t,e)=>{let n=t.selection,r=n instanceof Z,i;if(r){if(n.node.isTextblock||!Ti(t.doc,n.from))return!1;i=n.from}else if(i=Qd(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(Z.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},HW=(t,e)=>{let n=t.selection,r;if(n instanceof Z){if(n.node.isTextblock||!Ti(t.doc,n.to))return!1;r=n.to}else if(r=Qd(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},UW=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&tl(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},HA=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function bv(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const WW=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=bv(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,o.createAndFill());a.setSelection(le.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},UA=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Jt||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=bv(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(o,s.createAndFill());l.setSelection(ie.create(l.doc,o+1)),e(l.scrollIntoView())}return!0},WA=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Sr(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&tl(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function KW(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof Z&&e.selection.node.isBlock)return!r.parentOffset||!Sr(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,l,a=!1,c=!1;for(let h=r.depth;;h--)if(r.node(h).isBlock){a=r.end(h)==r.pos+(r.depth-h),c=r.start(h)==r.pos-(r.depth-h),l=bv(r.node(h-1).contentMatchAt(r.indexAfter(h-1))),s.unshift(a&&l?{type:l}:null),o=h;break}else{if(h==1)return!1;s.unshift(null)}let u=e.tr;(e.selection instanceof ie||e.selection instanceof Jt)&&u.deleteSelection();let f=u.mapping.map(r.pos),d=Sr(u.doc,f,s.length,s);if(d||(s[0]=l?{type:l}:null,d=Sr(u.doc,f,s.length,s)),!d)return!1;if(u.split(f,s.length,s),!a&&c&&r.node(o).type!=l){let h=u.mapping.map(r.before(o)),p=u.doc.resolve(h);l&&r.node(o-1).canReplaceWith(p.index(),p.index()+1,l)&&u.setNodeMarkup(u.mapping.map(r.before(o)),l)}return n&&n(u.scrollIntoView()),!0}}const qW=KW(),YW=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(Z.create(t.doc,i))),!0)};function XW(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Ti(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function KA(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,l,a=i.type.spec.isolating||s.type.spec.isolating;if(!a&&XW(t,e,n))return!0;let c=!a&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(n){let h=e.pos+s.nodeSize,p=F.empty;for(let g=o.length-1;g>=0;g--)p=F.from(o[g].create(null,p));p=F.from(i.copy(p));let m=t.tr.step(new et(e.pos-1,h,e.pos,h,new K(p,1,0),o.length,!0)),v=m.doc.resolve(h+2*o.length);v.nodeAfter&&v.nodeAfter.type==i.type&&Ti(m.doc,v.pos)&&m.join(v.pos),n(m.scrollIntoView())}return!0}let u=s.type.spec.isolating||r>0&&a?null:le.findFrom(e,1),f=u&&u.$from.blockRange(u.$to),d=f&&tl(f);if(d!=null&&d>=e.depth)return n&&n(t.tr.lift(f,d).scrollIntoView()),!0;if(c&&$o(s,"start",!0)&&$o(i,"end")){let h=i,p=[];for(;p.push(h),!h.isTextblock;)h=h.lastChild;let m=s,v=1;for(;!m.isTextblock;m=m.firstChild)v++;if(h.canReplace(h.childCount,h.childCount,m.content)){if(n){let g=F.empty;for(let y=p.length-1;y>=0;y--)g=F.from(p[y].copy(g));let w=t.tr.step(new et(e.pos-p.length,e.pos+s.nodeSize,e.pos+v,e.pos+s.nodeSize-v,new K(g,p.length,0),0,!0));n(w.scrollIntoView())}return!0}}return!1}function qA(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(ie.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const GW=qA(-1),JW=qA(1);function QW(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=o&&fv(o,t,e);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function Bk(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(o,l,(a,c)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)i=!0;else{let u=n.doc.resolve(c),f=u.index();i=u.parent.canReplaceWith(f,f+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[o];s.setBlockType(l,a,t,e)}r(s.scrollIntoView())}return!0}}function Tv(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}Tv(kv,VA,zA);Tv(kv,FA,jA);Tv(HA,UA,WA,qW);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function ZW(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let l=r?n.tr:null;return e9(l,o,t,e)?(r&&r(l.scrollIntoView()),!0):!1}}function e9(t,e,n,r=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let a=o.resolve(e.start-2);s=new jf(a,a,e.depth),e.endIndex<e.parent.childCount&&(e=new jf(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let l=fv(s,n,r,e);return l?(t&&t9(t,e,l,i,n),!0):!1}function t9(t,e,n,r,i){let s=F.empty;for(let u=n.length-1;u>=0;u--)s=F.from(n[u].type.create(n[u].attrs,s));t.step(new et(e.start-(r?2:0),e.end,e.start,e.end,new K(s,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==i&&(o=u+1);let l=n.length-o,a=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,f=e.endIndex,d=!0;u<f;u++,d=!1)!d&&Sr(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=c.child(u).nodeSize;return t}function n9(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?r9(e,n,t,s):i9(e,n,s):!0:!1}}function r9(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new et(s-1,o,s,o,new K(F.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new jf(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=tl(r);if(l==null)return!1;i.lift(r,l);let a=i.doc.resolve(i.mapping.map(s,-1)-1);return Ti(i.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&i.join(a.pos),e(i.scrollIntoView()),!0}function i9(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)h-=i.child(p).nodeSize,r.delete(h-1,h+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(l?0:1),u+1,o.content.append(a?F.empty:F.from(i))))return!1;let f=s.pos,d=f+o.nodeSize;return r.step(new et(f-(l?1:0),d+(a?1:0),f+1,d-1,new K((l?F.empty:F.from(i.copy(F.empty))).append(a?F.empty:F.from(i.copy(F.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function s9(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,a=l.child(o-1);if(a.type!=t)return!1;if(n){let c=a.lastChild&&a.lastChild.type==l.type,u=F.from(c?t.create():null),f=new K(F.from(t.create(null,F.from(l.type.create(null,u)))),c?3:1,0),d=s.start,h=s.end;n(e.tr.step(new et(d-(c?3:1),h,d,h,f,1,!0)).scrollIntoView())}return!0}}function ih(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}class sh{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...u)=>{const f=a(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,l=[],a=!!e,c=e||s.tr,u=()=>(!a&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),l.every(d=>d===!0)),f={...Object.fromEntries(Object.entries(r).map(([d,h])=>[d,(...m)=>{const v=this.buildProps(c,n),g=h(...m)(v);return l.push(g),f}])),run:u};return f}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([a,c])=>[a,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,l={tr:e,editor:i,view:o,state:ih({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,c])=>[a,(...u)=>c(...u)(l)]))}};return l}}class o9{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function Y(t,e,n){return t.config[e]===void 0&&t.parent?Y(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Y(t.parent,e,n):null}):t.config[e]}function oh(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function YA(t){const e=[],{nodeExtensions:n,markExtensions:r}=oh(t),i=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:i},a=Y(o,"addGlobalAttributes",l);if(!a)return;a().forEach(u=>{u.types.forEach(f=>{Object.entries(u.attributes).forEach(([d,h])=>{e.push({type:f,name:d,attribute:{...s,...h}})})})})}),i.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},a=Y(o,"addAttributes",l);if(!a)return;const c=a();Object.entries(c).forEach(([u,f])=>{const d={...s,...f};typeof(d==null?void 0:d.default)=="function"&&(d.default=d.default()),d!=null&&d.isRequired&&(d==null?void 0:d.default)===void 0&&delete d.default,e.push({type:o.name,name:u,attribute:d})})}),e}function nt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Ct(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const l=s?String(s).split(" "):[],a=r[i]?r[i].split(" "):[],c=l.filter(u=>!a.includes(u));r[i]=[...a,...c].join(" ")}else if(i==="style"){const l=s?s.split(";").map(u=>u.trim()).filter(Boolean):[],a=r[i]?r[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;a.forEach(u=>{const[f,d]=u.split(":").map(h=>h.trim());c.set(f,d)}),l.forEach(u=>{const[f,d]=u.split(":").map(h=>h.trim());c.set(f,d)}),r[i]=Array.from(c.entries()).map(([u,f])=>`${u}: ${f}`).join("; ")}else r[i]=s}),r},{})}function Zg(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Ct(n,r),{})}function XA(t){return typeof t=="function"}function ae(t,e=void 0,...n){return XA(t)?e?t.bind(e)(...n):t(...n):t}function l9(t={}){return Object.keys(t).length===0&&t.constructor===Object}function a9(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function zk(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):a9(n.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...r,...i}}}}function $k(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&l9(n)?!1:n!=null))}function c9(t,e){var n;const r=YA(t),{nodeExtensions:i,markExtensions:s}=oh(t),o=(n=i.find(c=>Y(c,"topNode")))===null||n===void 0?void 0:n.name,l=Object.fromEntries(i.map(c=>{const u=r.filter(g=>g.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},d=t.reduce((g,w)=>{const y=Y(w,"extendNodeSchema",f);return{...g,...y?y(c):{}}},{}),h=$k({...d,content:ae(Y(c,"content",f)),marks:ae(Y(c,"marks",f)),group:ae(Y(c,"group",f)),inline:ae(Y(c,"inline",f)),atom:ae(Y(c,"atom",f)),selectable:ae(Y(c,"selectable",f)),draggable:ae(Y(c,"draggable",f)),code:ae(Y(c,"code",f)),whitespace:ae(Y(c,"whitespace",f)),linebreakReplacement:ae(Y(c,"linebreakReplacement",f)),defining:ae(Y(c,"defining",f)),isolating:ae(Y(c,"isolating",f)),attrs:Object.fromEntries(u.map(g=>{var w;return[g.name,{default:(w=g==null?void 0:g.attribute)===null||w===void 0?void 0:w.default}]}))}),p=ae(Y(c,"parseHTML",f));p&&(h.parseDOM=p.map(g=>zk(g,u)));const m=Y(c,"renderHTML",f);m&&(h.toDOM=g=>m({node:g,HTMLAttributes:Zg(g,u)}));const v=Y(c,"renderText",f);return v&&(h.toText=v),[c.name,h]})),a=Object.fromEntries(s.map(c=>{const u=r.filter(v=>v.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},d=t.reduce((v,g)=>{const w=Y(g,"extendMarkSchema",f);return{...v,...w?w(c):{}}},{}),h=$k({...d,inclusive:ae(Y(c,"inclusive",f)),excludes:ae(Y(c,"excludes",f)),group:ae(Y(c,"group",f)),spanning:ae(Y(c,"spanning",f)),code:ae(Y(c,"code",f)),attrs:Object.fromEntries(u.map(v=>{var g;return[v.name,{default:(g=v==null?void 0:v.attribute)===null||g===void 0?void 0:g.default}]}))}),p=ae(Y(c,"parseHTML",f));p&&(h.parseDOM=p.map(v=>zk(v,u)));const m=Y(c,"renderHTML",f);return m&&(h.toDOM=v=>m({mark:v,HTMLAttributes:Zg(v,u)})),[c.name,h]}));return new L_({topNode:o,nodes:l,marks:a})}function Hp(t,e){return e.nodes[t]||e.marks[t]||null}function Fk(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function Mv(t,e){const n=Es.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}const u9=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,l)=>{var a,c;const u=((c=(a=i.type.spec).toText)===null||c===void 0?void 0:c.call(a,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,r-s))}),n};function Nv(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class lh{constructor(e){this.find=e.find,this.handler=e.handler}}const f9=(t,e)=>{if(Nv(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function lu(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const c=a.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(d=>d.type.spec.code))return!1;let u=!1;const f=u9(c)+s;return o.forEach(d=>{if(u)return;const h=f9(f,d.find);if(!h)return;const p=a.state.tr,m=ih({state:a.state,transaction:p}),v={from:r-(h[0].length-s.length),to:i},{commands:g,chain:w,can:y}=new sh({editor:n,state:m});d.handler({state:m,range:v,match:h,commands:g,chain:w,can:y})===null||!p.steps.length||(p.setMeta(l,{transform:p,from:r,to:i,text:s}),a.dispatch(p),u=!0)}),u}function d9(t){const{editor:e,rules:n}=t,r=new Rt({state:{init(){return null},apply(i,s,o){const l=i.getMeta(r);if(l)return l;const a=i.getMeta("applyInputRules");return!!a&&setTimeout(()=>{let{text:u}=a;typeof u=="string"?u=u:u=Mv(F.from(u),o.schema);const{from:f}=a,d=f+u.length;lu({editor:e,from:f,to:d,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,l){return lu({editor:e,from:s,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&lu({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?lu({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function h9(t){return Object.prototype.toString.call(t).slice(8,-1)}function au(t){return h9(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function ah(t,e){const n={...t};return au(t)&&au(e)&&Object.keys(e).forEach(r=>{au(e[r])&&au(t[r])?n[r]=ah(t[r],e[r]):n[r]=e[r]}),n}class xi{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ae(Y(this,"addOptions",{name:this.name}))),this.storage=ae(Y(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new xi(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>ah(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new xi(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ae(Y(n,"addOptions",{name:n.name})),n.storage=ae(Y(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const a=o.find(c=>(c==null?void 0:c.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function p9(t){return typeof t=="number"}class m9{constructor(e){this.find=e.find,this.handler=e.handler}}const g9=(t,e,n)=>{if(Nv(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function y9(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:l}=t,{commands:a,chain:c,can:u}=new sh({editor:e,state:n}),f=[];return n.doc.nodesBetween(r,i,(h,p)=>{if(!h.isTextblock||h.type.spec.code)return;const m=Math.max(r,p),v=Math.min(i,p+h.content.size),g=h.textBetween(m-p,v-p,void 0,"");g9(g,s.find,o).forEach(y=>{if(y.index===void 0)return;const x=m+y.index+1,S=x+y[0].length,C={from:n.tr.mapping.map(x),to:n.tr.mapping.map(S)},k=s.handler({state:n,range:C,match:y,commands:a,chain:c,can:u,pasteEvent:o,dropEvent:l});f.push(k)})}),f.every(h=>h!==null)}let cu=null;const v9=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function w9(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const a=({state:u,from:f,to:d,rule:h,pasteEvt:p})=>{const m=u.tr,v=ih({state:u,transaction:m});if(!(!y9({editor:e,state:v,from:Math.max(f-1,0),to:d.b-1,rule:h,pasteEvent:p,dropEvent:l})||!m.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m}};return n.map(u=>new Rt({view(f){const d=p=>{var m;r=!((m=f.dom.parentElement)===null||m===void 0)&&m.contains(p.target)?f.dom.parentElement:null,r&&(cu=e)},h=()=>{cu&&(cu=null)};return window.addEventListener("dragstart",d),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",d),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(f,d)=>{if(s=r===f.dom.parentElement,l=d,!s){const h=cu;h!=null&&h.isEditable&&setTimeout(()=>{const p=h.state.selection;p&&h.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(f,d)=>{var h;const p=(h=d.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return o=d,i=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(f,d,h)=>{const p=f[0],m=p.getMeta("uiEvent")==="paste"&&!i,v=p.getMeta("uiEvent")==="drop"&&!s,g=p.getMeta("applyPasteRules"),w=!!g;if(!m&&!v&&!w)return;if(w){let{text:S}=g;typeof S=="string"?S=S:S=Mv(F.from(S),h.schema);const{from:C}=g,k=C+S.length,E=v9(S);return a({rule:u,state:h,from:C,to:{b:k},pasteEvt:E})}const y=d.doc.content.findDiffStart(h.doc.content),x=d.doc.content.findDiffEnd(h.doc.content);if(!(!p9(y)||!x||y===x.b))return a({rule:u,state:h,from:y,to:x,pasteEvt:o})}}))}function x9(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class to{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=to.resolve(e),this.schema=c9(this.extensions,n),this.setupExtensions()}static resolve(e){const n=to.sort(to.flatten(e)),r=x9(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=Y(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=Y(r,"priority")||100,o=Y(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Hp(n.name,this.schema)},i=Y(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=to.sort([...this.extensions].reverse()),r=[],i=[],s=n.map(o=>{const l={name:o.name,options:o.options,storage:o.storage,editor:e,type:Hp(o.name,this.schema)},a=[],c=Y(o,"addKeyboardShortcuts",l);let u={};if(o.type==="mark"&&Y(o,"exitable",l)&&(u.ArrowRight=()=>xi.handleExit({editor:e,mark:o})),c){const m=Object.fromEntries(Object.entries(c()).map(([v,g])=>[v,()=>g({editor:e})]));u={...u,...m}}const f=zW(u);a.push(f);const d=Y(o,"addInputRules",l);Fk(o,e.options.enableInputRules)&&d&&r.push(...d());const h=Y(o,"addPasteRules",l);Fk(o,e.options.enablePasteRules)&&h&&i.push(...h());const p=Y(o,"addProseMirrorPlugins",l);if(p){const m=p();a.push(...m)}return a}).flat();return[d9({editor:e,rules:r}),...w9({editor:e,rules:i}),...s]}get attributes(){return YA(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=oh(this.extensions);return Object.fromEntries(n.filter(r=>!!Y(r,"addNodeView")).map(r=>{const i=this.attributes.filter(a=>a.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:nt(r.name,this.schema)},o=Y(r,"addNodeView",s);if(!o)return[];const l=(a,c,u,f,d)=>{const h=Zg(a,i);return o()({node:a,view:c,getPos:u,decorations:f,innerDecorations:d,editor:e,extension:r,HTMLAttributes:h})};return[r.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Hp(e.name,this.schema)};e.type==="mark"&&(!((n=ae(Y(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=Y(e,"onBeforeCreate",r),s=Y(e,"onCreate",r),o=Y(e,"onUpdate",r),l=Y(e,"onSelectionUpdate",r),a=Y(e,"onTransaction",r),c=Y(e,"onFocus",r),u=Y(e,"onBlur",r),f=Y(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),f&&this.editor.on("destroy",f)})}}class Et{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ae(Y(this,"addOptions",{name:this.name}))),this.storage=ae(Y(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Et(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>ah(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Et({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ae(Y(n,"addOptions",{name:n.name})),n.storage=ae(Y(n,"addStorage",{name:n.name,options:n.options})),n}}function GA(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let l="";return t.nodesBetween(r,i,(a,c,u,f)=>{var d;a.isBlock&&c>r&&(l+=s);const h=o==null?void 0:o[a.type.name];if(h)return u&&(l+=h({node:a,pos:c,parent:u,index:f,range:e})),!1;a.isText&&(l+=(d=a==null?void 0:a.text)===null||d===void 0?void 0:d.slice(Math.max(r,c)-c,i-c))}),l}function JA(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const S9=Et.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Rt({key:new Bn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),l=Math.max(...s.map(u=>u.$to.pos)),a=JA(n);return GA(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),k9=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),C9=(t=!1)=>({commands:e})=>e.setContent("",t),E9=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(l,a)=>{if(l.type.isText)return;const{doc:c,mapping:u}=e,f=c.resolve(u.map(a)),d=c.resolve(u.map(a+l.nodeSize)),h=f.blockRange(d);if(!h)return;const p=tl(h);if(l.type.isTextblock){const{defaultType:m}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(h.start,m)}(p||p===0)&&e.lift(h,p)})}),!0},b9=t=>e=>t(e),T9=()=>({state:t,dispatch:e})=>UA(t,e),M9=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new ie(r.doc.resolve(Math.max(o-1,0)))),!0},N9=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const l=i.before(s),a=i.after(s);t.delete(l,a).scrollIntoView()}return!0}return!1},_9=t=>({tr:e,state:n,dispatch:r})=>{const i=nt(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const a=s.before(o),c=s.after(o);e.delete(a,c).scrollIntoView()}return!0}return!1},A9=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},D9=()=>({state:t,dispatch:e})=>kv(t,e),O9=()=>({commands:t})=>t.keyboardShortcut("Enter"),P9=()=>({state:t,dispatch:e})=>WW(t,e);function Gf(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:Nv(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function QA(t,e,n={}){return t.find(r=>r.type===e&&Gf(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function jk(t,e,n={}){return!!QA(t,e,n)}function _v(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(n=n||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!QA([...i.node.marks],e,n)))return;let o=i.index,l=t.start()+i.offset,a=o+1,c=l+i.node.nodeSize;for(;o>0&&jk([...t.parent.child(o-1).marks],e,n);)o-=1,l-=t.parent.child(o).nodeSize;for(;a<t.parent.childCount&&jk([...t.parent.child(a).marks],e,n);)c+=t.parent.child(a).nodeSize,a+=1;return{from:l,to:c}}function Ni(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const R9=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=Ni(t,r.schema),{doc:o,selection:l}=n,{$from:a,from:c,to:u}=l;if(i){const f=_v(a,s,e);if(f&&f.from<=c&&f.to>=u){const d=ie.create(o,f.from,f.to);n.setSelection(d)}}return!0},I9=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function ZA(t){return t instanceof ie}function Ki(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function eD(t,e=null){if(!e)return null;const n=le.atStart(t),r=le.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?ie.create(t,Ki(0,i,s),Ki(t.content.size,i,s)):ie.create(t,Ki(e,i,s),Ki(e,i,s))}function L9(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Av(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const V9=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(Av()||L9())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!ZA(n.state.selection))return o(),!0;const l=eD(i.doc,t)||n.state.selection,a=n.state.selection.eq(l);return s&&(a||i.setSelection(l),a&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},B9=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),z9=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),tD=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&tD(r)}return t};function uu(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return tD(n)}function ja(t,e,n){if(t instanceof fi||t instanceof F)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return F.fromArray(t.map(l=>e.nodeFromJSON(l)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),ja("",e,n)}if(i){if(n.errorOnInvalidContent){let o=!1,l="";const a=new L_({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,l=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Zl.fromSchema(a).parseSlice(uu(t),n.parseOptions):Zl.fromSchema(a).parse(uu(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=Zl.fromSchema(e);return n.slice?s.parseSlice(uu(t),n.parseOptions).content:s.parse(uu(t),n.parseOptions)}return ja("",e,n)}function $9(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Ge||i instanceof et))return;const s=t.mapping.maps[r];let o=0;s.forEach((l,a,c,u)=>{o===0&&(o=u)}),t.setSelection(le.near(t.doc.resolve(o),n))}const F9=t=>!("type"in t),j9=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const a=v=>{s.emit("contentError",{editor:s,error:v,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{ja(e,s.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(v){a(v)}try{l=ja(e,s.schema,{parseOptions:c,errorOnInvalidContent:(o=n.errorOnInvalidContent)!==null&&o!==void 0?o:s.options.enableContentCheck})}catch(v){return a(v),!1}let{from:u,to:f}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},d=!0,h=!0;if((F9(l)?l:[l]).forEach(v=>{v.check(),d=d?v.isText&&v.marks.length===0:!1,h=h?v.isBlock:!1}),u===f&&h){const{parent:v}=r.doc.resolve(u);v.isTextblock&&!v.type.spec.code&&!v.childCount&&(u-=1,f+=1)}let m;if(d){if(Array.isArray(e))m=e.map(v=>v.text||"").join("");else if(e instanceof F){let v="";e.forEach(g=>{g.text&&(v+=g.text)}),m=v}else typeof e=="object"&&e&&e.text?m=e.text:m=e;r.insertText(m,u,f)}else m=l,r.replaceWith(u,f,m);n.updateSelection&&$9(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:m}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:m})}return!0},H9=()=>({state:t,dispatch:e})=>jW(t,e),U9=()=>({state:t,dispatch:e})=>HW(t,e),W9=()=>({state:t,dispatch:e})=>VA(t,e),K9=()=>({state:t,dispatch:e})=>FA(t,e),q9=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Qd(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Y9=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Qd(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},X9=()=>({state:t,dispatch:e})=>$W(t,e),G9=()=>({state:t,dispatch:e})=>FW(t,e);function nD(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function J9(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))Av()||nD()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const Q9=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=J9(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,l))});return a==null||a.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function Ha(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?nt(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(f,d)=>{if(f.isText)return;const h=Math.max(r,d),p=Math.min(i,d+f.nodeSize);l.push({node:f,from:h,to:p})});const a=i-r,c=l.filter(f=>o?o.name===f.node.type.name:!0).filter(f=>Gf(f.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((f,d)=>f+d.to-d.from,0)>=a}const Z9=(t,e={})=>({state:n,dispatch:r})=>{const i=nt(t,n.schema);return Ha(n,i,e)?UW(n,r):!1},eK=()=>({state:t,dispatch:e})=>WA(t,e),tK=t=>({state:e,dispatch:n})=>{const r=nt(t,e.schema);return n9(r)(e,n)},nK=()=>({state:t,dispatch:e})=>HA(t,e);function ch(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Hk(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const rK=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=ch(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=nt(t,r.schema)),l==="mark"&&(o=Ni(t,r.schema)),i&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,Hk(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(f=>{o===f.type&&n.addMark(u,u+c.nodeSize,o.create(Hk(f.attrs,e)))})})}),!0):!1},iK=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),sK=()=>({tr:t,dispatch:e})=>{if(e){const n=new Jt(t.doc);t.setSelection(n)}return!0},oK=()=>({state:t,dispatch:e})=>zA(t,e),lK=()=>({state:t,dispatch:e})=>jA(t,e),aK=()=>({state:t,dispatch:e})=>YW(t,e),cK=()=>({state:t,dispatch:e})=>JW(t,e),uK=()=>({state:t,dispatch:e})=>GW(t,e);function ey(t,e,n={},r={}){return ja(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const fK=(t,e=!1,n={},r={})=>({editor:i,tr:s,dispatch:o,commands:l})=>{var a,c;const{doc:u}=s;if(n.preserveWhitespace!=="full"){const f=ey(t,i.schema,n,{errorOnInvalidContent:(a=r.errorOnInvalidContent)!==null&&a!==void 0?a:i.options.enableContentCheck});return o&&s.replaceWith(0,u.content.size,f).setMeta("preventUpdate",!e),!0}return o&&s.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck})};function rD(t,e){const n=Ni(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,a=>{o.push(...a.marks)});const l=o.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}function dK(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function hK(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Dv(t){return e=>hK(e.$from,t)}function pK(t,e){const n={from:0,to:t.content.size};return GA(t,n,e)}function mK(t,e){const n=nt(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function gK(t,e){const n=ch(typeof e=="string"?e:e.name,t.schema);return n==="node"?mK(t,e):n==="mark"?rD(t,e):{}}function iD(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),o=_v(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function Fu(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function ty(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?Ni(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>s?s.name===f.type.name:!0).find(f=>Gf(f.attrs,n,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:f,$to:d})=>{const h=f.pos,p=d.pos;t.doc.nodesBetween(h,p,(m,v)=>{if(!m.isText&&!m.marks.length)return;const g=Math.max(h,v),w=Math.min(p,v+m.nodeSize),y=w-g;o+=y,l.push(...m.marks.map(x=>({mark:x,from:g,to:w})))})}),o===0)return!1;const a=l.filter(f=>s?s.name===f.mark.type.name:!0).filter(f=>Gf(f.mark.attrs,n,{strict:!1})).reduce((f,d)=>f+d.to-d.from,0),c=l.filter(f=>s?f.mark.type!==s&&f.mark.type.excludes(s):!0).reduce((f,d)=>f+d.to-d.from,0);return(a>0?a+c:a)>=o}function yK(t,e,n={}){if(!e)return Ha(t,null,n)||ty(t,null,n);const r=ch(e,t.schema);return r==="node"?Ha(t,e,n):r==="mark"?ty(t,e,n):!1}function Uk(t,e){const{nodeExtensions:n}=oh(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=ae(Y(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function uh(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(uh(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function vK(t){return t instanceof Z}function wK(t,e,n){var r;const{selection:i}=e;let s=null;if(ZA(i)&&(s=i.$cursor),s){const l=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(l)||!l.some(a=>a.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:l,$to:a})=>{let c=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,a.pos,(u,f,d)=>{if(c)return!1;if(u.isInline){const h=!d||d.type.allowsMarkType(n),p=!!n.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(n));c=h&&p}return!c}),c})}const xK=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:l}=s,a=Ni(t,r.schema);if(i)if(o){const c=rD(r,a);n.addStoredMark(a.create({...c,...e}))}else l.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;r.doc.nodesBetween(u,f,(d,h)=>{const p=Math.max(h,u),m=Math.min(h+d.nodeSize,f);d.marks.find(g=>g.type===a)?d.marks.forEach(g=>{a===g.type&&n.addMark(p,m,a.create({...g.attrs,...e}))}):n.addMark(p,m,a.create(e))})});return wK(r,n,a)},SK=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),kK=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=nt(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:l})=>Bk(s,{...o,...e})(n)?!0:l.clearNodes()).command(({state:l})=>Bk(s,{...o,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},CK=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Ki(t,0,r.content.size),s=Z.create(r,i);e.setSelection(s)}return!0},EK=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=ie.atStart(r).from,l=ie.atEnd(r).to,a=Ki(i,o,l),c=Ki(s,o,l),u=ie.create(r,a,c);e.setSelection(u)}return!0},bK=t=>({state:e,dispatch:n})=>{const r=nt(t,e.schema);return s9(r)(e,n)};function Wk(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const TK=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:l,$to:a}=s,c=i.extensionManager.attributes,u=Fu(c,l.node().type.name,l.node().attrs);if(s instanceof Z&&s.node.isBlock)return!l.parentOffset||!Sr(o,l.pos)?!1:(r&&(t&&Wk(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const f=a.parentOffset===a.parent.content.size,d=l.depth===0?void 0:dK(l.node(-1).contentMatchAt(l.indexAfter(-1)));let h=f&&d?[{type:d,attrs:u}]:void 0,p=Sr(e.doc,e.mapping.map(l.pos),1,h);if(!h&&!p&&Sr(e.doc,e.mapping.map(l.pos),1,d?[{type:d}]:void 0)&&(p=!0,h=d?[{type:d,attrs:u}]:void 0),r){if(p&&(s instanceof ie&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,h),d&&!f&&!l.parentOffset&&l.parent.type!==d)){const m=e.mapping.map(l.before()),v=e.doc.resolve(m);l.node(-1).canReplaceWith(v.index(),v.index()+1,d)&&e.setNodeMarkup(e.mapping.map(l.before()),d)}t&&Wk(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return p},MK=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const l=nt(t,r.schema),{$from:a,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(c))return!1;const f=a.node(-1);if(f.type!==l)return!1;const d=s.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let g=F.empty;const w=a.index(-1)?1:a.index(-2)?2:3;for(let E=a.depth-w;E>=a.depth-3;E-=1)g=F.from(a.node(E).copy(g));const y=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,x={...Fu(d,a.node().type.name,a.node().attrs),...e},S=((o=l.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(x))||void 0;g=g.append(F.from(l.createAndFill(null,S)||void 0));const C=a.before(a.depth-(w-1));n.replace(C,a.after(-y),new K(g,4-w,0));let k=-1;n.doc.nodesBetween(C,n.doc.content.size,(E,N)=>{if(k>-1)return!1;E.isTextblock&&E.content.size===0&&(k=N+1)}),k>-1&&n.setSelection(ie.near(n.doc.resolve(k))),n.scrollIntoView()}return!0}const h=c.pos===a.end()?f.contentMatchAt(0).defaultType:null,p={...Fu(d,f.type.name,f.attrs),...e},m={...Fu(d,a.node().type.name,a.node().attrs),...e};n.delete(a.pos,c.pos);const v=h?[{type:l,attrs:p},{type:h,attrs:m}]:[{type:l,attrs:p}];if(!Sr(n.doc,a.pos,2))return!1;if(i){const{selection:g,storedMarks:w}=r,{splittableMarks:y}=s.extensionManager,x=w||g.$to.parentOffset&&g.$from.marks();if(n.split(a.pos,2,v).scrollIntoView(),!x||!i)return!0;const S=x.filter(C=>y.includes(C.type.name));n.ensureMarks(S)}return!0},Up=(t,e)=>{const n=Dv(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Ti(t.doc,n.pos)&&t.join(n.pos),!0},Wp=(t,e)=>{const n=Dv(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Ti(t.doc,r)&&t.join(r),!0},NK=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:a,commands:c,can:u})=>{const{extensions:f,splittableMarks:d}=i.extensionManager,h=nt(t,o.schema),p=nt(e,o.schema),{selection:m,storedMarks:v}=o,{$from:g,$to:w}=m,y=g.blockRange(w),x=v||m.$to.parentOffset&&m.$from.marks();if(!y)return!1;const S=Dv(C=>Uk(C.type.name,f))(m);if(y.depth>=1&&S&&y.depth-S.depth<=1){if(S.node.type===h)return c.liftListItem(p);if(Uk(S.node.type.name,f)&&h.validContent(S.node.content)&&l)return a().command(()=>(s.setNodeMarkup(S.pos,h),!0)).command(()=>Up(s,h)).command(()=>Wp(s,h)).run()}return!n||!x||!l?a().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>Up(s,h)).command(()=>Wp(s,h)).run():a().command(()=>{const C=u().wrapInList(h,r),k=x.filter(E=>d.includes(E.type.name));return s.ensureMarks(k),C?!0:c.clearNodes()}).wrapInList(h,r).command(()=>Up(s,h)).command(()=>Wp(s,h)).run()},_K=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=Ni(t,r.schema);return ty(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},AK=(t,e,n={})=>({state:r,commands:i})=>{const s=nt(t,r.schema),o=nt(e,r.schema),l=Ha(r,s,n);let a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),l?i.setNode(o,a):i.setNode(s,{...a,...n})},DK=(t,e={})=>({state:n,commands:r})=>{const i=nt(t,n.schema);return Ha(n,i,e)?r.lift(i):r.wrapIn(i,e)},OK=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,l=s.transform;for(let a=l.steps.length-1;a>=0;a-=1)o.step(l.steps[a].invert(l.docs[a]));if(s.text){const a=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,a))}else o.delete(s.from,s.to)}return!0}}return!1},PK=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},RK=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:l}=n,a=Ni(t,r.schema),{$from:c,empty:u,ranges:f}=l;if(!i)return!0;if(u&&o){let{from:d,to:h}=l;const p=(s=c.marks().find(v=>v.type===a))===null||s===void 0?void 0:s.attrs,m=_v(c,a,p);m&&(d=m.from,h=m.to),n.removeMark(d,h,a)}else f.forEach(d=>{n.removeMark(d.$from.pos,d.$to.pos,a)});return n.removeStoredMark(a),!0},IK=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=ch(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=nt(t,r.schema)),l==="mark"&&(o=Ni(t,r.schema)),i&&n.selection.ranges.forEach(a=>{const c=a.$from.pos,u=a.$to.pos;let f,d,h,p;n.selection.empty?r.doc.nodesBetween(c,u,(m,v)=>{s&&s===m.type&&(h=Math.max(v,c),p=Math.min(v+m.nodeSize,u),f=v,d=m)}):r.doc.nodesBetween(c,u,(m,v)=>{v<c&&s&&s===m.type&&(h=Math.max(v,c),p=Math.min(v+m.nodeSize,u),f=v,d=m),v>=c&&v<=u&&(s&&s===m.type&&n.setNodeMarkup(v,void 0,{...m.attrs,...e}),o&&m.marks.length&&m.marks.forEach(g=>{if(o===g.type){const w=Math.max(v,c),y=Math.min(v+m.nodeSize,u);n.addMark(w,y,o.create({...g.attrs,...e}))}}))}),d&&(f!==void 0&&n.setNodeMarkup(f,void 0,{...d.attrs,...e}),o&&d.marks.length&&d.marks.forEach(m=>{o===m.type&&n.addMark(h,p,o.create({...m.attrs,...e}))}))}),!0):!1},LK=(t,e={})=>({state:n,dispatch:r})=>{const i=nt(t,n.schema);return QW(i,e)(n,r)},VK=(t,e={})=>({state:n,dispatch:r})=>{const i=nt(t,n.schema);return ZW(i,e)(n,r)};var BK=Object.freeze({__proto__:null,blur:k9,clearContent:C9,clearNodes:E9,command:b9,createParagraphNear:T9,cut:M9,deleteCurrentNode:N9,deleteNode:_9,deleteRange:A9,deleteSelection:D9,enter:O9,exitCode:P9,extendMarkRange:R9,first:I9,focus:V9,forEach:B9,insertContent:z9,insertContentAt:j9,joinBackward:W9,joinDown:U9,joinForward:K9,joinItemBackward:q9,joinItemForward:Y9,joinTextblockBackward:X9,joinTextblockForward:G9,joinUp:H9,keyboardShortcut:Q9,lift:Z9,liftEmptyBlock:eK,liftListItem:tK,newlineInCode:nK,resetAttributes:rK,scrollIntoView:iK,selectAll:sK,selectNodeBackward:oK,selectNodeForward:lK,selectParentNode:aK,selectTextblockEnd:cK,selectTextblockStart:uK,setContent:fK,setMark:xK,setMeta:SK,setNode:kK,setNodeSelection:CK,setTextSelection:EK,sinkListItem:bK,splitBlock:TK,splitListItem:MK,toggleList:NK,toggleMark:_K,toggleNode:AK,toggleWrap:DK,undoInputRule:OK,unsetAllMarks:PK,unsetMark:RK,updateAttributes:IK,wrapIn:LK,wrapInList:VK});const zK=Et.create({name:"commands",addCommands(){return{...BK}}}),$K=Et.create({name:"drop",addProseMirrorPlugins(){return[new Rt({key:new Bn("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),FK=Et.create({name:"editable",addProseMirrorPlugins(){return[new Rt({key:new Bn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),jK=new Bn("focusEvents"),HK=Et.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Rt({key:jK,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),UK=Et.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:a,doc:c}=l,{empty:u,$anchor:f}=a,{pos:d,parent:h}=f,p=f.parent.isTextblock&&d>0?l.doc.resolve(d-1):f,m=p.parent.type.spec.isolating,v=f.pos-f.parentOffset,g=m&&p.parent.childCount===1?v===f.pos:le.atStart(c).from===d;return!u||!h.type.isTextblock||h.textContent.length||!g||g&&f.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Av()||nD()?s:i},addProseMirrorPlugins(){return[new Rt({key:new Bn("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(m=>m.getMeta("composition")))return;const r=t.some(m=>m.docChanged)&&!e.doc.eq(n.doc),i=t.some(m=>m.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:l}=e.selection,a=le.atStart(e.doc).from,c=le.atEnd(e.doc).to;if(s||!(o===a&&l===c)||!uh(n.doc))return;const d=n.tr,h=ih({state:n,transaction:d}),{commands:p}=new sh({editor:this.editor,state:h});if(p.clearNodes(),!!d.steps.length)return d}})]}}),WK=Et.create({name:"paste",addProseMirrorPlugins(){return[new Rt({key:new Bn("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),KK=Et.create({name:"tabindex",addProseMirrorPlugins(){return[new Rt({key:new Bn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Bi{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Bi(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Bi(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Bi(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(o);if(!i&&l.depth<=this.depth)return;const a=new Bi(l,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new Bi(l,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const a=o[l];if(s[a]!==n[a])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(a=>n[a]===o.node.attrs[a])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const qK=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function YK(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}class XK extends o9{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=YK(qK,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=XA(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(s=>{const o=typeof s=="string"?`${s}$`:s.key;r=r.filter(l=>!l.key.startsWith(o))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[FK,S9.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),zK,HK,UK,KK,$K,WK].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new to(i,this)}createCommandManager(){this.commandManager=new sh({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=ey(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(o){if(!(o instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(o.message))throw o;this.emit("contentError",{editor:this,error:o,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(l=>l.name!=="collaboration"),this.createExtensionManager()}}),n=ey(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=eD(n,this.options.autofocus);this.view=new RA(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:eo.create({doc:n,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return gK(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return yK(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Mv(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return pK(this.state.doc,{blockSeparator:n,textSerializers:{...JA(this.schema),...r}})}get isEmpty(){return uh(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Bi(n,this)}get $doc(){return this.$pos(0)}}function Fo(t){return new lh({find:t.find,handler:({state:e,range:n,match:r})=>{const i=ae(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],l=r[0];if(o){const a=l.search(/\S/),c=n.from+l.indexOf(o),u=c+o.length;if(iD(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(m=>m===t.type&&m!==h.mark.type)).filter(h=>h.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+a,c);const d=n.from+a+o.length;s.addMark(n.from+a,d,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function sD(t){return new lh({find:t.find,handler:({state:e,range:n,match:r})=>{const i=ae(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let l=n.to;const a=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>l?u=l:l=u+r[1].length;const f=r[0][r[0].length-1];s.insertText(f,o+r[0].length-1),s.replaceWith(u,l,a)}else if(r[0]){const c=t.type.isInline?o:o-1;s.insert(c,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l))}s.scrollIntoView()}})}function ny(t){return new lh({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=ae(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function Ua(t){return new lh({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=ae(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),a=o.doc.resolve(n.from).blockRange(),c=a&&fv(a,t.type,s);if(!c)return null;if(o.wrap(a,c),t.keepMarks&&t.editor){const{selection:f,storedMarks:d}=e,{splittableMarks:h}=t.editor.extensionManager,p=d||f.$to.parentOffset&&f.$from.marks();if(p){const m=p.filter(v=>h.includes(v.type.name));o.ensureMarks(m)}}if(t.keepAttributes){const f=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(f,s).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&Ti(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)}})}class Dt{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ae(Y(this,"addOptions",{name:this.name}))),this.storage=ae(Y(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Dt(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>ah(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Dt(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ae(Y(n,"addOptions",{name:n.name})),n.storage=ae(Y(n,"addStorage",{name:n.name,options:n.options})),n}}function jo(t){return new m9({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=ae(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,l=r[r.length-1],a=r[0];let c=n.to;if(l){const u=a.search(/\S/),f=n.from+a.indexOf(l),d=f+l.length;if(iD(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(v=>v===t.type&&v!==p.mark.type)).filter(p=>p.to>f).length)return null;d<n.to&&o.delete(d,n.to),f>n.from&&o.delete(n.from+u,f),c=n.from+u+l.length,o.addMark(n.from+u,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}function GK(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof Z){const s=r.index();return r.parent.canReplaceWith(s,s+1,e)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}function JK(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var oD={exports:{}},Kp={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kk;function QK(){if(Kk)return Kp;Kk=1;var t=lt;function e(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function l(f,d){var h=d(),p=r({inst:{value:h,getSnapshot:d}}),m=p[0].inst,v=p[1];return s(function(){m.value=h,m.getSnapshot=d,a(m)&&v({inst:m})},[f,h,d]),i(function(){return a(m)&&v({inst:m}),f(function(){a(m)&&v({inst:m})})},[f]),o(h),h}function a(f){var d=f.getSnapshot;f=f.value;try{var h=d();return!n(f,h)}catch{return!0}}function c(f,d){return d()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:l;return Kp.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,Kp}oD.exports=QK();var Ov=oD.exports;const ZK=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},e7=({contentComponent:t})=>{const e=Ov.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return lt.createElement(lt.Fragment,null,Object.values(e))};function t7(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:oL.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}class n7 extends lt.Component{constructor(e){var n;super(e),this.editorContentRef=lt.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=t7(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return lt.createElement(lt.Fragment,null,lt.createElement("div",{ref:ZK(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&lt.createElement(e7,{contentComponent:e.contentComponent}))}}const r7=b.forwardRef((t,e)=>{const n=lt.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return lt.createElement(n7,{key:n,innerRef:e,...t})}),i7=lt.memo(r7);var s7=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n},o7=JK(s7),lD={exports:{}},qp={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qk;function l7(){if(qk)return qp;qk=1;var t=lt,e=Ov;function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,l=t.useMemo,a=t.useDebugValue;return qp.useSyncExternalStoreWithSelector=function(c,u,f,d,h){var p=s(null);if(p.current===null){var m={hasValue:!1,value:null};p.current=m}else m=p.current;p=l(function(){function g(C){if(!w){if(w=!0,y=C,C=d(C),h!==void 0&&m.hasValue){var k=m.value;if(h(k,C))return x=k}return x=C}if(k=x,r(y,C))return k;var E=d(C);return h!==void 0&&h(k,E)?k:(y=C,x=E)}var w=!1,y,x,S=f===void 0?null:f;return[function(){return g(u())},S===null?void 0:function(){return g(S())}]},[u,f,d,h]);var v=i(c,p[0],p[1]);return o(function(){m.hasValue=!0,m.value=v},[v]),a(v),v},qp}lD.exports=l7();var a7=lD.exports;const c7=typeof window<"u"?b.useLayoutEffect:b.useEffect;class u7{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function f7(t){var e;const[n]=b.useState(()=>new u7(t.editor)),r=a7.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:o7);return c7(()=>n.watch(t.editor),[t.editor,n]),b.useDebugValue(r),r}const d7=!1,ry=typeof window>"u",h7=ry||!!(typeof window<"u"&&window.next);class Pv{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?ry||h7?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)===null||s===void 0?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)===null||s===void 0?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)===null||s===void 0?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)===null||s===void 0?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)===null||s===void 0?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)===null||s===void 0?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)===null||s===void 0?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)===null||s===void 0?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)===null||s===void 0?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)===null||s===void 0?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)===null||s===void 0?void 0:s.call(i,...r)}};return new XK(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=n.extensions)===null||o===void 0?void 0:o[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Pv.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function p7(t={},e=[]){const n=b.useRef(t);n.current=t;const[r]=b.useState(()=>new Pv(n)),i=Ov.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return b.useDebugValue(i),b.useEffect(r.onRender(e)),f7({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&s===0?0:s+1}),i}const m7=b.createContext({editor:null});m7.Consumer;const g7=b.createContext({onDragStart:void 0}),y7=()=>b.useContext(g7);lt.forwardRef((t,e)=>{const{onDragStart:n}=y7(),r=t.as||"div";return lt.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const v7=/^\s*>\s$/,w7=Dt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Ct(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Ua({find:v7,type:this.type})]}}),x7=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,S7=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,k7=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,C7=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,E7=xi.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Ct(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Fo({find:x7,type:this.type}),Fo({find:k7,type:this.type})]},addPasteRules(){return[jo({find:S7,type:this.type}),jo({find:C7,type:this.type})]}}),b7="listItem",Yk="textStyle",Xk=/^\s*([-+*])\s$/,T7=Dt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Ct(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(b7,this.editor.getAttributes(Yk)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Ua({find:Xk,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ua({find:Xk,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Yk),editor:this.editor})),[t]}}),M7=/(^|[^`])`([^`]+)`(?!`)/,N7=/(^|[^`])`([^`]+)`(?!`)/g,_7=xi.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Ct(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Fo({find:M7,type:this.type})]},addPasteRules(){return[jo({find:N7,type:this.type})]}}),A7=/^```([a-z]+)?[\s\n]$/,D7=/^~~~([a-z]+)?[\s\n]$/,aD=Dt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Ct(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:c})=>(c.setSelection(le.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[ny({find:A7,type:this.type,getAttributes:t=>({language:t[1]})}),ny({find:D7,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Rt({key:new Bn("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o,schema:l}=t.state,a=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},a)),o.selection.$from.parent.type!==this.type&&o.setSelection(ie.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),O7=Dt.create({name:"doc",topNode:!0,content:"block+"});function P7(t={}){return new Rt({view(e){return new R7(e,t)}})}class R7{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,l=s.height/i.offsetHeight;if(n){let f=e.nodeBefore,d=e.nodeAfter;if(f||d){let h=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(h){let p=h.getBoundingClientRect(),m=f?p.bottom:p.top;f&&d&&(m=(m+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*l;r={left:p.left,right:p.right,top:m-v,bottom:m+v}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),d=this.width/2*o;r={left:f.left-d,right:f.left+d,top:f.top,bottom:f.bottom}}let a=this.editorView.dom.offsetParent;this.element||(this.element=a.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!a||a==document.body&&getComputedStyle(a).position=="static")c=-pageXOffset,u=-pageYOffset;else{let f=a.getBoundingClientRect(),d=f.width/a.offsetWidth,h=f.height/a.offsetHeight;c=f.left-a.scrollLeft*d,u=f.top-a.scrollTop*h}this.element.style.left=(r.left-c)/o+"px",this.element.style.top=(r.top-u)/l+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=q_(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const I7=Et.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[P7(this.options)]}});class Ie extends le{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Ie.valid(r)?new Ie(r):le.near(r)}content(){return K.empty}eq(e){return e instanceof Ie&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ie(e.resolve(n.pos))}getBookmark(){return new Rv(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!L7(e)||!V7(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Ie.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let l=e.node(o);if(n>0?e.indexAfter(o)<l.childCount:e.index(o)>0){s=l.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let a=e.doc.resolve(i);if(Ie.valid(a))return a}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Z.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let l=e.doc.resolve(i);if(Ie.valid(l))return l}return null}}}Ie.prototype.visible=!1;Ie.findFrom=Ie.findGapCursorFrom;le.jsonID("gapcursor",Ie);class Rv{constructor(e){this.pos=e}map(e){return new Rv(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Ie.valid(n)?new Ie(n):le.near(n)}}function cD(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function L7(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||cD(i.type))return!0;if(i.inlineContent)return!1}}return!0}function V7(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||cD(i.type))return!0;if(i.inlineContent)return!1}}return!0}function B7(){return new Rt({props:{decorations:j7,createSelectionBetween(t,e,n){return e.pos==n.pos&&Ie.valid(n)?new Ie(n):null},handleClick:$7,handleKeyDown:z7,handleDOMEvents:{beforeinput:F7}}})}const z7=IA({ArrowLeft:fu("horiz",-1),ArrowRight:fu("horiz",1),ArrowUp:fu("vert",-1),ArrowDown:fu("vert",1)});function fu(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,l=e>0?o.$to:o.$from,a=o.empty;if(o instanceof ie){if(!s.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let c=Ie.findGapCursorFrom(l,e,a);return c?(i&&i(r.tr.setSelection(new Ie(c))),!0):!1}}function $7(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Ie.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Z.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Ie(r))),!0)}function F7(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Ie))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=F.empty;for(let o=r.length-1;o>=0;o--)i=F.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new K(i,0,0));return s.setSelection(ie.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function j7(t){if(!(t.selection instanceof Ie))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Be.create(t.doc,[Yt.widget(t.selection.head,e,{key:"gapcursor"})])}const H7=Et.create({name:"gapCursor",addProseMirrorPlugins(){return[B7()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=ae(Y(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),U7=Dt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Ct(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,a=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&a&&o){const f=a.filter(d=>l.includes(d.type.name));c.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),W7=Dt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Ct(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>ny({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var Jf=200,tt=function(){};tt.prototype.append=function(e){return e.length?(e=tt.from(e),!this.length&&e||e.length<Jf&&this.leafAppend(e)||this.length<Jf&&e.leafPrepend(this)||this.appendInner(e)):this};tt.prototype.prepend=function(e){return e.length?tt.from(e).append(this):this};tt.prototype.appendInner=function(e){return new K7(this,e)};tt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?tt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};tt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};tt.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};tt.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};tt.from=function(e){return e instanceof tt?e:e&&e.length?new uD(e):tt.empty};var uD=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,l){for(var a=s;a<o;a++)if(i(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,l){for(var a=s-1;a>=o;a--)if(i(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Jf)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Jf)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(tt);tt.empty=new uD([]);var K7=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(tt);const q7=500;class Nn{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,l,a,c=[],u=[];return this.items.forEach((f,d)=>{if(!f.step){i||(i=this.remapping(r,d+1),s=i.maps.length),s--,u.push(f);return}if(i){u.push(new Br(f.map));let h=f.step.map(i.slice(s)),p;h&&o.maybeStep(h).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new Br(p,void 0,void 0,c.length+u.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(f.step);if(f.selection)return l=i?f.selection.map(i.slice(s)):f.selection,a=new Nn(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:o,selection:l}}addTransform(e,n,r,i){let s=[],o=this.eventCount,l=this.items,a=!i&&l.length?l.get(l.length-1):null;for(let u=0;u<e.steps.length;u++){let f=e.steps[u].invert(e.docs[u]),d=new Br(e.mapping.maps[u],f,n),h;(h=a&&a.merge(d))&&(d=h,u?s.pop():l=l.slice(0,l.length-1)),s.push(d),n&&(o++,n=void 0),i||(a=d)}let c=o-r.depth;return c>X7&&(l=Y7(l,c),o-=c),new Nn(l.append(s),o)}remapping(e,n){let r=new Va;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new Nn(this.items.append(e.map(n=>new Br(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(d=>{d.selection&&l--},i);let a=n;this.items.forEach(d=>{let h=s.getMirror(--a);if(h==null)return;o=Math.min(o,h);let p=s.maps[h];if(d.step){let m=e.steps[h].invert(e.docs[h]),v=d.selection&&d.selection.map(s.slice(a+1,h));v&&l++,r.push(new Br(p,m,v))}else r.push(new Br(p))},i);let c=[];for(let d=n;d<o;d++)c.push(new Br(s.maps[d]));let u=this.items.slice(0,i).append(c).append(r),f=new Nn(u,l);return f.emptyItemCount()>q7&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=e)i.push(o),o.selection&&s++;else if(o.step){let a=o.step.map(n.slice(r)),c=a&&a.getMap();if(r--,c&&n.appendMap(c,r),a){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let f=new Br(c.invert(),a,u),d,h=i.length-1;(d=i.length&&i[h].merge(f))?i[h]=d:i.push(f)}}else o.map&&r--},this.items.length,0),new Nn(tt.from(i.reverse()),s)}}Nn.empty=new Nn(tt.empty,0);function Y7(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}let Br=class fD{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new fD(n.getMap().invert(),n,this.selection)}}};class Ur{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const X7=20;function G7(t,e,n,r){let i=n.getMeta(ns),s;if(i)return i.historyState;n.getMeta(Z7)&&(t=new Ur(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(ns))return o.getMeta(ns).redo?new Ur(t.done.addTransform(n,void 0,r,ju(e)),t.undone,Gk(n.mapping.maps),t.prevTime,t.prevComposition):new Ur(t.done,t.undone.addTransform(n,void 0,r,ju(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!o&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!J7(n,t.prevRanges)),c=o?Yp(t.prevRanges,n.mapping):Gk(n.mapping.maps);return new Ur(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,ju(e)),Nn.empty,c,n.time,l??t.prevComposition)}else return(s=n.getMeta("rebased"))?new Ur(t.done.rebased(n,s),t.undone.rebased(n,s),Yp(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Ur(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Yp(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function J7(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function Gk(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function Yp(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function Q7(t,e,n){let r=ju(e),i=ns.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),a=new Ur(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(ns,{redo:n,historyState:a})}let Xp=!1,Jk=null;function ju(t){let e=t.plugins;if(Jk!=e){Xp=!1,Jk=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Xp=!0;break}}return Xp}const ns=new Bn("history"),Z7=new Bn("closeHistory");function eq(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Rt({key:ns,state:{init(){return new Ur(Nn.empty,Nn.empty,null,0,-1)},apply(e,n,r){return G7(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?hD:r=="historyRedo"?pD:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function dD(t,e){return(n,r)=>{let i=ns.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=Q7(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const hD=dD(!1,!0),pD=dD(!0,!0),tq=Et.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>hD(t,e),redo:()=>({state:t,dispatch:e})=>pD(t,e)}},addProseMirrorPlugins(){return[eq(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),nq=Dt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Ct(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!GK(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$from:r,$to:i}=n,s=t();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):vK(n)?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:o,dispatch:l})=>{var a;if(l){const{$to:c}=o.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(ie.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(Z.create(o.doc,c.pos)):o.setSelection(ie.create(o.doc,c.pos));else{const f=(a=c.parent.type.contentMatch.defaultType)===null||a===void 0?void 0:a.create();f&&(o.insert(u,f),o.setSelection(ie.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[sD({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),rq=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,iq=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,sq=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,oq=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,lq=xi.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Ct(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Fo({find:rq,type:this.type}),Fo({find:sq,type:this.type})]},addPasteRules(){return[jo({find:iq,type:this.type}),jo({find:oq,type:this.type})]}}),aq=Dt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Ct(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),cq="listItem",Qk="textStyle",Zk=/^(\d+)\.\s$/,uq=Dt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Ct(this.options.HTMLAttributes,n),0]:["ol",Ct(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(cq,this.editor.getAttributes(Qk)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Ua({find:Zk,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ua({find:Zk,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Qk)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),fq=Dt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Ct(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),dq=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,hq=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,pq=xi.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Ct(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Fo({find:dq,type:this.type})]},addPasteRules(){return[jo({find:hq,type:this.type})]}}),mq=Dt.create({name:"text",group:"inline"}),gq=Et.create({name:"starterKit",addExtensions(){const t=[];return this.options.bold!==!1&&t.push(E7.configure(this.options.bold)),this.options.blockquote!==!1&&t.push(w7.configure(this.options.blockquote)),this.options.bulletList!==!1&&t.push(T7.configure(this.options.bulletList)),this.options.code!==!1&&t.push(_7.configure(this.options.code)),this.options.codeBlock!==!1&&t.push(aD.configure(this.options.codeBlock)),this.options.document!==!1&&t.push(O7.configure(this.options.document)),this.options.dropcursor!==!1&&t.push(I7.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&t.push(H7.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&t.push(U7.configure(this.options.hardBreak)),this.options.heading!==!1&&t.push(W7.configure(this.options.heading)),this.options.history!==!1&&t.push(tq.configure(this.options.history)),this.options.horizontalRule!==!1&&t.push(nq.configure(this.options.horizontalRule)),this.options.italic!==!1&&t.push(lq.configure(this.options.italic)),this.options.listItem!==!1&&t.push(aq.configure(this.options.listItem)),this.options.orderedList!==!1&&t.push(uq.configure(this.options.orderedList)),this.options.paragraph!==!1&&t.push(fq.configure(this.options.paragraph)),this.options.strike!==!1&&t.push(pq.configure(this.options.strike)),this.options.text!==!1&&t.push(mq.configure(this.options.text)),t}}),yq=Et.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Rt({key:new Bn("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const s=this.editor.isEmpty;return t.descendants((o,l)=>{const a=r>=l&&r<=l+o.nodeSize,c=!o.isLeaf&&uh(o);if((a||!this.options.showOnlyCurrent)&&c){const u=[this.options.emptyNodeClass];s&&u.push(this.options.emptyEditorClass);const f=Yt.node(l,l+o.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:a}):this.options.placeholder});i.push(f)}return this.options.includeChildren}),Be.create(t,i)}}})]}}),vq=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,wq=Dt.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",Ct(this.options.HTMLAttributes,t)]},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[sD({find:vq,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}}),Rn=()=>new Map,iy=t=>{const e=Rn();return t.forEach((n,r)=>{e.set(r,n)}),e},_i=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},xq=(t,e)=>{const n=[];for(const[r,i]of t)n.push(e(i,r));return n},Sq=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1},Ho=()=>new Set,Gp=t=>t[t.length-1],kq=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},vs=Array.from,Iv=(t,e)=>{for(let n=0;n<t.length;n++)if(!e(t[n],n,t))return!1;return!0},mD=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},Cq=(t,e)=>{const n=new Array(t);for(let r=0;r<t;r++)n[r]=e(r,n);return n},fh=Array.isArray;class Eq{constructor(){this._observers=Rn()}on(e,n){return _i(this._observers,e,Ho).add(n),n}once(e,n){const r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return vs((this._observers.get(e)||Rn()).values()).forEach(r=>r(...n))}destroy(){this._observers=Rn()}}const nr=Math.floor,Hu=Math.abs,gD=(t,e)=>t<e?t:e,nl=(t,e)=>t>e?t:e,yD=t=>t!==0?t<0:1/t<0,eC=1,tC=2,Jp=4,Qp=8,Wa=32,Cr=64,Qt=128,dh=31,sy=63,rs=127,bq=2147483647,Qf=Number.MAX_SAFE_INTEGER,nC=Number.MIN_SAFE_INTEGER,Tq=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&nr(t)===t),Mq=String.fromCharCode,Nq=t=>t.toLowerCase(),_q=/^\s*/g,Aq=t=>t.replace(_q,""),Dq=/([A-Z])/g,rC=(t,e)=>Aq(t.replace(Dq,n=>`${e}${Nq(n)}`)),Oq=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},Ka=typeof TextEncoder<"u"?new TextEncoder:null,Pq=t=>Ka.encode(t),Rq=Ka?Pq:Oq;let ra=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});ra&&ra.decode(new Uint8Array).length===1&&(ra=null);const Iq=(t,e)=>Cq(e,()=>t).join("");class wc{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const hh=()=>new wc,Lq=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},Wn=t=>{const e=new Uint8Array(Lq(t));let n=0;for(let r=0;r<t.bufs.length;r++){const i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},Vq=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(nl(n,e)*2),t.cpos=0)},Ye=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},oy=Ye,pe=(t,e)=>{for(;e>rs;)Ye(t,Qt|rs&e),e=nr(e/128);Ye(t,rs&e)},Lv=(t,e)=>{const n=yD(e);for(n&&(e=-e),Ye(t,(e>sy?Qt:0)|(n?Cr:0)|sy&e),e=nr(e/64);e>0;)Ye(t,(e>rs?Qt:0)|rs&e),e=nr(e/128)},ly=new Uint8Array(3e4),Bq=ly.length/3,zq=(t,e)=>{if(e.length<Bq){const n=Ka.encodeInto(e,ly).written||0;pe(t,n);for(let r=0;r<n;r++)Ye(t,ly[r])}else jt(t,Rq(e))},$q=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;pe(t,r);for(let i=0;i<r;i++)Ye(t,n.codePointAt(i))},ho=Ka&&Ka.encodeInto?zq:$q,ph=(t,e)=>{const n=t.cbuf.length,r=t.cpos,i=gD(n-r,e.length),s=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,s>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(nl(n*2,s)),t.cbuf.set(e.subarray(i)),t.cpos=s)},jt=(t,e)=>{pe(t,e.byteLength),ph(t,e)},Vv=(t,e)=>{Vq(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},Fq=(t,e)=>Vv(t,4).setFloat32(0,e,!1),jq=(t,e)=>Vv(t,8).setFloat64(0,e,!1),Hq=(t,e)=>Vv(t,8).setBigInt64(0,e,!1),iC=new DataView(new ArrayBuffer(4)),Uq=t=>(iC.setFloat32(0,t),iC.getFloat32(0)===t),qa=(t,e)=>{switch(typeof e){case"string":Ye(t,119),ho(t,e);break;case"number":Tq(e)&&Hu(e)<=bq?(Ye(t,125),Lv(t,e)):Uq(e)?(Ye(t,124),Fq(t,e)):(Ye(t,123),jq(t,e));break;case"bigint":Ye(t,122),Hq(t,e);break;case"object":if(e===null)Ye(t,126);else if(fh(e)){Ye(t,117),pe(t,e.length);for(let n=0;n<e.length;n++)qa(t,e[n])}else if(e instanceof Uint8Array)Ye(t,116),jt(t,e);else{Ye(t,118);const n=Object.keys(e);pe(t,n.length);for(let r=0;r<n.length;r++){const i=n[r];ho(t,i),qa(t,e[i])}}break;case"boolean":Ye(t,e?120:121);break;default:Ye(t,127)}};class sC extends wc{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&pe(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const oC=t=>{t.count>0&&(Lv(t.encoder,t.count===1?t.s:-t.s),t.count>1&&pe(t.encoder,t.count-2))};class Uu{constructor(){this.encoder=new wc,this.s=0,this.count=0}write(e){this.s===e?this.count++:(oC(this),this.count=1,this.s=e)}toUint8Array(){return oC(this),Wn(this.encoder)}}const lC=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);Lv(t.encoder,e),t.count>1&&pe(t.encoder,t.count-2)}};class Zp{constructor(){this.encoder=new wc,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(lC(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return lC(this),Wn(this.encoder)}}class Wq{constructor(){this.sarr=[],this.s="",this.lensE=new Uu}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new wc;return this.sarr.push(this.s),this.s="",ho(e,this.sarr.join("")),ph(e,this.lensE.toUint8Array()),Wn(e)}}const rr=t=>new Error(t),In=()=>{throw rr("Method unimplemented")},wn=()=>{throw rr("Unexpected case")},vD=rr("Unexpected end of array"),wD=rr("Integer out of Range");class mh{constructor(e){this.arr=e,this.pos=0}}const Bv=t=>new mh(t),Kq=t=>t.pos!==t.arr.length,qq=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},Ht=t=>qq(t,fe(t)),Uo=t=>t.arr[t.pos++],fe=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const i=t.arr[t.pos++];if(e=e+(i&rs)*n,n*=128,i<Qt)return e;if(e>Qf)throw wD}throw vD},zv=t=>{let e=t.arr[t.pos++],n=e&sy,r=64;const i=(e&Cr)>0?-1:1;if(!(e&Qt))return i*n;const s=t.arr.length;for(;t.pos<s;){if(e=t.arr[t.pos++],n=n+(e&rs)*r,r*=128,e<Qt)return i*n;if(n>Qf)throw wD}throw vD},Yq=t=>{let e=fe(t);if(e===0)return"";{let n=String.fromCodePoint(Uo(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(Uo(t));else for(;e>0;){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},Xq=t=>ra.decode(Ht(t)),po=ra?Xq:Yq,$v=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},Gq=t=>$v(t,4).getFloat32(0,!1),Jq=t=>$v(t,8).getFloat64(0,!1),Qq=t=>$v(t,8).getBigInt64(0,!1),Zq=[t=>{},t=>null,zv,Gq,Jq,Qq,t=>!1,t=>!0,po,t=>{const e=fe(t),n={};for(let r=0;r<e;r++){const i=po(t);n[i]=Ya(t)}return n},t=>{const e=fe(t),n=[];for(let r=0;r<e;r++)n.push(Ya(t));return n},Ht],Ya=t=>Zq[127-Uo(t)](t);class aC extends mh{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),Kq(this)?this.count=fe(this)+1:this.count=-1),this.count--,this.s}}class Wu extends mh{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=zv(this);const e=yD(this.s);this.count=1,e&&(this.s=-this.s,this.count=fe(this)+2)}return this.count--,this.s}}class em extends mh{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=zv(this),n=e&1;this.diff=nr(e/2),this.count=1,n&&(this.count=fe(this)+2)}return this.s+=this.diff,this.count--,this.s}}class eY{constructor(e){this.decoder=new Wu(e),this.str=po(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const tY=crypto.getRandomValues.bind(crypto),xD=()=>tY(new Uint32Array(1))[0],nY="10000000-1000-4000-8000"+-1e11,rY=()=>nY.replace(/[018]/g,t=>(t^xD()&15>>t/4).toString(16)),cC=t=>new Promise(t);Promise.all.bind(Promise);const uC=t=>t===void 0?null:t;class iY{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let SD=new iY,sY=!0;try{typeof localStorage<"u"&&localStorage&&(SD=localStorage,sY=!1)}catch{}const oY=SD,Xa=Symbol("Equality"),kD=(t,e)=>{var n;return t===e||!!((n=t==null?void 0:t[Xa])!=null&&n.call(t,e))||!1},lY=t=>typeof t=="object",aY=Object.assign,cY=Object.keys,uY=(t,e)=>{for(const n in t)e(t[n],n)},Zf=t=>cY(t).length,fY=t=>{for(const e in t)return!1;return!0},xc=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},Fv=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),dY=(t,e)=>t===e||Zf(t)===Zf(e)&&xc(t,(n,r)=>(n!==void 0||Fv(e,r))&&kD(e[r],n)),hY=Object.freeze,CD=t=>{for(const e in t){const n=t[e];(typeof n=="object"||typeof n=="function")&&CD(t[e])}return hY(t)},jv=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&jv(t,e,n+1)}},Ku=(t,e)=>{if(t===e)return!0;if(t==null||e==null||t.constructor!==e.constructor&&(t.constructor||Object)!==(e.constructor||Object))return!1;if(t[Xa]!=null)return t[Xa](e);switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:{if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break}case Set:{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;break}case Map:{if(t.size!==e.size)return!1;for(const n of t.keys())if(!e.has(n)||!Ku(t.get(n),e.get(n)))return!1;break}case void 0:case Object:if(Zf(t)!==Zf(e))return!1;for(const n in t)if(!Fv(t,n)||!Ku(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Ku(t[n],e[n]))return!1;break;default:return!1}return!0},pY=(t,e)=>e.includes(t);var ED={};const Ga=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";let $n;const mY=()=>{if($n===void 0)if(Ga){$n=Rn();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&$n.set(e,""),e=r):e!==null&&($n.set(e,r),e=null)}e!==null&&$n.set(e,"")}else typeof location=="object"?($n=Rn(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");$n.set(`--${rC(e,"-")}`,n),$n.set(`-${rC(e,"-")}`,n)}})):$n=Rn();return $n},ay=t=>mY().has(t),ed=t=>uC(Ga?ED[t.toUpperCase().replaceAll("-","_")]:oY.getItem(t)),bD=t=>ay("--"+t)||ed(t)!==null,gY=bD("production"),yY=Ga&&pY(ED.FORCE_COLOR,["true","1","2"]),vY=yY||!ay("--no-colors")&&!bD("no-color")&&(!Ga||process.stdout.isTTY)&&(!Ga||ay("--color")||ed("COLORTERM")!==null||(ed("TERM")||"").includes("color")),wY=t=>new Uint8Array(t),xY=t=>{const e=wY(t.byteLength);return e.set(t),e};class SY{constructor(e,n){this.left=e,this.right=n}}const ur=(t,e)=>new SY(t,e),fC=t=>t.next()>=.5,tm=(t,e,n)=>nr(t.next()*(n+1-e)+e),TD=(t,e,n)=>nr(t.next()*(n+1-e)+e),Hv=(t,e,n)=>TD(t,e,n),kY=t=>Mq(Hv(t,97,122)),CY=(t,e=0,n=20)=>{const r=Hv(t,e,n);let i="";for(let s=0;s<r;s++)i+=kY(t);return i},nm=(t,e)=>e[Hv(t,0,e.length-1)],EY=Symbol("0schema");class bY{constructor(){this._rerrs=[]}extend(e,n,r,i=null){this._rerrs.push({path:e,expected:n,has:r,message:i})}toString(){const e=[];for(let n=this._rerrs.length-1;n>0;n--){const r=this._rerrs[n];e.push(Iq(" ",(this._rerrs.length-n)*2)+`${r.path!=null?`[${r.path}] `:""}${r.has} doesn't match ${r.expected}. ${r.message}`)}return e.join(`
`)}}const cy=(t,e)=>t===e?!0:t==null||e==null||t.constructor!==e.constructor?!1:t[Xa]?kD(t,e):fh(t)?Iv(t,n=>mD(e,r=>cy(n,r))):lY(t)?xc(t,(n,r)=>cy(n,e[r])):!1;class Tt{extends(e){let[n,r]=[this.shape,e.shape];return this.constructor._dilutes&&([r,n]=[n,r]),cy(n,r)}equals(e){return this.constructor===e.constructor&&Ku(this.shape,e.shape)}[EY](){return!0}[Xa](e){return this.equals(e)}validate(e){return this.check(e)}check(e,n){In()}get nullable(){return rl(this,xh)}get optional(){return new _D(this)}cast(e){return dC(e,this),e}expect(e){return dC(e,this),e}}bc(Tt,"_dilutes",!1);class Uv extends Tt{constructor(e,n){super(),this.shape=e,this._c=n}check(e,n=void 0){const r=(e==null?void 0:e.constructor)===this.shape&&(this._c==null||this._c(e));return!r&&(n==null||n.extend(null,this.shape.name,e==null?void 0:e.constructor.name,(e==null?void 0:e.constructor)!==this.shape?"Constructor match failed":"Check failed")),r}}const He=(t,e=null)=>new Uv(t,e);He(Uv);class Wv extends Tt{constructor(e){super(),this.shape=e}check(e,n){const r=this.shape(e);return!r&&(n==null||n.extend(null,"custom prop",e==null?void 0:e.constructor.name,"failed to check custom prop")),r}}const rt=t=>new Wv(t);He(Wv);class gh extends Tt{constructor(e){super(),this.shape=e}check(e,n){const r=this.shape.some(i=>i===e);return!r&&(n==null||n.extend(null,this.shape.join(" | "),e.toString())),r}}const yh=(...t)=>new gh(t),MD=He(gh),TY=RegExp.escape||(t=>t.replace(/[().|&,$^[\]]/g,e=>"\\"+e)),ND=t=>{if(Wo.check(t))return[TY(t)];if(MD.check(t))return t.shape.map(e=>e+"");if(BD.check(t))return["[+-]?\\d+.?\\d*"];if(zD.check(t))return[".*"];if(nd.check(t))return t.shape.map(ND).flat(1);wn()};class MY extends Tt{constructor(e){super(),this.shape=e,this._r=new RegExp("^"+e.map(ND).map(n=>`(${n.join("|")})`).join("")+"$")}check(e,n){const r=this._r.exec(e)!=null;return!r&&(n==null||n.extend(null,this._r.toString(),e.toString(),"String doesn't match string template.")),r}}He(MY);const NY=Symbol("optional");class _D extends Tt{constructor(e){super(),this.shape=e}check(e,n){const r=e===void 0||this.shape.check(e);return!r&&(n==null||n.extend(null,"undefined (optional)","()")),r}get[NY](){return!0}}const _Y=He(_D);class AY extends Tt{check(e,n){return n==null||n.extend(null,"never",typeof e),!1}}He(AY);const dd=class dd extends Tt{constructor(e,n=!1){super(),this.shape=e,this._isPartial=n}get partial(){return new dd(this.shape,!0)}check(e,n){return e==null?(n==null||n.extend(null,"object","null"),!1):xc(this.shape,(r,i)=>{const s=this._isPartial&&!Fv(e,i)||r.check(e[i],n);return!s&&(n==null||n.extend(i.toString(),r.toString(),typeof e[i],"Object property does not match")),s})}};bc(dd,"_dilutes",!0);let td=dd;const DY=t=>new td(t),OY=He(td),PY=rt(t=>t!=null&&(t.constructor===Object||t.constructor==null));class AD extends Tt{constructor(e,n){super(),this.shape={keys:e,values:n}}check(e,n){return e!=null&&xc(e,(r,i)=>{const s=this.shape.keys.check(i,n);return!s&&(n==null||n.extend(i+"","Record",typeof e,s?"Key doesn't match schema":"Value doesn't match value")),s&&this.shape.values.check(r,n)})}}const DD=(t,e)=>new AD(t,e),RY=He(AD);class OD extends Tt{constructor(e){super(),this.shape=e}check(e,n){return e!=null&&xc(this.shape,(r,i)=>{const s=r.check(e[i],n);return!s&&(n==null||n.extend(i.toString(),"Tuple",typeof r)),s})}}const IY=(...t)=>new OD(t);He(OD);class PD extends Tt{constructor(e){super(),this.shape=e.length===1?e[0]:new vh(e)}check(e,n){const r=fh(e)&&Iv(e,i=>this.shape.check(i));return!r&&(n==null||n.extend(null,"Array","")),r}}const RD=(...t)=>new PD(t),LY=He(PD),VY=rt(t=>fh(t));class ID extends Tt{constructor(e,n){super(),this.shape=e,this._c=n}check(e,n){const r=e instanceof this.shape&&(this._c==null||this._c(e));return!r&&(n==null||n.extend(null,this.shape.name,e==null?void 0:e.constructor.name)),r}}const BY=(t,e=null)=>new ID(t,e);He(ID);const zY=BY(Tt);class $Y extends Tt{constructor(e){super(),this.len=e.length-1,this.args=IY(...e.slice(-1)),this.res=e[this.len]}check(e,n){const r=e.constructor===Function&&e.length<=this.len;return!r&&(n==null||n.extend(null,"function",typeof e)),r}}const FY=He($Y),jY=rt(t=>typeof t=="function");class HY extends Tt{constructor(e){super(),this.shape=e}check(e,n){const r=Iv(this.shape,i=>i.check(e,n));return!r&&(n==null||n.extend(null,"Intersectinon",typeof e)),r}}He(HY,t=>t.shape.length>0);class vh extends Tt{constructor(e){super(),this.shape=e}check(e,n){const r=mD(this.shape,i=>i.check(e,n));return n==null||n.extend(null,"Union",typeof e),r}}bc(vh,"_dilutes",!0);const rl=(...t)=>t.findIndex(e=>nd.check(e))>=0?rl(...t.map(e=>Ja(e)).map(e=>nd.check(e)?e.shape:[e]).flat(1)):t.length===1?t[0]:new vh(t),nd=He(vh),LD=()=>!0,rd=rt(LD),UY=He(Wv,t=>t.shape===LD),Kv=rt(t=>typeof t=="bigint"),WY=rt(t=>t===Kv),VD=rt(t=>typeof t=="symbol");rt(t=>t===VD);const mo=rt(t=>typeof t=="number"),BD=rt(t=>t===mo),Wo=rt(t=>typeof t=="string"),zD=rt(t=>t===Wo),wh=rt(t=>typeof t=="boolean"),KY=rt(t=>t===wh),$D=yh(void 0);He(gh,t=>t.shape.length===1&&t.shape[0]===void 0);yh(void 0);const xh=yh(null),qY=He(gh,t=>t.shape.length===1&&t.shape[0]===null);He(Uint8Array);He(Uv,t=>t.shape===Uint8Array);const YY=rl(mo,Wo,xh,$D,Kv,wh,VD);(()=>{const t=RD(rd),e=DD(Wo,rd),n=rl(mo,Wo,xh,wh,t,e);return t.shape=n,e.shape.values=n,n})();const Ja=t=>{if(zY.check(t))return t;if(PY.check(t)){const e={};for(const n in t)e[n]=Ja(t[n]);return DY(e)}else{if(VY.check(t))return rl(...t.map(Ja));if(YY.check(t))return yh(t);if(jY.check(t))return He(t)}wn()},dC=gY?()=>{}:(t,e)=>{const n=new bY;if(!e.check(t,n))throw rr(`Expected value to be of type ${e.constructor.name}.
${n.toString()}`)};class XY{constructor(e){this.patterns=[],this.$state=e}if(e,n){return this.patterns.push({if:Ja(e),h:n}),this}else(e){return this.if(rd,e)}done(){return(e,n)=>{for(let r=0;r<this.patterns.length;r++){const i=this.patterns[r];if(i.if.check(e))return i.h(e,n)}throw rr("Unhandled pattern")}}}const GY=t=>new XY(t),FD=GY(rd).if(BD,(t,e)=>tm(e,nC,Qf)).if(zD,(t,e)=>CY(e)).if(KY,(t,e)=>fC(e)).if(WY,(t,e)=>BigInt(tm(e,nC,Qf))).if(nd,(t,e)=>Ds(e,nm(e,t.shape))).if(OY,(t,e)=>{const n={};for(const r in t.shape){let i=t.shape[r];if(_Y.check(i)){if(fC(e))continue;i=i.shape}n[r]=FD(i,e)}return n}).if(LY,(t,e)=>{const n=[],r=TD(e,0,42);for(let i=0;i<r;i++)n.push(Ds(e,t.shape));return n}).if(MD,(t,e)=>nm(e,t.shape)).if(qY,(t,e)=>null).if(FY,(t,e)=>{const n=Ds(e,t.res);return()=>n}).if(UY,(t,e)=>Ds(e,nm(e,[mo,Wo,xh,$D,Kv,wh,RD(mo),DD(rl("a","b","c"),mo)]))).if(RY,(t,e)=>{const n={},r=tm(e,0,3);for(let i=0;i<r;i++){const s=Ds(e,t.shape.keys),o=Ds(e,t.shape.values);n[s]=o}return n}).done(),Ds=(t,e)=>FD(Ja(e),t),Sh=typeof document<"u"?document:{};rt(t=>t.nodeType===tX);typeof DOMParser<"u"&&new DOMParser;rt(t=>t.nodeType===QY);rt(t=>t.nodeType===ZY);const JY=t=>xq(t,(e,n)=>`${n}:${e};`).join(""),QY=Sh.ELEMENT_NODE,ZY=Sh.TEXT_NODE,eX=Sh.DOCUMENT_NODE,tX=Sh.DOCUMENT_FRAGMENT_NODE;rt(t=>t.nodeType===eX);const Or=Symbol,jD=Or(),HD=Or(),nX=Or(),rX=Or(),iX=Or(),UD=Or(),sX=Or(),qv=Or(),oX=Or(),lX=t=>{var i;t.length===1&&((i=t[0])==null?void 0:i.constructor)===Function&&(t=t[0]());const e=[],n=[];let r=0;for(;r<t.length;r++){const s=t[r];if(s===void 0)break;if(s.constructor===String||s.constructor===Number)e.push(s);else if(s.constructor===Object)break}for(r>0&&n.push(e.join(""));r<t.length;r++){const s=t[r];s instanceof Symbol||n.push(s)}return n},aX={[jD]:ur("font-weight","bold"),[HD]:ur("font-weight","normal"),[nX]:ur("color","blue"),[iX]:ur("color","green"),[rX]:ur("color","grey"),[UD]:ur("color","red"),[sX]:ur("color","purple"),[qv]:ur("color","orange"),[oX]:ur("color","black")},cX=t=>{var o;t.length===1&&((o=t[0])==null?void 0:o.constructor)===Function&&(t=t[0]());const e=[],n=[],r=Rn();let i=[],s=0;for(;s<t.length;s++){const l=t[s],a=aX[l];if(a!==void 0)r.set(a.left,a.right);else{if(l===void 0)break;if(l.constructor===String||l.constructor===Number){const c=JY(r);s>0||c.length>0?(e.push("%c"+l),n.push(c)):e.push(l)}else break}}for(s>0&&(i=n,i.unshift(e.join("")));s<t.length;s++){const l=t[s];l instanceof Symbol||i.push(l)}return i},WD=vY?cX:lX,uX=(...t)=>{console.log(...WD(t)),KD.forEach(e=>e.print(t))},fX=(...t)=>{console.warn(...WD(t)),t.unshift(qv),KD.forEach(e=>e.print(t))},KD=Ho(),qD=t=>({[Symbol.iterator](){return this},next:t}),dX=(t,e)=>qD(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),rm=(t,e)=>qD(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});class YD{constructor(e,n){this.clock=e,this.len=n}}class kh{constructor(){this.clients=new Map}}const XD=(t,e,n)=>e.clients.forEach((r,i)=>{const s=t.doc.store.clients.get(i);if(s!=null){const o=s[s.length-1],l=o.id.clock+o.length;for(let a=0,c=r[a];a<r.length&&c.clock<l;c=r[++a])rO(t,s,c.clock,c.len,n)}}),hX=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){const i=nr((n+r)/2),s=t[i],o=s.clock;if(o<=e){if(e<o+s.len)return i;n=i+1}else r=i-1}return null},GD=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&hX(n,e.clock)!==null},Yv=t=>{t.clients.forEach(e=>{e.sort((i,s)=>i.clock-s.clock);let n,r;for(n=1,r=1;n<e.length;n++){const i=e[r-1],s=e[n];i.clock+i.len>=s.clock?i.len=nl(i.len,s.clock+s.len-i.clock):(r<n&&(e[r]=s),r++)}e.length=r})},pX=t=>{const e=new kh;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,i)=>{if(!e.clients.has(i)){const s=r.slice();for(let o=n+1;o<t.length;o++)kq(s,t[o].clients.get(i)||[]);e.clients.set(i,s)}});return Yv(e),e},id=(t,e,n,r)=>{_i(t.clients,e,()=>[]).push(new YD(n,r))},Xv=(t,e)=>{pe(t.restEncoder,e.clients.size),vs(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),pe(t.restEncoder,n);const i=r.length;pe(t.restEncoder,i);for(let s=0;s<i;s++){const o=r[s];t.writeDsClock(o.clock),t.writeDsLen(o.len)}})},mX=t=>{const e=new kh,n=fe(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const i=fe(t.restDecoder),s=fe(t.restDecoder);if(s>0){const o=_i(e.clients,i,()=>[]);for(let l=0;l<s;l++)o.push(new YD(t.readDsClock(),t.readDsLen()))}}return e},hC=(t,e,n)=>{const r=new kh,i=fe(t.restDecoder);for(let s=0;s<i;s++){t.resetDsCurVal();const o=fe(t.restDecoder),l=fe(t.restDecoder),a=n.clients.get(o)||[],c=Qe(n,o);for(let u=0;u<l;u++){const f=t.readDsClock(),d=f+t.readDsLen();if(f<c){c<d&&id(r,o,c,d-c);let h=ir(a,f),p=a[h];for(!p.deleted&&p.id.clock<f&&(a.splice(h+1,0,fd(e,p,f-p.id.clock)),h++);h<a.length&&(p=a[h++],p.id.clock<d);)p.deleted||(d<p.id.clock+p.length&&a.splice(h,0,fd(e,p,d-p.id.clock)),p.delete(e))}else id(r,o,f,d-f)}}if(r.clients.size>0){const s=new Ch;return pe(s.restEncoder,0),Xv(s,r),s.toUint8Array()}return null},JD=xD;class il extends Eq{constructor({guid:e=rY(),collectionid:n=null,gc:r=!0,gcFilter:i=()=>!0,meta:s=null,autoLoad:o=!1,shouldLoad:l=!0}={}){super(),this.gc=r,this.gcFilter=i,this.clientID=JD(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new tO,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=l,this.autoLoad=o,this.meta=s,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=cC(c=>{this.on("load",()=>{this.isLoaded=!0,c(this)})});const a=()=>cC(c=>{const u=f=>{(f===void 0||f===!0)&&(this.off("sync",u),c())};this.on("sync",u)});this.on("sync",c=>{c===!1&&this.isSynced&&(this.whenSynced=a()),this.isSynced=c===void 0||c===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=a()}load(){const e=this._item;e!==null&&!this.shouldLoad&&xe(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(vs(this.subdocs).map(e=>e.guid))}transact(e,n=null){return xe(this,e,n)}get(e,n=ft){const r=_i(this.share,e,()=>{const s=new n;return s._integrate(this,null),s}),i=r.constructor;if(n!==ft&&i!==n)if(i===ft){const s=new n;s._map=r._map,r._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=s}),s._start=r._start;for(let o=s._start;o!==null;o=o.right)o.parent=s;return s._length=r._length,this.share.set(e,s),s._integrate(this,null),s}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,yo)}getText(e=""){return this.get(e,qo)}getMap(e=""){return this.get(e,Ko)}getXmlElement(e=""){return this.get(e,Yo)}getXmlFragment(e=""){return this.get(e,ws)}toJSON(){const e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){this.isDestroyed=!0,vs(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new il({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,xe(e.parent.doc,r=>{const i=n.doc;e.deleted||r.subdocsAdded.add(i),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class gX{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return fe(this.restDecoder)}readDsLen(){return fe(this.restDecoder)}}class yX extends gX{readLeftID(){return de(fe(this.restDecoder),fe(this.restDecoder))}readRightID(){return de(fe(this.restDecoder),fe(this.restDecoder))}readClient(){return fe(this.restDecoder)}readInfo(){return Uo(this.restDecoder)}readString(){return po(this.restDecoder)}readParentInfo(){return fe(this.restDecoder)===1}readTypeRef(){return fe(this.restDecoder)}readLen(){return fe(this.restDecoder)}readAny(){return Ya(this.restDecoder)}readBuf(){return xY(Ht(this.restDecoder))}readJSON(){return JSON.parse(po(this.restDecoder))}readKey(){return po(this.restDecoder)}}class vX{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=fe(this.restDecoder),this.dsCurrVal}readDsLen(){const e=fe(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class sd extends vX{constructor(e){super(e),this.keys=[],fe(e),this.keyClockDecoder=new em(Ht(e)),this.clientDecoder=new Wu(Ht(e)),this.leftClockDecoder=new em(Ht(e)),this.rightClockDecoder=new em(Ht(e)),this.infoDecoder=new aC(Ht(e),Uo),this.stringDecoder=new eY(Ht(e)),this.parentInfoDecoder=new aC(Ht(e),Uo),this.typeRefDecoder=new Wu(Ht(e)),this.lenDecoder=new Wu(Ht(e))}readLeftID(){return new go(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new go(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Ya(this.restDecoder)}readBuf(){return Ht(this.restDecoder)}readJSON(){return Ya(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class wX{constructor(){this.restEncoder=hh()}toUint8Array(){return Wn(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){pe(this.restEncoder,e)}writeDsLen(e){pe(this.restEncoder,e)}}class xX extends wX{writeLeftID(e){pe(this.restEncoder,e.client),pe(this.restEncoder,e.clock)}writeRightID(e){pe(this.restEncoder,e.client),pe(this.restEncoder,e.clock)}writeClient(e){pe(this.restEncoder,e)}writeInfo(e){oy(this.restEncoder,e)}writeString(e){ho(this.restEncoder,e)}writeParentInfo(e){pe(this.restEncoder,e?1:0)}writeTypeRef(e){pe(this.restEncoder,e)}writeLen(e){pe(this.restEncoder,e)}writeAny(e){qa(this.restEncoder,e)}writeBuf(e){jt(this.restEncoder,e)}writeJSON(e){ho(this.restEncoder,JSON.stringify(e))}writeKey(e){ho(this.restEncoder,e)}}class SX{constructor(){this.restEncoder=hh(),this.dsCurrVal=0}toUint8Array(){return Wn(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,pe(this.restEncoder,n)}writeDsLen(e){e===0&&wn(),pe(this.restEncoder,e-1),this.dsCurrVal+=e}}class Ch extends SX{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Zp,this.clientEncoder=new Uu,this.leftClockEncoder=new Zp,this.rightClockEncoder=new Zp,this.infoEncoder=new sC(oy),this.stringEncoder=new Wq,this.parentInfoEncoder=new sC(oy),this.typeRefEncoder=new Uu,this.lenEncoder=new Uu}toUint8Array(){const e=hh();return pe(e,0),jt(e,this.keyClockEncoder.toUint8Array()),jt(e,this.clientEncoder.toUint8Array()),jt(e,this.leftClockEncoder.toUint8Array()),jt(e,this.rightClockEncoder.toUint8Array()),jt(e,Wn(this.infoEncoder)),jt(e,this.stringEncoder.toUint8Array()),jt(e,Wn(this.parentInfoEncoder)),jt(e,this.typeRefEncoder.toUint8Array()),jt(e,this.lenEncoder.toUint8Array()),ph(e,Wn(this.restEncoder)),Wn(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){qa(this.restEncoder,e)}writeBuf(e){jt(this.restEncoder,e)}writeJSON(e){qa(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const kX=(t,e,n,r)=>{r=nl(r,e[0].id.clock);const i=ir(e,r);pe(t.restEncoder,e.length-i),t.writeClient(n),pe(t.restEncoder,r);const s=e[i];s.write(t,r-s.id.clock);for(let o=i+1;o<e.length;o++)e[o].write(t,0)},QD=(t,e,n)=>{const r=new Map;n.forEach((i,s)=>{Qe(e,s)>i&&r.set(s,i)}),Gv(e).forEach((i,s)=>{n.has(s)||r.set(s,0)}),pe(t.restEncoder,r.size),vs(r.entries()).sort((i,s)=>s[0]-i[0]).forEach(([i,s])=>{kX(t,e.clients.get(i),i,s)})},CX=(t,e)=>{const n=Rn(),r=fe(t.restDecoder);for(let i=0;i<r;i++){const s=fe(t.restDecoder),o=new Array(s),l=t.readClient();let a=fe(t.restDecoder);n.set(l,{i:0,refs:o});for(let c=0;c<s;c++){const u=t.readInfo();switch(dh&u){case 0:{const f=t.readLen();o[c]=new dn(de(l,a),f),a+=f;break}case 10:{const f=fe(t.restDecoder);o[c]=new _n(de(l,a),f),a+=f;break}default:{const f=(u&(Cr|Qt))===0,d=new Ke(de(l,a),null,(u&Qt)===Qt?t.readLeftID():null,null,(u&Cr)===Cr?t.readRightID():null,f?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,f&&(u&Wa)===Wa?t.readString():null,kO(t,u));o[c]=d,a+=d.length}}}}return n},EX=(t,e,n)=>{const r=[];let i=vs(n.keys()).sort((h,p)=>h-p);if(i.length===0)return null;const s=()=>{if(i.length===0)return null;let h=n.get(i[i.length-1]);for(;h.refs.length===h.i;)if(i.pop(),i.length>0)h=n.get(i[i.length-1]);else return null;return h};let o=s();if(o===null)return null;const l=new tO,a=new Map,c=(h,p)=>{const m=a.get(h);(m==null||m>p)&&a.set(h,p)};let u=o.refs[o.i++];const f=new Map,d=()=>{for(const h of r){const p=h.id.client,m=n.get(p);m?(m.i--,l.clients.set(p,m.refs.slice(m.i)),n.delete(p),m.i=0,m.refs=[]):l.clients.set(p,[h]),i=i.filter(v=>v!==p)}r.length=0};for(;;){if(u.constructor!==_n){const p=_i(f,u.id.client,()=>Qe(e,u.id.client))-u.id.clock;if(p<0)r.push(u),c(u.id.client,u.id.clock-1),d();else{const m=u.getMissing(t,e);if(m!==null){r.push(u);const v=n.get(m)||{refs:[],i:0};if(v.refs.length===v.i)c(m,Qe(e,m)),d();else{u=v.refs[v.i++];continue}}else(p===0||p<u.length)&&(u.integrate(t,p),f.set(u.id.client,u.id.clock+u.length))}}if(r.length>0)u=r.pop();else if(o!==null&&o.i<o.refs.length)u=o.refs[o.i++];else{if(o=s(),o===null)break;u=o.refs[o.i++]}}if(l.clients.size>0){const h=new Ch;return QD(h,l,new Map),pe(h.restEncoder,0),{missing:a,update:h.toUint8Array()}}return null},bX=(t,e)=>QD(t,e.doc.store,e.beforeState),TX=(t,e,n,r=new sd(t))=>xe(e,i=>{i.local=!1;let s=!1;const o=i.doc,l=o.store,a=CX(r,o),c=EX(i,l,a),u=l.pendingStructs;if(u){for(const[d,h]of u.missing)if(h<Qe(l,d)){s=!0;break}if(c){for(const[d,h]of c.missing){const p=u.missing.get(d);(p==null||p>h)&&u.missing.set(d,h)}u.update=SC([u.update,c.update])}}else l.pendingStructs=c;const f=hC(r,i,l);if(l.pendingDs){const d=new sd(Bv(l.pendingDs));fe(d.restDecoder);const h=hC(d,i,l);f&&h?l.pendingDs=SC([f,h]):l.pendingDs=f||h}else l.pendingDs=f;if(s){const d=l.pendingStructs.update;l.pendingStructs=null,ZD(i.doc,d)}},n,!1),ZD=(t,e,n,r=sd)=>{const i=Bv(e);TX(i,t,n,new r(i))},pC=(t,e,n)=>ZD(t,e,n,yX);class MX{constructor(){this.l=[]}}const mC=()=>new MX,gC=(t,e)=>t.l.push(e),yC=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(i=>e!==i),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},eO=(t,e,n)=>jv(t.l,[e,n]);class go{constructor(e,n){this.client=e,this.clock=n}}const du=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,de=(t,e)=>new go(t,e),NX=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw wn()},Rs=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!GD(e.ds,t.id),uy=(t,e)=>{const n=_i(t.meta,uy,Ho),r=t.doc.store;n.has(e)||(e.sv.forEach((i,s)=>{i<Qe(r,s)&&Si(t,de(s,i))}),XD(t,e.ds,i=>{}),n.add(e))};class tO{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Gv=t=>{const e=new Map;return t.clients.forEach((n,r)=>{const i=n[n.length-1];e.set(r,i.id.clock+i.length)}),e},Qe=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},nO=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw wn()}n.push(e)},ir=(t,e)=>{let n=0,r=t.length-1,i=t[r],s=i.id.clock;if(s===e)return r;let o=nr(e/(s+i.length-1)*r);for(;n<=r;){if(i=t[o],s=i.id.clock,s<=e){if(e<s+i.length)return o;n=o+1}else r=o-1;o=nr((n+r)/2)}throw wn()},_X=(t,e)=>{const n=t.clients.get(e.client);return n[ir(n,e.clock)]},im=_X,fy=(t,e,n)=>{const r=ir(e,n),i=e[r];return i.id.clock<n&&i instanceof Ke?(e.splice(r+1,0,fd(t,i,n-i.id.clock)),r+1):r},Si=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[fy(t,n,e.clock)]},vC=(t,e,n)=>{const r=e.clients.get(n.client),i=ir(r,n.clock),s=r[i];return n.clock!==s.id.clock+s.length-1&&s.constructor!==dn&&r.splice(i+1,0,fd(t,s,n.clock-s.id.clock+1)),s},AX=(t,e,n)=>{const r=t.clients.get(e.id.client);r[ir(r,e.id.clock)]=n},rO=(t,e,n,r,i)=>{if(r===0)return;const s=n+r;let o=fy(t,e,n),l;do l=e[o++],s<l.id.clock+l.length&&fy(t,e,s),i(l);while(o<e.length&&e[o].id.clock<s)};class DX{constructor(e,n,r){this.doc=e,this.deleteSet=new kh,this.beforeState=Gv(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const wC=(t,e)=>e.deleteSet.clients.size===0&&!Sq(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(Yv(e.deleteSet),bX(t,e),Xv(t,e.deleteSet),!0),xC=(t,e,n)=>{const r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&_i(t.changed,e,Ho).add(n)},qu=(t,e)=>{let n=t[e],r=t[e-1],i=e;for(;i>0;n=r,r=t[--i-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof Ke&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const s=e-i;return s&&t.splice(e+1-s,s),s},OX=(t,e,n)=>{for(const[r,i]of t.clients.entries()){const s=e.clients.get(r);for(let o=i.length-1;o>=0;o--){const l=i[o],a=l.clock+l.len;for(let c=ir(s,l.clock),u=s[c];c<s.length&&u.id.clock<a;u=s[++c]){const f=s[c];if(l.clock+l.len<=f.id.clock)break;f instanceof Ke&&f.deleted&&!f.keep&&n(f)&&f.gc(e,!1)}}}},PX=(t,e)=>{t.clients.forEach((n,r)=>{const i=e.clients.get(r);for(let s=n.length-1;s>=0;s--){const o=n[s],l=gD(i.length-1,1+ir(i,o.clock+o.len-1));for(let a=l,c=i[a];a>0&&c.id.clock>=o.clock;c=i[a])a-=1+qu(i,a)}})},iO=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,i=r.store,s=n.deleteSet,o=n._mergeStructs;try{Yv(s),n.afterState=Gv(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const l=[];n.changed.forEach((a,c)=>l.push(()=>{(c._item===null||!c._item.deleted)&&c._callObserver(n,a)})),l.push(()=>{n.changedParentTypes.forEach((a,c)=>{c._dEH.l.length>0&&(c._item===null||!c._item.deleted)&&(a=a.filter(u=>u.target._item===null||!u.target._item.deleted),a.forEach(u=>{u.currentTarget=c,u._path=null}),a.sort((u,f)=>u.path.length-f.path.length),eO(c._dEH,a,n))})}),l.push(()=>r.emit("afterTransaction",[n,r])),jv(l,[]),n._needFormattingCleanup&&QX(n)}finally{r.gc&&OX(s,i,r.gcFilter),PX(s,i),n.afterState.forEach((u,f)=>{const d=n.beforeState.get(f)||0;if(d!==u){const h=i.clients.get(f),p=nl(ir(h,d),1);for(let m=h.length-1;m>=p;)m-=1+qu(h,m)}});for(let u=o.length-1;u>=0;u--){const{client:f,clock:d}=o[u].id,h=i.clients.get(f),p=ir(h,d);p+1<h.length&&qu(h,p+1)>1||p>0&&qu(h,p)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(uX(qv,jD,"[yjs] ",HD,UD,"Changed the client-id because another client seems to be using it."),r.clientID=JD()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const u=new xX;wC(u,n)&&r.emit("update",[u.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const u=new Ch;wC(u,n)&&r.emit("updateV2",[u.toUint8Array(),n.origin,r,n])}const{subdocsAdded:l,subdocsLoaded:a,subdocsRemoved:c}=n;(l.size>0||c.size>0||a.size>0)&&(l.forEach(u=>{u.clientID=r.clientID,u.collectionid==null&&(u.collectionid=r.collectionid),r.subdocs.add(u)}),c.forEach(u=>r.subdocs.delete(u)),r.emit("subdocs",[{loaded:a,added:l,removed:c},r,n]),c.forEach(u=>u.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):iO(t,e+1)}}},xe=(t,e,n=null,r=!0)=>{const i=t._transactionCleanups;let s=!1,o=null;t._transaction===null&&(s=!0,t._transaction=new DX(t,n,r),i.push(t._transaction),i.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{o=e(t._transaction)}finally{if(s){const l=t._transaction===i[0];t._transaction=null,l&&iO(i,0)}}return o};function*RX(t){const e=fe(t.restDecoder);for(let n=0;n<e;n++){const r=fe(t.restDecoder),i=t.readClient();let s=fe(t.restDecoder);for(let o=0;o<r;o++){const l=t.readInfo();if(l===10){const a=fe(t.restDecoder);yield new _n(de(i,s),a),s+=a}else if(dh&l){const a=(l&(Cr|Qt))===0,c=new Ke(de(i,s),null,(l&Qt)===Qt?t.readLeftID():null,null,(l&Cr)===Cr?t.readRightID():null,a?t.readParentInfo()?t.readString():t.readLeftID():null,a&&(l&Wa)===Wa?t.readString():null,kO(t,l));yield c,s+=c.length}else{const a=t.readLen();yield new dn(de(i,s),a),s+=a}}}}class IX{constructor(e,n){this.gen=RX(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===_n);return this.curr}}class LX{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const VX=(t,e)=>{if(t.constructor===dn){const{client:n,clock:r}=t.id;return new dn(de(n,r+e),t.length-e)}else if(t.constructor===_n){const{client:n,clock:r}=t.id;return new _n(de(n,r+e),t.length-e)}else{const n=t,{client:r,clock:i}=n.id;return new Ke(de(r,i+e),null,de(r,i+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},SC=(t,e=sd,n=Ch)=>{if(t.length===1)return t[0];const r=t.map(u=>new e(Bv(u)));let i=r.map(u=>new IX(u,!0)),s=null;const o=new n,l=new LX(o);for(;i=i.filter(d=>d.curr!==null),i.sort((d,h)=>{if(d.curr.id.client===h.curr.id.client){const p=d.curr.id.clock-h.curr.id.clock;return p===0?d.curr.constructor===h.curr.constructor?0:d.curr.constructor===_n?1:-1:p}else return h.curr.id.client-d.curr.id.client}),i.length!==0;){const u=i[0],f=u.curr.id.client;if(s!==null){let d=u.curr,h=!1;for(;d!==null&&d.id.clock+d.length<=s.struct.id.clock+s.struct.length&&d.id.client>=s.struct.id.client;)d=u.next(),h=!0;if(d===null||d.id.client!==f||h&&d.id.clock>s.struct.id.clock+s.struct.length)continue;if(f!==s.struct.id.client)Cl(l,s.struct,s.offset),s={struct:d,offset:0},u.next();else if(s.struct.id.clock+s.struct.length<d.id.clock)if(s.struct.constructor===_n)s.struct.length=d.id.clock+d.length-s.struct.id.clock;else{Cl(l,s.struct,s.offset);const p=d.id.clock-s.struct.id.clock-s.struct.length;s={struct:new _n(de(f,s.struct.id.clock+s.struct.length),p),offset:0}}else{const p=s.struct.id.clock+s.struct.length-d.id.clock;p>0&&(s.struct.constructor===_n?s.struct.length-=p:d=VX(d,p)),s.struct.mergeWith(d)||(Cl(l,s.struct,s.offset),s={struct:d,offset:0},u.next())}}else s={struct:u.curr,offset:0},u.next();for(let d=u.curr;d!==null&&d.id.client===f&&d.id.clock===s.struct.id.clock+s.struct.length&&d.constructor!==_n;d=u.next())Cl(l,s.struct,s.offset),s={struct:d,offset:0}}s!==null&&(Cl(l,s.struct,s.offset),s=null),BX(l);const a=r.map(u=>mX(u)),c=pX(a);return Xv(o,c),o.toUint8Array()},sO=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:Wn(t.encoder.restEncoder)}),t.encoder.restEncoder=hh(),t.written=0)},Cl=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&sO(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),pe(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},BX=t=>{sO(t);const e=t.encoder.restEncoder;pe(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];pe(e,r.written),ph(e,r.restEncoder)}},kC="You must not compute changes after the event-handler fired.";class Eh{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=zX(this.currentTarget,this.target))}deletes(e){return GD(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw rr(kC);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(i=>{if(i!==null){const s=n._map.get(i);let o,l;if(this.adds(s)){let a=s.left;for(;a!==null&&this.adds(a);)a=a.left;if(this.deletes(s))if(a!==null&&this.deletes(a))o="delete",l=Gp(a.content.getContent());else return;else a!==null&&this.deletes(a)?(o="update",l=Gp(a.content.getContent())):(o="add",l=void 0)}else if(this.deletes(s))o="delete",l=Gp(s.content.getContent());else return;e.set(i,{action:o,oldValue:l})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw rr(kC);const n=this.target,r=Ho(),i=Ho(),s=[];if(e={added:r,deleted:i,delta:s,keys:this.keys},this.transaction.changed.get(n).has(null)){let l=null;const a=()=>{l&&s.push(l)};for(let c=n._start;c!==null;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((l===null||l.delete===void 0)&&(a(),l={delete:0}),l.delete+=c.length,i.add(c)):this.adds(c)?((l===null||l.insert===void 0)&&(a(),l={insert:[]}),l.insert=l.insert.concat(c.content.getContent()),r.add(c)):((l===null||l.retain===void 0)&&(a(),l={retain:0}),l.retain+=c.length);l!==null&&l.retain===void 0&&a()}this._changes=e}return e}}const zX=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,i=e._item.parent._start;for(;i!==e._item&&i!==null;)!i.deleted&&i.countable&&(r+=i.length),i=i.right;n.unshift(r)}e=e._item.parent}return n},xt=()=>{fX("Invalid access: Add Yjs type to a document before reading data.")},oO=80;let Jv=0;class $X{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=Jv++}}const FX=t=>{t.timestamp=Jv++},lO=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=Jv++},jX=(t,e,n)=>{if(t.length>=oO){const r=t.reduce((i,s)=>i.timestamp<s.timestamp?i:s);return lO(r,e,n),r}else{const r=new $X(e,n);return t.push(r),r}},bh=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((s,o)=>Hu(e-s.index)<Hu(e-o.index)?s:o);let r=t._start,i=0;for(n!==null&&(r=n.p,i=n.index,FX(n));r.right!==null&&i<e;){if(!r.deleted&&r.countable){if(e<i+r.length)break;i+=r.length}r=r.right}for(;r.left!==null&&i>e;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return n!==null&&Hu(n.index-i)<r.parent.length/oO?(lO(n,r,i),n):jX(t._searchMarker,r,i)},Qa=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const i=t[r];if(n>0){let s=i.p;for(s.marker=!1;s&&(s.deleted||!s.countable);)s=s.left,s&&!s.deleted&&s.countable&&(i.index-=s.length);if(s===null||s.marker===!0){t.splice(r,1);continue}i.p=s,s.marker=!0}(e<i.index||n>0&&e===i.index)&&(i.index=nl(e,i.index+n))}},Th=(t,e,n)=>{const r=t,i=e.changedParentTypes;for(;_i(i,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;eO(r._eH,n,e)};class ft{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=mC(),this._dEH=mC(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw In()}clone(){throw In()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){gC(this._eH,e)}observeDeep(e){gC(this._dEH,e)}unobserve(e){yC(this._eH,e)}unobserveDeep(e){yC(this._dEH,e)}toJSON(){}}const aO=(t,e,n)=>{t.doc??xt(),e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const i=[];let s=t._start;for(;s!==null&&r>0;){if(s.countable&&!s.deleted){const o=s.content.getContent();if(o.length<=e)e-=o.length;else{for(let l=e;l<o.length&&r>0;l++)i.push(o[l]),r--;e=0}}s=s.right}return i},cO=t=>{t.doc??xt();const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let i=0;i<r.length;i++)e.push(r[i])}n=n.right}return e},Za=(t,e)=>{let n=0,r=t._start;for(t.doc??xt();r!==null;){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let s=0;s<i.length;s++)e(i[s],n++,t)}r=r.right}},uO=(t,e)=>{const n=[];return Za(t,(r,i)=>{n.push(e(r,i,t))}),n},HX=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const i=n[r++];return n.length<=r&&(n=null),{done:!1,value:i}}}},fO=(t,e)=>{t.doc??xt();const n=bh(t,e);let r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},od=(t,e,n,r)=>{let i=n;const s=t.doc,o=s.clientID,l=s.store,a=n===null?e._start:n.right;let c=[];const u=()=>{c.length>0&&(i=new Ke(de(o,Qe(l,o)),i,i&&i.lastId,a,a&&a.id,e,null,new xs(c)),i.integrate(t,0),c=[])};r.forEach(f=>{if(f===null)c.push(f);else switch(f.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(f);break;default:switch(u(),f.constructor){case Uint8Array:case ArrayBuffer:i=new Ke(de(o,Qe(l,o)),i,i&&i.lastId,a,a&&a.id,e,null,new Sc(new Uint8Array(f))),i.integrate(t,0);break;case il:i=new Ke(de(o,Qe(l,o)),i,i&&i.lastId,a,a&&a.id,e,null,new kc(f)),i.integrate(t,0);break;default:if(f instanceof ft)i=new Ke(de(o,Qe(l,o)),i,i&&i.lastId,a,a&&a.id,e,null,new Pr(f)),i.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),u()},dO=()=>rr("Length exceeded!"),hO=(t,e,n,r)=>{if(n>e._length)throw dO();if(n===0)return e._searchMarker&&Qa(e._searchMarker,n,r.length),od(t,e,null,r);const i=n,s=bh(e,n);let o=e._start;for(s!==null&&(o=s.p,n-=s.index,n===0&&(o=o.prev,n+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(n<=o.length){n<o.length&&Si(t,de(o.id.client,o.id.clock+n));break}n-=o.length}return e._searchMarker&&Qa(e._searchMarker,i,r.length),od(t,e,o,r)},UX=(t,e,n)=>{let i=(e._searchMarker||[]).reduce((s,o)=>o.index>s.index?o:s,{index:0,p:e._start}).p;if(i)for(;i.right;)i=i.right;return od(t,e,i,n)},pO=(t,e,n,r)=>{if(r===0)return;const i=n,s=r,o=bh(e,n);let l=e._start;for(o!==null&&(l=o.p,n-=o.index);l!==null&&n>0;l=l.right)!l.deleted&&l.countable&&(n<l.length&&Si(t,de(l.id.client,l.id.clock+n)),n-=l.length);for(;r>0&&l!==null;)l.deleted||(r<l.length&&Si(t,de(l.id.client,l.id.clock+r)),l.delete(t),r-=l.length),l=l.right;if(r>0)throw dO();e._searchMarker&&Qa(e._searchMarker,i,-s+r)},ld=(t,e,n)=>{const r=e._map.get(n);r!==void 0&&r.delete(t)},Qv=(t,e,n,r)=>{const i=e._map.get(n)||null,s=t.doc,o=s.clientID;let l;if(r==null)l=new xs([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:l=new xs([r]);break;case Uint8Array:l=new Sc(r);break;case il:l=new kc(r);break;default:if(r instanceof ft)l=new Pr(r);else throw new Error("Unexpected content type")}new Ke(de(o,Qe(s.store,o)),i,i&&i.lastId,null,null,e,n,l).integrate(t,0)},Zv=(t,e)=>{t.doc??xt();const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},mO=t=>{const e={};return t.doc??xt(),t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},gO=(t,e)=>{t.doc??xt();const n=t._map.get(e);return n!==void 0&&!n.deleted},WX=(t,e)=>{const n={};return t._map.forEach((r,i)=>{let s=r;for(;s!==null&&(!e.sv.has(s.id.client)||s.id.clock>=(e.sv.get(s.id.client)||0));)s=s.left;s!==null&&Rs(s,e)&&(n[i]=s.content.getContent()[s.length-1])}),n},hu=t=>(t.doc??xt(),dX(t._map.entries(),e=>!e[1].deleted));class KX extends Eh{}class yo extends ft{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new yo;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new yo}clone(){const e=new yo;return e.insert(0,this.toArray().map(n=>n instanceof ft?n.clone():n)),e}get length(){return this.doc??xt(),this._length}_callObserver(e,n){super._callObserver(e,n),Th(this,e,new KX(this,e))}insert(e,n){this.doc!==null?xe(this.doc,r=>{hO(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?xe(this.doc,n=>{UX(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?xe(this.doc,r=>{pO(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return fO(this,e)}toArray(){return cO(this)}slice(e=0,n=this.length){return aO(this,e,n)}toJSON(){return this.map(e=>e instanceof ft?e.toJSON():e)}map(e){return uO(this,e)}forEach(e){Za(this,e)}[Symbol.iterator](){return HX(this)}_write(e){e.writeTypeRef(yG)}}const qX=t=>new yo;class YX extends Eh{constructor(e,n,r){super(e,n),this.keysChanged=r}}class Ko extends ft{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,i)=>{this.set(i,r)}),this._prelimContent=null}_copy(){return new Ko}clone(){const e=new Ko;return this.forEach((n,r)=>{e.set(r,n instanceof ft?n.clone():n)}),e}_callObserver(e,n){Th(this,e,new YX(this,e,n))}toJSON(){this.doc??xt();const e={};return this._map.forEach((n,r)=>{if(!n.deleted){const i=n.content.getContent()[n.length-1];e[r]=i instanceof ft?i.toJSON():i}}),e}get size(){return[...hu(this)].length}keys(){return rm(hu(this),e=>e[0])}values(){return rm(hu(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return rm(hu(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??xt(),this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?xe(this.doc,n=>{ld(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?xe(this.doc,r=>{Qv(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return Zv(this,e)}has(e){return gO(this,e)}clear(){this.doc!==null?xe(this.doc,e=>{this.forEach(function(n,r,i){ld(e,i,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(vG)}}const XX=t=>new Ko,ei=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&dY(t,e);class dy{constructor(e,n,r,i){this.left=e,this.right=n,this.index=r,this.currentAttributes=i}forward(){switch(this.right===null&&wn(),this.right.content.constructor){case qe:this.right.deleted||sl(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const CC=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case qe:e.right.deleted||sl(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&Si(t,de(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},pu=(t,e,n,r)=>{const i=new Map,s=r?bh(e,n):null;if(s){const o=new dy(s.p.left,s.p,s.index,i);return CC(t,o,n-s.index)}else{const o=new dy(null,e._start,0,i);return CC(t,o,n)}},yO=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===qe&&ei(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const i=t.doc,s=i.clientID;r.forEach((o,l)=>{const a=n.left,c=n.right,u=new Ke(de(s,Qe(i.store,s)),a,a&&a.lastId,c,c&&c.id,e,null,new qe(l,o));u.integrate(t,0),n.right=u,n.forward()})},sl=(t,e)=>{const{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},vO=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===qe&&ei(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},wO=(t,e,n,r)=>{const i=t.doc,s=i.clientID,o=new Map;for(const l in r){const a=r[l],c=n.currentAttributes.get(l)??null;if(!ei(c,a)){o.set(l,c);const{left:u,right:f}=n;n.right=new Ke(de(s,Qe(i.store,s)),u,u&&u.lastId,f,f&&f.id,e,null,new qe(l,a)),n.right.integrate(t,0),n.forward()}}return o},sm=(t,e,n,r,i)=>{n.currentAttributes.forEach((d,h)=>{i[h]===void 0&&(i[h]=null)});const s=t.doc,o=s.clientID;vO(n,i);const l=wO(t,e,n,i),a=r.constructor===String?new sr(r):r instanceof ft?new Pr(r):new bs(r);let{left:c,right:u,index:f}=n;e._searchMarker&&Qa(e._searchMarker,n.index,a.getLength()),u=new Ke(de(o,Qe(s.store,o)),c,c&&c.lastId,u,u&&u.id,e,null,a),u.integrate(t,0),n.right=u,n.index=f,n.forward(),yO(t,e,n,l)},EC=(t,e,n,r,i)=>{const s=t.doc,o=s.clientID;vO(n,i);const l=wO(t,e,n,i);e:for(;n.right!==null&&(r>0||l.size>0&&(n.right.deleted||n.right.content.constructor===qe));){if(!n.right.deleted)switch(n.right.content.constructor){case qe:{const{key:a,value:c}=n.right.content,u=i[a];if(u!==void 0){if(ei(u,c))l.delete(a);else{if(r===0)break e;l.set(a,c)}n.right.delete(t)}else n.currentAttributes.set(a,c);break}default:r<n.right.length&&Si(t,de(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let a="";for(;r>0;r--)a+=`
`;n.right=new Ke(de(o,Qe(s.store,o)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new sr(a)),n.right.integrate(t,0),n.forward()}yO(t,e,n,l)},xO=(t,e,n,r,i)=>{let s=e;const o=Rn();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===qe){const c=s.content;o.set(c.key,c)}s=s.right}let l=0,a=!1;for(;e!==s;){if(n===e&&(a=!0),!e.deleted){const c=e.content;switch(c.constructor){case qe:{const{key:u,value:f}=c,d=r.get(u)??null;(o.get(u)!==c||d===f)&&(e.delete(t),l++,!a&&(i.get(u)??null)===f&&d!==f&&(d===null?i.delete(u):i.set(u,d))),!a&&!e.deleted&&sl(i,c);break}}}e=e.right}return l},GX=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===qe){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},JX=t=>{let e=0;return xe(t.doc,n=>{let r=t._start,i=t._start,s=Rn();const o=iy(s);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case qe:sl(o,i.content);break;default:e+=xO(n,r,i,s,o),s=iy(o),r=i;break}i=i.right}}),e},QX=t=>{const e=new Set,n=t.doc;for(const[r,i]of t.afterState.entries()){const s=t.beforeState.get(r)||0;i!==s&&rO(t,n.store.clients.get(r),s,i,o=>{!o.deleted&&o.content.constructor===qe&&o.constructor!==dn&&e.add(o.parent)})}xe(n,r=>{XD(t,t.deleteSet,i=>{if(i instanceof dn||!i.parent._hasFormatting||e.has(i.parent))return;const s=i.parent;i.content.constructor===qe?e.add(s):GX(r,i)});for(const i of e)JX(i)})},bC=(t,e,n)=>{const r=n,i=iy(e.currentAttributes),s=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case Pr:case bs:case sr:n<e.right.length&&Si(t,de(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}s&&xO(t,s,e.right,i,e.currentAttributes);const o=(e.left||e.right).parent;return o._searchMarker&&Qa(o._searchMarker,e.index,-r+n),e};class ZX extends Eh{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];xe(e,r=>{const i=new Map,s=new Map;let o=this.target._start,l=null;const a={};let c="",u=0,f=0;const d=()=>{if(l!==null){let h=null;switch(l){case"delete":f>0&&(h={delete:f}),f=0;break;case"insert":(typeof c=="object"||c.length>0)&&(h={insert:c},i.size>0&&(h.attributes={},i.forEach((p,m)=>{p!==null&&(h.attributes[m]=p)}))),c="";break;case"retain":u>0&&(h={retain:u},fY(a)||(h.attributes=aY({},a))),u=0;break}h&&n.push(h),l=null}};for(;o!==null;){switch(o.content.constructor){case Pr:case bs:this.adds(o)?this.deletes(o)||(d(),l="insert",c=o.content.getContent()[0],d()):this.deletes(o)?(l!=="delete"&&(d(),l="delete"),f+=1):o.deleted||(l!=="retain"&&(d(),l="retain"),u+=1);break;case sr:this.adds(o)?this.deletes(o)||(l!=="insert"&&(d(),l="insert"),c+=o.content.str):this.deletes(o)?(l!=="delete"&&(d(),l="delete"),f+=o.length):o.deleted||(l!=="retain"&&(d(),l="retain"),u+=o.length);break;case qe:{const{key:h,value:p}=o.content;if(this.adds(o)){if(!this.deletes(o)){const m=i.get(h)??null;ei(m,p)?p!==null&&o.delete(r):(l==="retain"&&d(),ei(p,s.get(h)??null)?delete a[h]:a[h]=p)}}else if(this.deletes(o)){s.set(h,p);const m=i.get(h)??null;ei(m,p)||(l==="retain"&&d(),a[h]=m)}else if(!o.deleted){s.set(h,p);const m=a[h];m!==void 0&&(ei(m,p)?m!==null&&o.delete(r):(l==="retain"&&d(),p===null?delete a[h]:a[h]=p))}o.deleted||(l==="insert"&&d(),sl(i,o.content));break}}o=o.right}for(d();n.length>0;){const h=n[n.length-1];if(h.retain!==void 0&&h.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class qo extends ft{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??xt(),this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new qo}clone(){const e=new qo;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const r=new ZX(this,e,n);Th(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??xt();let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===sr&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?xe(this.doc,r=>{const i=new dy(null,this._start,0,new Map);for(let s=0;s<e.length;s++){const o=e[s];if(o.insert!==void 0){const l=!n&&typeof o.insert=="string"&&s===e.length-1&&i.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof l!="string"||l.length>0)&&sm(r,this,i,l,o.attributes||{})}else o.retain!==void 0?EC(r,this,i,o.retain,o.attributes||{}):o.delete!==void 0&&bC(r,i,o.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){this.doc??xt();const i=[],s=new Map,o=this.doc;let l="",a=this._start;function c(){if(l.length>0){const f={};let d=!1;s.forEach((p,m)=>{d=!0,f[m]=p});const h={insert:l};d&&(h.attributes=f),i.push(h),l=""}}const u=()=>{for(;a!==null;){if(Rs(a,e)||n!==void 0&&Rs(a,n))switch(a.content.constructor){case sr:{const f=s.get("ychange");e!==void 0&&!Rs(a,e)?(f===void 0||f.user!==a.id.client||f.type!=="removed")&&(c(),s.set("ychange",r?r("removed",a.id):{type:"removed"})):n!==void 0&&!Rs(a,n)?(f===void 0||f.user!==a.id.client||f.type!=="added")&&(c(),s.set("ychange",r?r("added",a.id):{type:"added"})):f!==void 0&&(c(),s.delete("ychange")),l+=a.content.str;break}case Pr:case bs:{c();const f={insert:a.content.getContent()[0]};if(s.size>0){const d={};f.attributes=d,s.forEach((h,p)=>{d[p]=h})}i.push(f);break}case qe:Rs(a,e)&&(c(),sl(s,a.content));break}a=a.right}c()};return e||n?xe(o,f=>{e&&uy(f,e),n&&uy(f,n),u()},"cleanup"):u(),i}insert(e,n,r){if(n.length<=0)return;const i=this.doc;i!==null?xe(i,s=>{const o=pu(s,this,e,!r);r||(r={},o.currentAttributes.forEach((l,a)=>{r[a]=l})),sm(s,this,o,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r){const i=this.doc;i!==null?xe(i,s=>{const o=pu(s,this,e,!r);sm(s,this,o,n,r||{})}):this._pending.push(()=>this.insertEmbed(e,n,r||{}))}delete(e,n){if(n===0)return;const r=this.doc;r!==null?xe(r,i=>{bC(i,pu(i,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;const i=this.doc;i!==null?xe(i,s=>{const o=pu(s,this,e,!1);o.right!==null&&EC(s,this,o,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?xe(this.doc,n=>{ld(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?xe(this.doc,r=>{Qv(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return Zv(this,e)}getAttributes(){return mO(this)}_write(e){e.writeTypeRef(wG)}}const eG=t=>new qo;class om{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??xt()}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===Yo||n.constructor===ws)&&n._start!==null)e=n._start;else for(;e!==null;){const r=e.next;if(r!==null){e=r;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class ws extends ft{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new ws}clone(){const e=new ws;return e.insert(0,this.toArray().map(n=>n instanceof ft?n.clone():n)),e}get length(){return this.doc??xt(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new om(this,e)}querySelector(e){e=e.toUpperCase();const r=new om(this,i=>i.nodeName&&i.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),vs(new om(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){Th(this,e,new rG(this,n,e))}toString(){return uO(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){const i=e.createDocumentFragment();return r!==void 0&&r._createAssociation(i,this),Za(this,s=>{i.insertBefore(s.toDOM(e,n,r),null)}),i}insert(e,n){this.doc!==null?xe(this.doc,r=>{hO(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)xe(this.doc,r=>{const i=e&&e instanceof ft?e._item:e;od(r,this,i,n)});else{const r=this._prelimContent,i=e===null?0:r.findIndex(s=>s===e)+1;if(i===0&&e!==null)throw rr("Reference item not found");r.splice(i,0,...n)}}delete(e,n=1){this.doc!==null?xe(this.doc,r=>{pO(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return cO(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return fO(this,e)}slice(e=0,n=this.length){return aO(this,e,n)}forEach(e){Za(this,e)}_write(e){e.writeTypeRef(SG)}}const tG=t=>new ws;class Yo extends ws{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,i)=>{this.setAttribute(i,r)}),this._prelimAttrs=null}_copy(){return new Yo(this.nodeName)}clone(){const e=new Yo(this.nodeName),n=this.getAttributes();return uY(n,(r,i)=>{e.setAttribute(i,r)}),e.insert(0,this.toArray().map(r=>r instanceof ft?r.clone():r)),e}toString(){const e=this.getAttributes(),n=[],r=[];for(const l in e)r.push(l);r.sort();const i=r.length;for(let l=0;l<i;l++){const a=r[l];n.push(a+'="'+e[a]+'"')}const s=this.nodeName.toLocaleLowerCase(),o=n.length>0?" "+n.join(" "):"";return`<${s}${o}>${super.toString()}</${s}>`}removeAttribute(e){this.doc!==null?xe(this.doc,n=>{ld(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?xe(this.doc,r=>{Qv(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return Zv(this,e)}hasAttribute(e){return gO(this,e)}getAttributes(e){return e?WX(this,e):mO(this)}toDOM(e=document,n={},r){const i=e.createElement(this.nodeName),s=this.getAttributes();for(const o in s){const l=s[o];typeof l=="string"&&i.setAttribute(o,l)}return Za(this,o=>{i.appendChild(o.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(i,this),i}_write(e){e.writeTypeRef(xG),e.writeKey(this.nodeName)}}const nG=t=>new Yo(t.readKey());class rG extends Eh{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}}class ad extends Ko{constructor(e){super(),this.hookName=e}_copy(){return new ad(this.hookName)}clone(){const e=new ad(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){const i=n[this.hookName];let s;return i!==void 0?s=i.createDom(this):s=document.createElement(this.hookName),s.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(s,this),s}_write(e){e.writeTypeRef(kG),e.writeKey(this.hookName)}}const iG=t=>new ad(t.readKey());class cd extends qo{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new cd}clone(){const e=new cd;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){const i=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(i,this),i}toString(){return this.toDelta().map(e=>{const n=[];for(const i in e.attributes){const s=[];for(const o in e.attributes[i])s.push({key:o,value:e.attributes[i][o]});s.sort((o,l)=>o.key<l.key?-1:1),n.push({nodeName:i,attrs:s})}n.sort((i,s)=>i.nodeName<s.nodeName?-1:1);let r="";for(let i=0;i<n.length;i++){const s=n[i];r+=`<${s.nodeName}`;for(let o=0;o<s.attrs.length;o++){const l=s.attrs[o];r+=` ${l.key}="${l.value}"`}r+=">"}r+=e.insert;for(let i=n.length-1;i>=0;i--)r+=`</${n[i].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(CG)}}const sG=t=>new cd;class ew{constructor(e,n){this.id=e,this.length=n}get deleted(){throw In()}mergeWith(e){return!1}write(e,n,r){throw In()}integrate(e,n){throw In()}}const oG=0;class dn extends ew{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),nO(e.doc.store,this)}write(e,n){e.writeInfo(oG),e.writeLen(this.length-n)}getMissing(e,n){return null}}class Sc{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Sc(this.content)}splice(e){throw In()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const lG=t=>new Sc(t.readBuf());class ec{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new ec(this.len)}splice(e){const n=new ec(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){id(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const aG=t=>new ec(t.readLen()),SO=(t,e)=>new il({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class kc{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new kc(SO(this.doc.guid,this.opts))}splice(e){throw In()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const cG=t=>new kc(SO(t.readString(),t.readAny()));class bs{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new bs(this.embed)}splice(e){throw In()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const uG=t=>new bs(t.readJSON());class qe{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new qe(this.key,this.value)}splice(e){throw In()}mergeWith(e){return!1}integrate(e,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const fG=t=>new qe(t.readKey(),t.readJSON());class ud{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new ud(this.arr)}splice(e){const n=new ud(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){const s=this.arr[i];e.writeString(s===void 0?"undefined":JSON.stringify(s))}}getRef(){return 2}}const dG=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const i=t.readString();i==="undefined"?n.push(void 0):n.push(JSON.parse(i))}return new ud(n)},hG=ed("node_env")==="development";class xs{constructor(e){this.arr=e,hG&&CD(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new xs(this.arr)}splice(e){const n=new xs(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){const s=this.arr[i];e.writeAny(s)}}getRef(){return 8}}const pG=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new xs(n)};class sr{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new sr(this.str)}splice(e){const n=new sr(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"",n.str=""+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const mG=t=>new sr(t.readString()),gG=[qX,XX,eG,nG,tG,iG,sG],yG=0,vG=1,wG=2,xG=3,SG=4,kG=5,CG=6;class Pr{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Pr(this.type._copy())}splice(e){throw In()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const EG=t=>new Pr(gG[t.readTypeRef()](t)),fd=(t,e,n)=>{const{client:r,clock:i}=e.id,s=new Ke(de(r,i+n),e,de(r,i+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&s.markDeleted(),e.keep&&(s.keep=!0),e.redone!==null&&(s.redone=de(e.redone.client,e.redone.clock+n)),e.right=s,s.right!==null&&(s.right.left=s),t._mergeStructs.push(s),s.parentSub!==null&&s.right===null&&s.parent._map.set(s.parentSub,s),e.length=n,s};class Ke extends ew{constructor(e,n,r,i,s,o,l,a){super(e,a.getLength()),this.origin=r,this.left=n,this.right=i,this.rightOrigin=s,this.parent=o,this.parentSub=l,this.redone=null,this.content=a,this.info=this.content.isCountable()?tC:0}set marker(e){(this.info&Qp)>0!==e&&(this.info^=Qp)}get marker(){return(this.info&Qp)>0}get keep(){return(this.info&eC)>0}set keep(e){this.keep!==e&&(this.info^=eC)}get countable(){return(this.info&tC)>0}get deleted(){return(this.info&Jp)>0}set deleted(e){this.deleted!==e&&(this.info^=Jp)}markDeleted(){this.info|=Jp}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Qe(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Qe(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===go&&this.id.client!==this.parent.client&&this.parent.clock>=Qe(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=vC(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Si(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===dn||this.right&&this.right.constructor===dn)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===Ke?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===Ke&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===go){const r=im(n,this.parent);r.constructor===dn?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=vC(e,e.doc.store,de(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,i;if(r!==null)i=r.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;const s=new Set,o=new Set;for(;i!==null&&i!==this.right;){if(o.add(i),s.add(i),du(this.origin,i.origin)){if(i.id.client<this.id.client)r=i,s.clear();else if(du(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&o.has(im(e.doc.store,i.origin)))s.has(im(e.doc.store,i.origin))||(r=i,s.clear());else break;i=i.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),nO(e.doc.store,this),this.content.integrate(e,this),xC(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new dn(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:de(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&du(e.origin,this.lastId)&&this.right===e&&du(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),id(e.deleteSet,this.id.client,this.id.clock,this.length),xC(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw wn();this.content.gc(e),n?AX(e,this,new dn(this.id,this.length)):this.content=new ec(this.length)}write(e,n){const r=n>0?de(this.id.client,this.id.clock+n-1):this.origin,i=this.rightOrigin,s=this.parentSub,o=this.content.getRef()&dh|(r===null?0:Qt)|(i===null?0:Cr)|(s===null?0:Wa);if(e.writeInfo(o),r!==null&&e.writeLeftID(r),i!==null&&e.writeRightID(i),r===null&&i===null){const l=this.parent;if(l._item!==void 0){const a=l._item;if(a===null){const c=NX(l);e.writeParentInfo(!0),e.writeString(c)}else e.writeParentInfo(!1),e.writeLeftID(a.id)}else l.constructor===String?(e.writeParentInfo(!0),e.writeString(l)):l.constructor===go?(e.writeParentInfo(!1),e.writeLeftID(l)):wn();s!==null&&e.writeString(s)}this.content.write(e,n)}}const kO=(t,e)=>bG[e&dh](t),bG=[()=>{wn()},aG,dG,lG,mG,uG,fG,EG,pG,cG,()=>{wn()}],TG=10;class _n extends ew{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){wn()}write(e,n){e.writeInfo(TG),pe(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const CO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},EO="__ $YJS$ __";CO[EO]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");CO[EO]=!0;function MG({node:t,onClose:e}){const n=TO(),{user:r,users:i}=NO(),{updateNode:s}=tw(),[o,l]=b.useState(t.title||""),[a,c]=b.useState(t.tags||[]),[u,f]=b.useState(""),[d,h]=b.useState(!1),[p,m]=b.useState(null),[v,g]=b.useState([]),[w,y]=b.useState([]),x=b.useRef(null),S=b.useRef(null),C=b.useRef(null);b.useEffect(()=>(x.current=new il,()=>{var D;(D=x.current)==null||D.destroy()}),[]);const k=p7({extensions:[gq.configure({heading:{levels:[1,2,3]}}),yq.configure({placeholder:" ..."}),wq.configure({inline:!0,allowBase64:!0}),aD.configure({HTMLAttributes:{class:"code-block"}})],content:"",onUpdate:({editor:D})=>{E(D.getJSON())}});b.useEffect(()=>{if(!(!n||!t.id))return n.emit("node:join",t.id),n.on("node:sync",({nodeId:D,state:B})=>{if(D===t.id&&x.current)try{const z=Uint8Array.from(atob(B),U=>U.charCodeAt(0));pC(x.current,z)}catch(z){console.error("Error applying sync:",z)}}),n.on("node:update",({nodeId:D,update:B})=>{if(D===t.id&&x.current)try{const z=Uint8Array.from(atob(B),U=>U.charCodeAt(0));pC(x.current,z)}catch(z){console.error("Error applying update:",z)}}),n.on("cursor:update",({userId:D,user:B,cursor:z})=>{g(U=>{const H=U.filter(X=>X.userId!==D);return z?[...H,{userId:D,user:B,cursor:z}]:H})}),n.on("user:joined",D=>{y(B=>B.find(z=>z.id===D.id)?B:[...B,D])}),n.on("user:left",D=>{y(B=>B.filter(z=>z.id!==D.id)),g(B=>B.filter(z=>z.userId!==D.id))}),()=>{n.emit("node:leave",t.id),n.off("node:sync"),n.off("node:update"),n.off("cursor:update"),n.off("user:joined"),n.off("user:left")}},[n,t.id]),b.useEffect(()=>{if(k&&t.content)try{const D=typeof t.content=="string"?JSON.parse(t.content):t.content;D.type==="doc"&&k.commands.setContent(D)}catch(D){console.error("Error loading content:",D)}},[k,t.id]);const E=b.useCallback(D=>{S.current&&clearTimeout(S.current),S.current=setTimeout(async()=>{h(!0);try{await s(t.id,{content:D}),m(new Date)}catch(B){console.error("Save error:",B)}finally{h(!1)}},2e3)},[t.id,s]),N=b.useCallback(D=>{const B=D.target.value;l(B),S.current&&clearTimeout(S.current),S.current=setTimeout(async()=>{await s(t.id,{title:B}),m(new Date)},1e3)},[t.id,s]),I=b.useCallback(D=>{if(D.key==="Enter"&&u.trim()){const B=u.trim().toLowerCase();if(!a.includes(B)){const z=[...a,B];c(z),s(t.id,{tags:z})}f("")}},[u,a,t.id,s]),O=b.useCallback(D=>{const B=a.filter(z=>z!==D);c(B),s(t.id,{tags:B})},[a,t.id,s]),L=b.useCallback(async D=>{var z;D.preventDefault();const B=Array.from(((z=D.dataTransfer)==null?void 0:z.files)||[]);for(const U of B)if(U.type.startsWith("image/")){const H=new FormData;H.append("file",U),H.append("nodeId",t.id);try{const G=await(await fetch("/api/upload",{method:"POST",body:H})).json();G.url&&k&&k.chain().focus().setImage({src:G.url}).run()}catch(X){console.error("Upload error:",X)}}},[k,t.id]),$=D=>{D.preventDefault()},_=()=>k==null?void 0:k.chain().focus().toggleBold().run(),V=()=>k==null?void 0:k.chain().focus().toggleItalic().run(),P=()=>k==null?void 0:k.chain().focus().toggleCode().run(),R=()=>k==null?void 0:k.chain().focus().toggleCodeBlock().run(),T=D=>k==null?void 0:k.chain().focus().toggleHeading({level:D}).run(),A=D=>D?new Date(D).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"";return M.jsx(_j,{children:M.jsx(Bf.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,children:M.jsxs(Bf.div,{className:"article-modal",initial:{opacity:0,y:50,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.95},transition:{duration:.25,type:"spring",damping:25},onClick:D=>D.stopPropagation(),children:[M.jsxs("header",{className:"modal-header",children:[M.jsx("input",{type:"text",className:"modal-title-input",value:o,onChange:N,placeholder:" "}),M.jsx("button",{className:"modal-close-btn",onClick:e,children:""})]}),M.jsxs("div",{className:"modal-meta",children:[M.jsxs("span",{className:"meta-item",children:[M.jsx("span",{className:"meta-label",children:":"}),A(t.created_at)]}),M.jsxs("span",{className:"meta-item",children:[M.jsx("span",{className:"meta-label",children:":"}),A(t.updated_at)]}),w.length>0&&M.jsxs("span",{className:"meta-item editors",children:[M.jsx("span",{className:"meta-label",children:":"}),w.map(D=>M.jsx("span",{className:"editor-badge",style:{backgroundColor:D.color},children:D.name},D.id))]}),d&&M.jsx("span",{className:"saving-indicator",children:"..."}),!d&&p&&M.jsx("span",{className:"saved-indicator",children:" "})]}),M.jsxs("div",{className:"modal-tags",children:[a.map(D=>M.jsxs("span",{className:"tag-chip",children:[D,M.jsx("button",{className:"tag-remove",onClick:()=>O(D),children:""})]},D)),M.jsx("input",{type:"text",className:"tag-input",value:u,onChange:D=>f(D.target.value),onKeyDown:I,placeholder:" ..."})]}),M.jsxs("div",{className:"editor-toolbar",children:[M.jsx("button",{className:`toolbar-btn ${k!=null&&k.isActive("heading",{level:1})?"active":""}`,onClick:()=>T(1),title:" 1",children:"H1"}),M.jsx("button",{className:`toolbar-btn ${k!=null&&k.isActive("heading",{level:2})?"active":""}`,onClick:()=>T(2),title:" 2",children:"H2"}),M.jsx("div",{className:"toolbar-divider"}),M.jsx("button",{className:`toolbar-btn ${k!=null&&k.isActive("bold")?"active":""}`,onClick:_,title:" (Ctrl+B)",children:"B"}),M.jsx("button",{className:`toolbar-btn italic ${k!=null&&k.isActive("italic")?"active":""}`,onClick:V,title:" (Ctrl+I)",children:"I"}),M.jsx("button",{className:`toolbar-btn mono ${k!=null&&k.isActive("code")?"active":""}`,onClick:P,title:"",children:"</>"}),M.jsx("button",{className:`toolbar-btn ${k!=null&&k.isActive("codeBlock")?"active":""}`,onClick:R,title:" ",children:"{ }"})]}),M.jsxs("div",{ref:C,className:"editor-container",onDrop:L,onDragOver:$,children:[M.jsx(i7,{editor:k,className:"tiptap-editor"}),v.map(({userId:D,user:B,cursor:z})=>M.jsx("div",{className:"remote-cursor",style:{left:z.x,top:z.y,borderColor:B.color},children:M.jsx("span",{className:"cursor-label",style:{backgroundColor:B.color},children:B.name})},D))]}),M.jsx("footer",{className:"modal-footer",children:M.jsx("span",{className:"footer-hint",children:"       "})})]})})})}function NG({onSearch:t,results:e,onSelect:n}){const[r,i]=b.useState(""),[s,o]=b.useState(!1),l=b.useRef(null),a=b.useRef(null);b.useEffect(()=>(a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{t(r)},300),()=>{a.current&&clearTimeout(a.current)}),[r,t]),b.useEffect(()=>{o(e.length>0||r.length>0&&e.length===0)},[e,r]),b.useEffect(()=>{const u=f=>{l.current&&!l.current.contains(f.target)&&o(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]);const c=u=>{n(u),i(""),o(!1)};return M.jsxs("div",{className:"search-container",ref:l,children:[M.jsxs("div",{className:"search-input-wrapper",children:[M.jsx("span",{className:"search-icon",children:""}),M.jsx("input",{type:"text",className:"search-input",placeholder:"   ...",value:r,onChange:u=>i(u.target.value),onFocus:()=>r&&o(!0)})]}),s&&M.jsx("div",{className:"search-results",children:e.length>0?e.map(u=>M.jsxs("div",{className:"search-result-item",onClick:()=>c(u.id),children:[M.jsx("div",{className:"search-result-title",children:u.title}),M.jsxs("div",{className:"search-result-path",children:["ID: ",u.id.substring(0,8),"..."]})]},u.id)):r.length>0?M.jsx("div",{className:"search-no-results",children:"  "}):null})]})}function _G(){const{user:t,users:e}=NO(),n=TO(),[r,i]=b.useState(!1),[s,o]=b.useState(""),l=d=>{d.preventDefault(),s.trim()&&n&&(n.emit("user:setName",s.trim()),i(!1))},a=()=>{o((t==null?void 0:t.name)||""),i(!0)},c=d=>(d==null?void 0:d.split("-").map(h=>h[0]).join("").toUpperCase().substring(0,2))||"??",u=e.slice(0,5),f=e.length-5;return M.jsxs("div",{className:"user-presence",children:[M.jsxs("div",{className:"users-avatars",children:[u.map(d=>M.jsx("div",{className:`user-avatar ${d.id===(t==null?void 0:t.id)?"current":""}`,style:{backgroundColor:d.color},title:d.name,children:c(d.name)},d.id)),f>0&&M.jsxs("div",{className:"user-avatar",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)"},children:["+",f]})]}),r?M.jsx("form",{onSubmit:l,style:{display:"flex",gap:"8px"},children:M.jsx("input",{type:"text",className:"user-name-input",value:s,onChange:d=>o(d.target.value),placeholder:" ",autoFocus:!0,onBlur:()=>i(!1)})}):M.jsx("div",{className:"users-count",onClick:a,style:{cursor:"pointer"},title:",   ",children:(t==null?void 0:t.name)||""})]})}const bO=b.createContext(null),TO=()=>b.useContext(bO),MO=b.createContext(null),NO=()=>b.useContext(MO),_O=b.createContext(null),tw=()=>b.useContext(_O);function AG(){const[t,e]=b.useState(null),[n,r]=b.useState(null),[i,s]=b.useState([]),[o,l]=b.useState([]),[a,c]=b.useState(!0),[u,f]=b.useState(null),[d,h]=b.useState([]),[p,m]=b.useState(null);b.useEffect(()=>{const E=Au(window.location.origin,{transports:["websocket","polling"]});return E.on("connect",()=>{console.log("Connected to server")}),E.on("user:init",N=>{r(N)}),E.on("users:update",N=>{s(N)}),E.on("node:created",N=>{l(I=>[...I,N])}),E.on("node:updated",N=>{l(I=>I.map(O=>O.id===N.id?N:O))}),E.on("node:deleted",({id:N})=>{l(I=>I.filter(O=>O.id!==N)),(u==null?void 0:u.id)===N&&f(null)}),e(E),()=>{E.disconnect()}},[]),b.useEffect(()=>{v()},[]);const v=async()=>{try{const N=await(await fetch("/api/nodes")).json();l(N)}catch(E){console.error("Error fetching nodes:",E)}finally{c(!1)}},g=async(E,N)=>{try{return await(await fetch("/api/nodes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parentId:E,title:" ",positionX:(N==null?void 0:N.x)||0,positionY:(N==null?void 0:N.y)||0,authorId:(n==null?void 0:n.id)||"anonymous"})})).json()}catch(I){console.error("Error creating node:",I)}},w=async(E,N)=>{try{return await(await fetch(`/api/nodes/${E}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...N,lastEditorId:n==null?void 0:n.id})})).json()}catch(I){console.error("Error updating node:",I)}},y=async E=>{try{await fetch(`/api/nodes/${E}`,{method:"DELETE"})}catch(N){console.error("Error deleting node:",N)}},x=async E=>{if(!E.trim()){h([]),m(null);return}try{const I=await(await fetch(`/api/search?q=${encodeURIComponent(E)}`)).json();h(I)}catch(N){console.error("Search error:",N)}},S=E=>{m(E),h([]),setTimeout(()=>{const N=o.find(I=>I.id===E);N&&f(N)},800)},C=b.useCallback(E=>{f(E)},[]),k=b.useCallback(()=>{f(null)},[]);return a?M.jsxs("div",{className:"loading-screen",children:[M.jsx("div",{className:"loading-spinner"}),M.jsx("p",{className:"loading-text",children:" HoloTree..."})]}):M.jsx(bO.Provider,{value:t,children:M.jsx(MO.Provider,{value:{user:n,setUser:r,users:i},children:M.jsx(_O.Provider,{value:{nodes:o,createNode:g,updateNode:w,deleteNode:y},children:M.jsxs("div",{className:"app",children:[M.jsx("div",{className:"grid-background"}),M.jsxs("header",{className:"app-header",children:[M.jsxs("div",{className:"logo",children:[M.jsx("span",{className:"logo-icon",children:""}),M.jsx("span",{className:"logo-text",children:"HoloTree"})]}),M.jsx(NG,{onSearch:x,results:d,onSelect:S}),M.jsx(_G,{})]}),M.jsx("main",{className:"app-main",children:M.jsx(eU,{onNodeClick:C,highlightedNodeId:p,onHighlightClear:()=>m(null)})}),u&&M.jsx(MG,{node:u,onClose:k})]})})})})}lm.createRoot(document.getElementById("root")).render(M.jsx(lt.StrictMode,{children:M.jsx(AG,{})}));
